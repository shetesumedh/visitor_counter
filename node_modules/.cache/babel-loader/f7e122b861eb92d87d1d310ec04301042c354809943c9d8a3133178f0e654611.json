{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseSignature = parseSignature;\nconst secp256k1_1 = require(\"@noble/curves/secp256k1\");\nconst toHex_js_1 = require(\"../../utils/encoding/toHex.js\");\nfunction parseSignature(signatureHex) {\n  const {\n    r,\n    s\n  } = secp256k1_1.secp256k1.Signature.fromCompact(signatureHex.slice(2, 130));\n  const yParityOrV = Number(`0x${signatureHex.slice(130)}`);\n  const [v, yParity] = (() => {\n    if (yParityOrV === 0 || yParityOrV === 1) return [undefined, yParityOrV];\n    if (yParityOrV === 27) return [BigInt(yParityOrV), 0];\n    if (yParityOrV === 28) return [BigInt(yParityOrV), 1];\n    throw new Error('Invalid yParityOrV value');\n  })();\n  if (typeof v !== 'undefined') return {\n    r: (0, toHex_js_1.numberToHex)(r, {\n      size: 32\n    }),\n    s: (0, toHex_js_1.numberToHex)(s, {\n      size: 32\n    }),\n    v,\n    yParity\n  };\n  return {\n    r: (0, toHex_js_1.numberToHex)(r, {\n      size: 32\n    }),\n    s: (0, toHex_js_1.numberToHex)(s, {\n      size: 32\n    }),\n    yParity\n  };\n}","map":{"version":3,"names":["exports","parseSignature","secp256k1_1","require","toHex_js_1","signatureHex","r","s","secp256k1","Signature","fromCompact","slice","yParityOrV","Number","v","yParity","undefined","BigInt","Error","numberToHex","size"],"sources":["/home/sumedhshete/visitor-counter/frontend_sepolia/node_modules/viem/utils/signature/parseSignature.ts"],"sourcesContent":["import { secp256k1 } from '@noble/curves/secp256k1'\n\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Hex, Signature } from '../../types/misc.js'\nimport {\n  type NumberToHexErrorType,\n  numberToHex,\n} from '../../utils/encoding/toHex.js'\n\nexport type ParseSignatureErrorType = NumberToHexErrorType | ErrorType\n\n/**\n * @description Parses a hex formatted signature into a structured signature.\n *\n * @param signatureHex Signature in hex format.\n * @returns The structured signature.\n *\n * @example\n * parseSignature('0x6e100a352ec6ad1b70802290e18aeed190704973570f3b8ed42cb9808e2ea6bf4a90a229a244495b41890987806fcbd2d5d23fc0dbe5f5256c2613c039d76db81c')\n * // { r: '0x...', s: '0x...', v: 28n }\n */\nexport function parseSignature(signatureHex: Hex) {\n  const { r, s } = secp256k1.Signature.fromCompact(signatureHex.slice(2, 130))\n  const yParityOrV = Number(`0x${signatureHex.slice(130)}`)\n  const [v, yParity] = (() => {\n    if (yParityOrV === 0 || yParityOrV === 1) return [undefined, yParityOrV]\n    if (yParityOrV === 27) return [BigInt(yParityOrV), 0]\n    if (yParityOrV === 28) return [BigInt(yParityOrV), 1]\n    throw new Error('Invalid yParityOrV value')\n  })()\n\n  if (typeof v !== 'undefined')\n    return {\n      r: numberToHex(r, { size: 32 }),\n      s: numberToHex(s, { size: 32 }),\n      v,\n      yParity,\n    } satisfies Signature\n  return {\n    r: numberToHex(r, { size: 32 }),\n    s: numberToHex(s, { size: 32 }),\n    yParity,\n  } satisfies Signature\n}\n"],"mappings":";;;;;AAqBAA,OAAA,CAAAC,cAAA,GAAAA,cAAA;AArBA,MAAAC,WAAA,GAAAC,OAAA;AAIA,MAAAC,UAAA,GAAAD,OAAA;AAiBA,SAAgBF,cAAcA,CAACI,YAAiB;EAC9C,MAAM;IAAEC,CAAC;IAAEC;EAAC,CAAE,GAAGL,WAAA,CAAAM,SAAS,CAACC,SAAS,CAACC,WAAW,CAACL,YAAY,CAACM,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;EAC5E,MAAMC,UAAU,GAAGC,MAAM,CAAC,KAAKR,YAAY,CAACM,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC;EACzD,MAAM,CAACG,CAAC,EAAEC,OAAO,CAAC,GAAG,CAAC,MAAK;IACzB,IAAIH,UAAU,KAAK,CAAC,IAAIA,UAAU,KAAK,CAAC,EAAE,OAAO,CAACI,SAAS,EAAEJ,UAAU,CAAC;IACxE,IAAIA,UAAU,KAAK,EAAE,EAAE,OAAO,CAACK,MAAM,CAACL,UAAU,CAAC,EAAE,CAAC,CAAC;IACrD,IAAIA,UAAU,KAAK,EAAE,EAAE,OAAO,CAACK,MAAM,CAACL,UAAU,CAAC,EAAE,CAAC,CAAC;IACrD,MAAM,IAAIM,KAAK,CAAC,0BAA0B,CAAC;EAC7C,CAAC,EAAC,CAAE;EAEJ,IAAI,OAAOJ,CAAC,KAAK,WAAW,EAC1B,OAAO;IACLR,CAAC,EAAE,IAAAF,UAAA,CAAAe,WAAW,EAACb,CAAC,EAAE;MAAEc,IAAI,EAAE;IAAE,CAAE,CAAC;IAC/Bb,CAAC,EAAE,IAAAH,UAAA,CAAAe,WAAW,EAACZ,CAAC,EAAE;MAAEa,IAAI,EAAE;IAAE,CAAE,CAAC;IAC/BN,CAAC;IACDC;GACmB;EACvB,OAAO;IACLT,CAAC,EAAE,IAAAF,UAAA,CAAAe,WAAW,EAACb,CAAC,EAAE;MAAEc,IAAI,EAAE;IAAE,CAAE,CAAC;IAC/Bb,CAAC,EAAE,IAAAH,UAAA,CAAAe,WAAW,EAACZ,CAAC,EAAE;MAAEa,IAAI,EAAE;IAAE,CAAE,CAAC;IAC/BL;GACmB;AACvB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}