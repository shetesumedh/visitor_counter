{"ast":null,"code":"// Copyright (c) 2018-2024 Coinbase, Inc. <https://www.coinbase.com/>\n// TODO: clean up, or possibly deprecate Storage class\nexport class ScopedLocalStorage {\n  constructor(scope, module) {\n    this.scope = scope;\n    this.module = module;\n  }\n  storeObject(key, item) {\n    this.setItem(key, JSON.stringify(item));\n  }\n  loadObject(key) {\n    const item = this.getItem(key);\n    return item ? JSON.parse(item) : undefined;\n  }\n  setItem(key, value) {\n    localStorage.setItem(this.scopedKey(key), value);\n  }\n  getItem(key) {\n    return localStorage.getItem(this.scopedKey(key));\n  }\n  removeItem(key) {\n    localStorage.removeItem(this.scopedKey(key));\n  }\n  clear() {\n    const prefix = this.scopedKey('');\n    const keysToRemove = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (typeof key === 'string' && key.startsWith(prefix)) {\n        keysToRemove.push(key);\n      }\n    }\n    keysToRemove.forEach(key => localStorage.removeItem(key));\n  }\n  scopedKey(key) {\n    return `-${this.scope}${this.module ? `:${this.module}` : ''}:${key}`;\n  }\n  static clearAll() {\n    new ScopedLocalStorage('CBWSDK').clear();\n    new ScopedLocalStorage('walletlink').clear();\n  }\n}","map":{"version":3,"names":["ScopedLocalStorage","constructor","scope","module","storeObject","key","item","setItem","JSON","stringify","loadObject","getItem","parse","undefined","value","localStorage","scopedKey","removeItem","clear","prefix","keysToRemove","i","length","startsWith","push","forEach","clearAll"],"sources":["../../../src/core/storage/ScopedLocalStorage.ts"],"sourcesContent":[null],"mappings":"AAAA;AAEA;AACA,OAAM,MAAOA,kBAAkB;EAC7BC,YACUC,KAA8B,EAC9BC,MAAe;IADf,KAAAD,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;EACb;EAEHC,WAAWA,CAAIC,GAAW,EAAEC,IAAO;IACjC,IAAI,CAACC,OAAO,CAACF,GAAG,EAAEG,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;EACzC;EAEAI,UAAUA,CAAIL,GAAW;IACvB,MAAMC,IAAI,GAAG,IAAI,CAACK,OAAO,CAACN,GAAG,CAAC;IAC9B,OAAOC,IAAI,GAAGE,IAAI,CAACI,KAAK,CAACN,IAAI,CAAC,GAAGO,SAAS;EAC5C;EAEON,OAAOA,CAACF,GAAW,EAAES,KAAa;IACvCC,YAAY,CAACR,OAAO,CAAC,IAAI,CAACS,SAAS,CAACX,GAAG,CAAC,EAAES,KAAK,CAAC;EAClD;EAEOH,OAAOA,CAACN,GAAW;IACxB,OAAOU,YAAY,CAACJ,OAAO,CAAC,IAAI,CAACK,SAAS,CAACX,GAAG,CAAC,CAAC;EAClD;EAEOY,UAAUA,CAACZ,GAAW;IAC3BU,YAAY,CAACE,UAAU,CAAC,IAAI,CAACD,SAAS,CAACX,GAAG,CAAC,CAAC;EAC9C;EAEOa,KAAKA,CAAA;IACV,MAAMC,MAAM,GAAG,IAAI,CAACH,SAAS,CAAC,EAAE,CAAC;IACjC,MAAMI,YAAY,GAAa,EAAE;IACjC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,YAAY,CAACO,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,MAAMhB,GAAG,GAAGU,YAAY,CAACV,GAAG,CAACgB,CAAC,CAAC;MAC/B,IAAI,OAAOhB,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACkB,UAAU,CAACJ,MAAM,CAAC,EAAE;QACrDC,YAAY,CAACI,IAAI,CAACnB,GAAG,CAAC;MACxB;IACF;IACAe,YAAY,CAACK,OAAO,CAAEpB,GAAG,IAAKU,YAAY,CAACE,UAAU,CAACZ,GAAG,CAAC,CAAC;EAC7D;EAEAW,SAASA,CAACX,GAAW;IACnB,OAAO,IAAI,IAAI,CAACH,KAAK,GAAG,IAAI,CAACC,MAAM,GAAG,IAAI,IAAI,CAACA,MAAM,EAAE,GAAG,EAAE,IAAIE,GAAG,EAAE;EACvE;EAEA,OAAOqB,QAAQA,CAAA;IACb,IAAI1B,kBAAkB,CAAC,QAAQ,CAAC,CAACkB,KAAK,EAAE;IACxC,IAAIlB,kBAAkB,CAAC,YAAY,CAAC,CAACkB,KAAK,EAAE;EAC9C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}