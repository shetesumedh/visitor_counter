{"ast":null,"code":"import { AlertController, ApiController, ConstantsUtil } from '@reown/appkit-controllers';\nconst FEATURE_KEYS = ['email', 'socials', 'swaps', 'onramp', 'activity', 'reownBranding'];\nconst featureConfig = {\n  email: {\n    apiFeatureName: 'social_login',\n    localFeatureName: 'email',\n    returnType: false,\n    isLegacy: false,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => {\n      if (!apiConfig?.config) {\n        return false;\n      }\n      const config = apiConfig.config;\n      return Boolean(apiConfig.isEnabled) && config.includes('email');\n    },\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.email;\n      }\n      return Boolean(localValue);\n    }\n  },\n  socials: {\n    apiFeatureName: 'social_login',\n    localFeatureName: 'socials',\n    returnType: false,\n    isLegacy: false,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => {\n      if (!apiConfig?.config) {\n        return false;\n      }\n      const config = apiConfig.config;\n      return Boolean(apiConfig.isEnabled) && config.length > 0 ? config.filter(s => s !== 'email') : false;\n    },\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials;\n      }\n      if (typeof localValue === 'boolean') {\n        return localValue ? ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials : false;\n      }\n      return localValue;\n    }\n  },\n  swaps: {\n    apiFeatureName: 'swap',\n    localFeatureName: 'swaps',\n    returnType: false,\n    isLegacy: false,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => {\n      if (!apiConfig?.config) {\n        return false;\n      }\n      const config = apiConfig.config;\n      return Boolean(apiConfig.isEnabled) && config.length > 0 ? config : false;\n    },\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.swaps;\n      }\n      if (typeof localValue === 'boolean') {\n        return localValue ? ConstantsUtil.DEFAULT_REMOTE_FEATURES.swaps : false;\n      }\n      return localValue;\n    }\n  },\n  onramp: {\n    apiFeatureName: 'onramp',\n    localFeatureName: 'onramp',\n    returnType: false,\n    isLegacy: false,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => {\n      if (!apiConfig?.config) {\n        return false;\n      }\n      const config = apiConfig.config;\n      return Boolean(apiConfig.isEnabled) && config.length > 0 ? config : false;\n    },\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.onramp;\n      }\n      if (typeof localValue === 'boolean') {\n        return localValue ? ConstantsUtil.DEFAULT_REMOTE_FEATURES.onramp : false;\n      }\n      return localValue;\n    }\n  },\n  activity: {\n    apiFeatureName: 'activity',\n    localFeatureName: 'history',\n    returnType: false,\n    isLegacy: true,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => Boolean(apiConfig.isEnabled),\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.activity;\n      }\n      return Boolean(localValue);\n    }\n  },\n  reownBranding: {\n    apiFeatureName: 'reown_branding',\n    localFeatureName: 'reownBranding',\n    returnType: false,\n    isLegacy: false,\n    isAvailableOnBasic: false,\n    processApi: apiConfig => Boolean(apiConfig.isEnabled),\n    processFallback: localValue => {\n      if (localValue === undefined) {\n        return ConstantsUtil.DEFAULT_REMOTE_FEATURES.reownBranding;\n      }\n      return Boolean(localValue);\n    }\n  }\n};\nexport const ConfigUtil = {\n  localSettingsOverridden: new Set(),\n  getApiConfig(id, apiProjectConfig) {\n    return apiProjectConfig?.find(f => f.id === id);\n  },\n  addWarning(localFeatureValue, featureKey) {\n    if (localFeatureValue !== undefined) {\n      const config = featureConfig[featureKey];\n      const warningName = config.isLegacy ? `\"features.${config.localFeatureName}\" (now \"${featureKey}\")` : `\"features.${featureKey}\"`;\n      this.localSettingsOverridden.add(warningName);\n    }\n  },\n  processFeature(featureKey, localFeatures, apiProjectConfig, useApi, isBasic) {\n    const config = featureConfig[featureKey];\n    const localValue = localFeatures[config.localFeatureName];\n    if (isBasic && !config.isAvailableOnBasic) {\n      return false;\n    }\n    if (useApi) {\n      const apiConfig = this.getApiConfig(config.apiFeatureName, apiProjectConfig);\n      if (apiConfig?.config === null) {\n        return this.processFallbackFeature(featureKey, localValue);\n      }\n      if (!apiConfig?.config) {\n        return false;\n      }\n      if (localValue !== undefined) {\n        this.addWarning(localValue, featureKey);\n      }\n      return this.processApiFeature(featureKey, apiConfig);\n    }\n    return this.processFallbackFeature(featureKey, localValue);\n  },\n  processApiFeature(featureKey, apiConfig) {\n    return featureConfig[featureKey].processApi(apiConfig);\n  },\n  processFallbackFeature(featureKey, localValue) {\n    return featureConfig[featureKey].processFallback(localValue);\n  },\n  async fetchRemoteFeatures(config) {\n    const isBasic = config.basic ?? false;\n    const localFeatures = config.features || {};\n    this.localSettingsOverridden.clear();\n    let apiProjectConfig = null;\n    let useApiConfig = false;\n    try {\n      apiProjectConfig = await ApiController.fetchProjectConfig();\n      useApiConfig = apiProjectConfig !== null && apiProjectConfig !== undefined;\n    } catch (e) {\n      console.warn('[Reown Config] Failed to fetch remote project configuration. Using local/default values.', e);\n    }\n    const remoteFeaturesConfig = useApiConfig && !isBasic ? ConstantsUtil.DEFAULT_REMOTE_FEATURES : ConstantsUtil.DEFAULT_REMOTE_FEATURES_DISABLED;\n    try {\n      for (const featureKey of FEATURE_KEYS) {\n        const result = this.processFeature(featureKey, localFeatures, apiProjectConfig, useApiConfig, isBasic);\n        Object.assign(remoteFeaturesConfig, {\n          [featureKey]: result\n        });\n      }\n    } catch (e) {\n      console.warn('[Reown Config] Failed to process the configuration from Cloud. Using default values.', e);\n      return ConstantsUtil.DEFAULT_REMOTE_FEATURES;\n    }\n    if (useApiConfig && this.localSettingsOverridden.size > 0) {\n      const warningMessage = `Your local configuration for ${Array.from(this.localSettingsOverridden).join(', ')} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;\n      AlertController.open({\n        shortMessage: 'Local configuration ignored',\n        longMessage: `[Reown Config Notice] ${warningMessage}`\n      }, 'warning');\n    }\n    return remoteFeaturesConfig;\n  }\n};","map":{"version":3,"names":["AlertController","ApiController","ConstantsUtil","FEATURE_KEYS","featureConfig","email","apiFeatureName","localFeatureName","returnType","isLegacy","isAvailableOnBasic","processApi","apiConfig","config","Boolean","isEnabled","includes","processFallback","localValue","undefined","DEFAULT_REMOTE_FEATURES","socials","length","filter","s","swaps","onramp","activity","reownBranding","ConfigUtil","localSettingsOverridden","Set","getApiConfig","id","apiProjectConfig","find","f","addWarning","localFeatureValue","featureKey","warningName","add","processFeature","localFeatures","useApi","isBasic","processFallbackFeature","processApiFeature","fetchRemoteFeatures","basic","features","clear","useApiConfig","fetchProjectConfig","e","console","warn","remoteFeaturesConfig","DEFAULT_REMOTE_FEATURES_DISABLED","result","Object","assign","size","warningMessage","Array","from","join","open","shortMessage","longMessage"],"sources":["../../../../src/utils/ConfigUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}