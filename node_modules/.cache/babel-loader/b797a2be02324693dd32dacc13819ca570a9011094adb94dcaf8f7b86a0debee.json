{"ast":null,"code":"var _jsxFileName = \"/home/sumedhshete/visitor-counter/frontend_sepolia/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { WagmiProvider, createConfig, useAccount, useConnect, useDisconnect } from \"wagmi\";\nimport { injected } from \"@wagmi/connectors\";\nimport { ethers } from \"ethers\";\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { baseSepolia } from \"wagmi/chains\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst queryClient = new QueryClient();\nconst CONTRACT_ADDRESS = \"0x2fE6ce226C59e6960C15Dc4110DA67018e043821\";\nconst CONTRACT_ABI = [\"function registerVisit() public\", \"function visitorCount() public view returns (uint256)\"];\n\n// Wagmi config with injected connector\nconsole.log(\"Injected connector:\", injected());\nconst config = createConfig({\n  autoConnect: true,\n  connectors: [injected()],\n  chains: [baseSepolia]\n});\nfunction AppContent() {\n  _s();\n  const {\n    address,\n    isConnected\n  } = useAccount();\n  const {\n    connect,\n    connectors,\n    isPending\n  } = useConnect();\n  const {\n    disconnect\n  } = useDisconnect();\n  const [visitorCount, setVisitorCount] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [txPending, setTxPending] = useState(false);\n\n  // Get contract instance with signer or provider\n  function getContract(signerOrProvider) {\n    return new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signerOrProvider);\n  }\n\n  // Fetch visitor count (read-only)\n  async function fetchVisitorCount() {\n    if (!window.ethereum) {\n      alert(\"Please install MetaMask or compatible wallet\");\n      return;\n    }\n    setLoading(true);\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const contract = getContract(provider);\n      const count = await contract.visitorCount();\n      setVisitorCount(Number(count));\n    } catch (error) {\n      console.error(\"Failed to fetch visitor count\", error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Register visit (send transaction)\n  async function registerVisit() {\n    if (!window.ethereum) {\n      alert(\"Please install MetaMask or compatible wallet\");\n      return;\n    }\n    setTxPending(true);\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const contract = getContract(signer);\n      const tx = await contract.registerVisit();\n      await tx.wait();\n      alert(\"Visit registered successfully!\");\n      fetchVisitorCount();\n    } catch (error) {\n      console.error(error);\n      alert(\"Transaction failed or rejected.\");\n    } finally {\n      setTxPending(false);\n    }\n  }\n  React.useEffect(() => {\n    if (isConnected) {\n      fetchVisitorCount();\n    } else {\n      setVisitorCount(null);\n    }\n  }, [isConnected]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: \"2rem auto\",\n      padding: \"1rem\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Visitor Wallet Counter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), !isConnected ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => connect({\n        connector: connectors[0]\n      }),\n      disabled: isPending,\n      children: \"Connect Wallet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Connected wallet:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 14\n        }, this), \" \", address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: registerVisit,\n        disabled: txPending,\n        children: txPending ? \"Registering visit...\" : \"Register Visit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => disconnect(),\n        style: {\n          marginLeft: \"1rem\"\n        },\n        children: \"Disconnect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1.5rem\"\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading visitor count...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this) : visitorCount !== null && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total unique visitors:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 39\n        }, this), \" \", visitorCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"sX9qAHX4W+7hdZljKOYVQn24cgM=\", false, function () {\n  return [useAccount, useConnect, useDisconnect];\n});\n_c = AppContent;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(WagmiProvider, {\n    config: config,\n    children: /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n      client: queryClient,\n      children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useEffect","useState","WagmiProvider","createConfig","useAccount","useConnect","useDisconnect","injected","ethers","QueryClient","QueryClientProvider","baseSepolia","jsxDEV","_jsxDEV","Fragment","_Fragment","queryClient","CONTRACT_ADDRESS","CONTRACT_ABI","console","log","config","autoConnect","connectors","chains","AppContent","_s","address","isConnected","connect","isPending","disconnect","visitorCount","setVisitorCount","loading","setLoading","txPending","setTxPending","getContract","signerOrProvider","Contract","fetchVisitorCount","window","ethereum","alert","provider","BrowserProvider","contract","count","Number","error","registerVisit","signer","getSigner","tx","wait","style","maxWidth","margin","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","connector","disabled","marginLeft","marginTop","_c","App","client","_c2","$RefreshReg$"],"sources":["/home/sumedhshete/visitor-counter/frontend_sepolia/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { WagmiProvider, createConfig, useAccount, useConnect, useDisconnect } from \"wagmi\";\nimport { injected } from \"@wagmi/connectors\";\nimport { ethers } from \"ethers\";\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { baseSepolia } from \"wagmi/chains\"\n\nconst queryClient = new QueryClient();\n\nconst CONTRACT_ADDRESS = \"0x2fE6ce226C59e6960C15Dc4110DA67018e043821\";\nconst CONTRACT_ABI = [\n  \"function registerVisit() public\",\n  \"function visitorCount() public view returns (uint256)\"\n];\n\n// Wagmi config with injected connector\nconsole.log(\"Injected connector:\", injected());\n\nconst config = createConfig({\n  autoConnect: true,\n  connectors: [injected()],\n  chains: [baseSepolia],\n});\n\nfunction AppContent() {\n  const { address, isConnected } = useAccount();\n  const { connect, connectors, isPending } = useConnect();\n  const { disconnect } = useDisconnect();\n\n  const [visitorCount, setVisitorCount] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [txPending, setTxPending] = useState(false);\n\n  // Get contract instance with signer or provider\n  function getContract(signerOrProvider) {\n    return new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signerOrProvider);\n  }\n\n  // Fetch visitor count (read-only)\n  async function fetchVisitorCount() {\n    if (!window.ethereum) {\n      alert(\"Please install MetaMask or compatible wallet\");\n      return;\n    }\n    setLoading(true);\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const contract = getContract(provider);\n      const count = await contract.visitorCount();\n      setVisitorCount(Number(count));\n    } catch (error) {\n      console.error(\"Failed to fetch visitor count\", error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Register visit (send transaction)\n  async function registerVisit() {\n    if (!window.ethereum) {\n      alert(\"Please install MetaMask or compatible wallet\");\n      return;\n    }\n    setTxPending(true);\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const contract = getContract(signer);\n      const tx = await contract.registerVisit();\n      await tx.wait();\n      alert(\"Visit registered successfully!\");\n      fetchVisitorCount();\n    } catch (error) {\n      console.error(error);\n      alert(\"Transaction failed or rejected.\");\n    } finally {\n      setTxPending(false);\n    }\n  }\n\n  React.useEffect(() => {\n    if (isConnected) {\n      fetchVisitorCount();\n    } else {\n      setVisitorCount(null);\n    }\n  }, [isConnected]);\n\n  return (\n    <div style={{ maxWidth: 600, margin: \"2rem auto\", padding: \"1rem\", fontFamily: \"Arial, sans-serif\" }}>\n      <h1>Visitor Wallet Counter</h1>\n\n      {!isConnected ? (\n      <button\n  onClick={() => connect({ connector: connectors[0] })}\n  disabled={isPending}\n>\n  Connect Wallet\n</button>\n\n      ) : (\n        <>\n          <p><strong>Connected wallet:</strong> {address}</p>\n          <button onClick={registerVisit} disabled={txPending}>\n            {txPending ? \"Registering visit...\" : \"Register Visit\"}\n          </button>\n          <button onClick={() => disconnect()} style={{ marginLeft: \"1rem\" }}>Disconnect</button>\n        </>\n      )}\n\n      <div style={{ marginTop: \"1.5rem\" }}>\n        {loading ? (\n          <p>Loading visitor count...</p>\n        ) : (\n          visitorCount !== null && <p><strong>Total unique visitors:</strong> {visitorCount}</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <WagmiProvider config={config}>\n      <QueryClientProvider client={queryClient}>\n        <AppContent />\n      </QueryClientProvider>\n    </WagmiProvider>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}