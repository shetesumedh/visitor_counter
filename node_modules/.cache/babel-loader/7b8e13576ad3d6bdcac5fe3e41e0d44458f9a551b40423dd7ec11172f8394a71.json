{"ast":null,"code":"import { watchBlockNumber as viem_watchBlockNumber } from 'viem/actions';\nimport { getAction } from '../utils/getAction.js';\n// TODO: wrap in viem's `observe` to avoid duplicate invocations.\n/** https://wagmi.sh/core/api/actions/watchBlockNumber */\nexport function watchBlockNumber(config, parameters) {\n  const {\n    syncConnectedChain = config._internal.syncConnectedChain,\n    ...rest\n  } = parameters;\n  let unwatch;\n  const listener = chainId => {\n    if (unwatch) unwatch();\n    const client = config.getClient({\n      chainId\n    });\n    const action = getAction(client, viem_watchBlockNumber, 'watchBlockNumber');\n    unwatch = action(rest);\n    return unwatch;\n  };\n  // set up listener for block number changes\n  const unlisten = listener(parameters.chainId);\n  // set up subscriber for connected chain changes\n  let unsubscribe;\n  if (syncConnectedChain && !parameters.chainId) unsubscribe = config.subscribe(({\n    chainId\n  }) => chainId, async chainId => listener(chainId));\n  return () => {\n    unlisten?.();\n    unsubscribe?.();\n  };\n}","map":{"version":3,"names":["watchBlockNumber","viem_watchBlockNumber","getAction","config","parameters","syncConnectedChain","_internal","rest","unwatch","listener","chainId","client","getClient","action","unlisten","unsubscribe","subscribe"],"sources":["/home/sumedhshete/visitor-counter/frontend/node_modules/@wagmi/core/src/actions/watchBlockNumber.ts"],"sourcesContent":["import {\n  type WatchBlockNumberParameters as viem_WatchBlockNumberParameters,\n  type WatchBlockNumberReturnType as viem_WatchBlockNumberReturnType,\n  watchBlockNumber as viem_watchBlockNumber,\n} from 'viem/actions'\n\nimport type { Chain, Transport, WebSocketTransport } from 'viem'\nimport type { Config } from '../createConfig.js'\nimport type { SelectChains } from '../types/chain.js'\nimport type {\n  ChainIdParameter,\n  SyncConnectedChainParameter,\n} from '../types/properties.js'\nimport type { UnionCompute } from '../types/utils.js'\nimport { getAction } from '../utils/getAction.js'\n\nexport type WatchBlockNumberParameters<\n  config extends Config = Config,\n  chainId extends\n    config['chains'][number]['id'] = config['chains'][number]['id'],\n  ///\n  chains extends readonly Chain[] = SelectChains<config, chainId>,\n> = {\n  [key in keyof chains]: UnionCompute<\n    viem_WatchBlockNumberParameters<\n      config['_internal']['transports'][chains[key]['id']] extends infer transport extends\n        Transport\n        ? Transport extends transport\n          ? WebSocketTransport\n          : transport\n        : WebSocketTransport\n    > &\n      ChainIdParameter<config, chainId> &\n      SyncConnectedChainParameter\n  >\n}[number]\n\nexport type WatchBlockNumberReturnType = viem_WatchBlockNumberReturnType\n\n// TODO: wrap in viem's `observe` to avoid duplicate invocations.\n/** https://wagmi.sh/core/api/actions/watchBlockNumber */\nexport function watchBlockNumber<\n  config extends Config,\n  chainId extends\n    config['chains'][number]['id'] = config['chains'][number]['id'],\n>(\n  config: config,\n  parameters: WatchBlockNumberParameters<config, chainId>,\n): WatchBlockNumberReturnType {\n  const { syncConnectedChain = config._internal.syncConnectedChain, ...rest } =\n    parameters as WatchBlockNumberParameters\n\n  let unwatch: WatchBlockNumberReturnType | undefined\n  const listener = (chainId: number | undefined) => {\n    if (unwatch) unwatch()\n\n    const client = config.getClient({ chainId })\n    const action = getAction(client, viem_watchBlockNumber, 'watchBlockNumber')\n    unwatch = action(rest as viem_WatchBlockNumberParameters)\n    return unwatch\n  }\n\n  // set up listener for block number changes\n  const unlisten = listener(parameters.chainId)\n\n  // set up subscriber for connected chain changes\n  let unsubscribe: (() => void) | undefined\n  if (syncConnectedChain && !parameters.chainId)\n    unsubscribe = config.subscribe(\n      ({ chainId }) => chainId,\n      async (chainId) => listener(chainId),\n    )\n\n  return () => {\n    unlisten?.()\n    unsubscribe?.()\n  }\n}\n"],"mappings":"AAAA,SAGEA,gBAAgB,IAAIC,qBAAqB,QACpC,cAAc;AAUrB,SAASC,SAAS,QAAQ,uBAAuB;AAyBjD;AACA;AACA,OAAM,SAAUF,gBAAgBA,CAK9BG,MAAc,EACdC,UAAuD;EAEvD,MAAM;IAAEC,kBAAkB,GAAGF,MAAM,CAACG,SAAS,CAACD,kBAAkB;IAAE,GAAGE;EAAI,CAAE,GACzEH,UAAwC;EAE1C,IAAII,OAA+C;EACnD,MAAMC,QAAQ,GAAIC,OAA2B,IAAI;IAC/C,IAAIF,OAAO,EAAEA,OAAO,EAAE;IAEtB,MAAMG,MAAM,GAAGR,MAAM,CAACS,SAAS,CAAC;MAAEF;IAAO,CAAE,CAAC;IAC5C,MAAMG,MAAM,GAAGX,SAAS,CAACS,MAAM,EAAEV,qBAAqB,EAAE,kBAAkB,CAAC;IAC3EO,OAAO,GAAGK,MAAM,CAACN,IAAuC,CAAC;IACzD,OAAOC,OAAO;EAChB,CAAC;EAED;EACA,MAAMM,QAAQ,GAAGL,QAAQ,CAACL,UAAU,CAACM,OAAO,CAAC;EAE7C;EACA,IAAIK,WAAqC;EACzC,IAAIV,kBAAkB,IAAI,CAACD,UAAU,CAACM,OAAO,EAC3CK,WAAW,GAAGZ,MAAM,CAACa,SAAS,CAC5B,CAAC;IAAEN;EAAO,CAAE,KAAKA,OAAO,EACxB,MAAOA,OAAO,IAAKD,QAAQ,CAACC,OAAO,CAAC,CACrC;EAEH,OAAO,MAAK;IACVI,QAAQ,GAAE,CAAE;IACZC,WAAW,GAAE,CAAE;EACjB,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}