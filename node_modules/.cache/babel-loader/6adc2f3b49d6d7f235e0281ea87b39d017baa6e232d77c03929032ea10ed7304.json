{"ast":null,"code":"/**\n * Towered extension fields.\n * Rather than implementing a massive 12th-degree extension directly, it is more efficient\n * to build it up from smaller extensions: a tower of extensions.\n *\n * For BLS12-381, the Fp12 field is implemented as a quadratic (degree two) extension,\n * on top of a cubic (degree three) extension, on top of a quadratic extension of Fp.\n *\n * For more info: \"Pairings for beginners\" by Costello, section 7.3.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { bitGet, bitLen, concatBytes, notImplemented } from \"../utils.js\";\nimport * as mod from \"./modular.js\";\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0),\n  _1n = BigInt(1),\n  _2n = BigInt(2),\n  _3n = BigInt(3);\nfunction calcFrobeniusCoefficients(Fp, nonResidue, modulus, degree, num = 1, divisor) {\n  const _divisor = BigInt(divisor === undefined ? degree : divisor);\n  const towerModulus = modulus ** BigInt(degree);\n  const res = [];\n  for (let i = 0; i < num; i++) {\n    const a = BigInt(i + 1);\n    const powers = [];\n    for (let j = 0, qPower = _1n; j < degree; j++) {\n      const power = (a * qPower - a) / _divisor % towerModulus;\n      powers.push(Fp.pow(nonResidue, power));\n      qPower *= modulus;\n    }\n    res.push(powers);\n  }\n  return res;\n}\n// This works same at least for bls12-381, bn254 and bls12-377\nexport function psiFrobenius(Fp, Fp2, base) {\n  // GLV endomorphism Ψ(P)\n  const PSI_X = Fp2.pow(base, (Fp.ORDER - _1n) / _3n); // u^((p-1)/3)\n  const PSI_Y = Fp2.pow(base, (Fp.ORDER - _1n) / _2n); // u^((p-1)/2)\n  function psi(x, y) {\n    // This x10 faster than previous version in bls12-381\n    const x2 = Fp2.mul(Fp2.frobeniusMap(x, 1), PSI_X);\n    const y2 = Fp2.mul(Fp2.frobeniusMap(y, 1), PSI_Y);\n    return [x2, y2];\n  }\n  // Ψ²(P) endomorphism (psi2(x) = psi(psi(x)))\n  const PSI2_X = Fp2.pow(base, (Fp.ORDER ** _2n - _1n) / _3n); // u^((p^2 - 1)/3)\n  // This equals -1, which causes y to be Fp2.neg(y).\n  // But not sure if there are case when this is not true?\n  const PSI2_Y = Fp2.pow(base, (Fp.ORDER ** _2n - _1n) / _2n); // u^((p^2 - 1)/3)\n  if (!Fp2.eql(PSI2_Y, Fp2.neg(Fp2.ONE))) throw new Error('psiFrobenius: PSI2_Y!==-1');\n  function psi2(x, y) {\n    return [Fp2.mul(x, PSI2_X), Fp2.neg(y)];\n  }\n  // Map points\n  const mapAffine = fn => (c, P) => {\n    const affine = P.toAffine();\n    const p = fn(affine.x, affine.y);\n    return c.fromAffine({\n      x: p[0],\n      y: p[1]\n    });\n  };\n  const G2psi = mapAffine(psi);\n  const G2psi2 = mapAffine(psi2);\n  return {\n    psi,\n    psi2,\n    G2psi,\n    G2psi2,\n    PSI_X,\n    PSI_Y,\n    PSI2_X,\n    PSI2_Y\n  };\n}\nconst Fp2fromBigTuple = (Fp, tuple) => {\n  if (tuple.length !== 2) throw new Error('invalid tuple');\n  const fps = tuple.map(n => Fp.create(n));\n  return {\n    c0: fps[0],\n    c1: fps[1]\n  };\n};\nclass _Field2 {\n  constructor(Fp, opts = {}) {\n    this.MASK = _1n;\n    const ORDER = Fp.ORDER;\n    const FP2_ORDER = ORDER * ORDER;\n    this.Fp = Fp;\n    this.ORDER = FP2_ORDER;\n    this.BITS = bitLen(FP2_ORDER);\n    this.BYTES = Math.ceil(bitLen(FP2_ORDER) / 8);\n    this.isLE = Fp.isLE;\n    this.ZERO = {\n      c0: Fp.ZERO,\n      c1: Fp.ZERO\n    };\n    this.ONE = {\n      c0: Fp.ONE,\n      c1: Fp.ZERO\n    };\n    this.Fp_NONRESIDUE = Fp.create(opts.NONRESIDUE || BigInt(-1));\n    this.Fp_div2 = Fp.div(Fp.ONE, _2n); // 1/2\n    this.NONRESIDUE = Fp2fromBigTuple(Fp, opts.FP2_NONRESIDUE);\n    // const Fp2Nonresidue = Fp2fromBigTuple(opts.FP2_NONRESIDUE);\n    this.FROBENIUS_COEFFICIENTS = calcFrobeniusCoefficients(Fp, this.Fp_NONRESIDUE, Fp.ORDER, 2)[0];\n    this.mulByB = opts.Fp2mulByB;\n    Object.seal(this);\n  }\n  fromBigTuple(tuple) {\n    return Fp2fromBigTuple(this.Fp, tuple);\n  }\n  create(num) {\n    return num;\n  }\n  isValid({\n    c0,\n    c1\n  }) {\n    function isValidC(num, ORDER) {\n      return typeof num === 'bigint' && _0n <= num && num < ORDER;\n    }\n    return isValidC(c0, this.ORDER) && isValidC(c1, this.ORDER);\n  }\n  is0({\n    c0,\n    c1\n  }) {\n    return this.Fp.is0(c0) && this.Fp.is0(c1);\n  }\n  isValidNot0(num) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  eql({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }) {\n    return this.Fp.eql(c0, r0) && this.Fp.eql(c1, r1);\n  }\n  neg({\n    c0,\n    c1\n  }) {\n    return {\n      c0: this.Fp.neg(c0),\n      c1: this.Fp.neg(c1)\n    };\n  }\n  pow(num, power) {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums) {\n    return mod.FpInvertBatch(this, nums);\n  }\n  // Normalized\n  add(f1, f2) {\n    const {\n      c0,\n      c1\n    } = f1;\n    const {\n      c0: r0,\n      c1: r1\n    } = f2;\n    return {\n      c0: this.Fp.add(c0, r0),\n      c1: this.Fp.add(c1, r1)\n    };\n  }\n  sub({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }) {\n    return {\n      c0: this.Fp.sub(c0, r0),\n      c1: this.Fp.sub(c1, r1)\n    };\n  }\n  mul({\n    c0,\n    c1\n  }, rhs) {\n    const {\n      Fp\n    } = this;\n    if (typeof rhs === 'bigint') return {\n      c0: Fp.mul(c0, rhs),\n      c1: Fp.mul(c1, rhs)\n    };\n    // (a+bi)(c+di) = (ac−bd) + (ad+bc)i\n    const {\n      c0: r0,\n      c1: r1\n    } = rhs;\n    let t1 = Fp.mul(c0, r0); // c0 * o0\n    let t2 = Fp.mul(c1, r1); // c1 * o1\n    // (T1 - T2) + ((c0 + c1) * (r0 + r1) - (T1 + T2))*i\n    const o0 = Fp.sub(t1, t2);\n    const o1 = Fp.sub(Fp.mul(Fp.add(c0, c1), Fp.add(r0, r1)), Fp.add(t1, t2));\n    return {\n      c0: o0,\n      c1: o1\n    };\n  }\n  sqr({\n    c0,\n    c1\n  }) {\n    const {\n      Fp\n    } = this;\n    const a = Fp.add(c0, c1);\n    const b = Fp.sub(c0, c1);\n    const c = Fp.add(c0, c0);\n    return {\n      c0: Fp.mul(a, b),\n      c1: Fp.mul(c, c1)\n    };\n  }\n  // NonNormalized stuff\n  addN(a, b) {\n    return this.add(a, b);\n  }\n  subN(a, b) {\n    return this.sub(a, b);\n  }\n  mulN(a, b) {\n    return this.mul(a, b);\n  }\n  sqrN(a) {\n    return this.sqr(a);\n  }\n  // Why inversion for bigint inside Fp instead of Fp2? it is even used in that context?\n  div(lhs, rhs) {\n    const {\n      Fp\n    } = this;\n    // @ts-ignore\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  inv({\n    c0: a,\n    c1: b\n  }) {\n    // We wish to find the multiplicative inverse of a nonzero\n    // element a + bu in Fp2. We leverage an identity\n    //\n    // (a + bu)(a - bu) = a² + b²\n    //\n    // which holds because u² = -1. This can be rewritten as\n    //\n    // (a + bu)(a - bu)/(a² + b²) = 1\n    //\n    // because a² + b² = 0 has no nonzero solutions for (a, b).\n    // This gives that (a - bu)/(a² + b²) is the inverse\n    // of (a + bu). Importantly, this can be computing using\n    // only a single inversion in Fp.\n    const {\n      Fp\n    } = this;\n    const factor = Fp.inv(Fp.create(a * a + b * b));\n    return {\n      c0: Fp.mul(factor, Fp.create(a)),\n      c1: Fp.mul(factor, Fp.create(-b))\n    };\n  }\n  sqrt(num) {\n    // This is generic for all quadratic extensions (Fp2)\n    const {\n      Fp\n    } = this;\n    const Fp2 = this;\n    const {\n      c0,\n      c1\n    } = num;\n    if (Fp.is0(c1)) {\n      // if c0 is quadratic residue\n      if (mod.FpLegendre(Fp, c0) === 1) return Fp2.create({\n        c0: Fp.sqrt(c0),\n        c1: Fp.ZERO\n      });else return Fp2.create({\n        c0: Fp.ZERO,\n        c1: Fp.sqrt(Fp.div(c0, this.Fp_NONRESIDUE))\n      });\n    }\n    const a = Fp.sqrt(Fp.sub(Fp.sqr(c0), Fp.mul(Fp.sqr(c1), this.Fp_NONRESIDUE)));\n    let d = Fp.mul(Fp.add(a, c0), this.Fp_div2);\n    const legendre = mod.FpLegendre(Fp, d);\n    // -1, Quadratic non residue\n    if (legendre === -1) d = Fp.sub(d, a);\n    const a0 = Fp.sqrt(d);\n    const candidateSqrt = Fp2.create({\n      c0: a0,\n      c1: Fp.div(Fp.mul(c1, this.Fp_div2), a0)\n    });\n    if (!Fp2.eql(Fp2.sqr(candidateSqrt), num)) throw new Error('Cannot find square root');\n    // Normalize root: at this point candidateSqrt ** 2 = num, but also -candidateSqrt ** 2 = num\n    const x1 = candidateSqrt;\n    const x2 = Fp2.neg(x1);\n    const {\n      re: re1,\n      im: im1\n    } = Fp2.reim(x1);\n    const {\n      re: re2,\n      im: im2\n    } = Fp2.reim(x2);\n    if (im1 > im2 || im1 === im2 && re1 > re2) return x1;\n    return x2;\n  }\n  // Same as sgn0_m_eq_2 in RFC 9380\n  isOdd(x) {\n    const {\n      re: x0,\n      im: x1\n    } = this.reim(x);\n    const sign_0 = x0 % _2n;\n    const zero_0 = x0 === _0n;\n    const sign_1 = x1 % _2n;\n    return BigInt(sign_0 || zero_0 && sign_1) == _1n;\n  }\n  // Bytes util\n  fromBytes(b) {\n    const {\n      Fp\n    } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    return {\n      c0: Fp.fromBytes(b.subarray(0, Fp.BYTES)),\n      c1: Fp.fromBytes(b.subarray(Fp.BYTES))\n    };\n  }\n  toBytes({\n    c0,\n    c1\n  }) {\n    return concatBytes(this.Fp.toBytes(c0), this.Fp.toBytes(c1));\n  }\n  cmov({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }, c) {\n    return {\n      c0: this.Fp.cmov(c0, r0, c),\n      c1: this.Fp.cmov(c1, r1, c)\n    };\n  }\n  reim({\n    c0,\n    c1\n  }) {\n    return {\n      re: c0,\n      im: c1\n    };\n  }\n  Fp4Square(a, b) {\n    const Fp2 = this;\n    const a2 = Fp2.sqr(a);\n    const b2 = Fp2.sqr(b);\n    return {\n      first: Fp2.add(Fp2.mulByNonresidue(b2), a2),\n      // b² * Nonresidue + a²\n      second: Fp2.sub(Fp2.sub(Fp2.sqr(Fp2.add(a, b)), a2), b2) // (a + b)² - a² - b²\n    };\n  }\n  // multiply by u + 1\n  mulByNonresidue({\n    c0,\n    c1\n  }) {\n    return this.mul({\n      c0,\n      c1\n    }, this.NONRESIDUE);\n  }\n  frobeniusMap({\n    c0,\n    c1\n  }, power) {\n    return {\n      c0,\n      c1: this.Fp.mul(c1, this.FROBENIUS_COEFFICIENTS[power % 2])\n    };\n  }\n}\nclass _Field6 {\n  constructor(Fp2) {\n    this.MASK = _1n;\n    this.Fp2 = Fp2;\n    this.ORDER = Fp2.ORDER; // TODO: unused, but need to verify\n    this.BITS = 3 * Fp2.BITS;\n    this.BYTES = 3 * Fp2.BYTES;\n    this.isLE = Fp2.isLE;\n    this.ZERO = {\n      c0: Fp2.ZERO,\n      c1: Fp2.ZERO,\n      c2: Fp2.ZERO\n    };\n    this.ONE = {\n      c0: Fp2.ONE,\n      c1: Fp2.ZERO,\n      c2: Fp2.ZERO\n    };\n    const {\n      Fp\n    } = Fp2;\n    const frob = calcFrobeniusCoefficients(Fp2, Fp2.NONRESIDUE, Fp.ORDER, 6, 2, 3);\n    this.FROBENIUS_COEFFICIENTS_1 = frob[0];\n    this.FROBENIUS_COEFFICIENTS_2 = frob[1];\n    Object.seal(this);\n  }\n  add({\n    c0,\n    c1,\n    c2\n  }, {\n    c0: r0,\n    c1: r1,\n    c2: r2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.add(c0, r0),\n      c1: Fp2.add(c1, r1),\n      c2: Fp2.add(c2, r2)\n    };\n  }\n  sub({\n    c0,\n    c1,\n    c2\n  }, {\n    c0: r0,\n    c1: r1,\n    c2: r2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.sub(c0, r0),\n      c1: Fp2.sub(c1, r1),\n      c2: Fp2.sub(c2, r2)\n    };\n  }\n  mul({\n    c0,\n    c1,\n    c2\n  }, rhs) {\n    const {\n      Fp2\n    } = this;\n    if (typeof rhs === 'bigint') {\n      return {\n        c0: Fp2.mul(c0, rhs),\n        c1: Fp2.mul(c1, rhs),\n        c2: Fp2.mul(c2, rhs)\n      };\n    }\n    const {\n      c0: r0,\n      c1: r1,\n      c2: r2\n    } = rhs;\n    const t0 = Fp2.mul(c0, r0); // c0 * o0\n    const t1 = Fp2.mul(c1, r1); // c1 * o1\n    const t2 = Fp2.mul(c2, r2); // c2 * o2\n    return {\n      // t0 + (c1 + c2) * (r1 * r2) - (T1 + T2) * (u + 1)\n      c0: Fp2.add(t0, Fp2.mulByNonresidue(Fp2.sub(Fp2.mul(Fp2.add(c1, c2), Fp2.add(r1, r2)), Fp2.add(t1, t2)))),\n      // (c0 + c1) * (r0 + r1) - (T0 + T1) + T2 * (u + 1)\n      c1: Fp2.add(Fp2.sub(Fp2.mul(Fp2.add(c0, c1), Fp2.add(r0, r1)), Fp2.add(t0, t1)), Fp2.mulByNonresidue(t2)),\n      // T1 + (c0 + c2) * (r0 + r2) - T0 + T2\n      c2: Fp2.sub(Fp2.add(t1, Fp2.mul(Fp2.add(c0, c2), Fp2.add(r0, r2))), Fp2.add(t0, t2))\n    };\n  }\n  sqr({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    let t0 = Fp2.sqr(c0); // c0²\n    let t1 = Fp2.mul(Fp2.mul(c0, c1), _2n); // 2 * c0 * c1\n    let t3 = Fp2.mul(Fp2.mul(c1, c2), _2n); // 2 * c1 * c2\n    let t4 = Fp2.sqr(c2); // c2²\n    return {\n      c0: Fp2.add(Fp2.mulByNonresidue(t3), t0),\n      // T3 * (u + 1) + T0\n      c1: Fp2.add(Fp2.mulByNonresidue(t4), t1),\n      // T4 * (u + 1) + T1\n      // T1 + (c0 - c1 + c2)² + T3 - T0 - T4\n      c2: Fp2.sub(Fp2.sub(Fp2.add(Fp2.add(t1, Fp2.sqr(Fp2.add(Fp2.sub(c0, c1), c2))), t3), t0), t4)\n    };\n  }\n  addN(a, b) {\n    return this.add(a, b);\n  }\n  subN(a, b) {\n    return this.sub(a, b);\n  }\n  mulN(a, b) {\n    return this.mul(a, b);\n  }\n  sqrN(a) {\n    return this.sqr(a);\n  }\n  create(num) {\n    return num;\n  }\n  isValid({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return Fp2.isValid(c0) && Fp2.isValid(c1) && Fp2.isValid(c2);\n  }\n  is0({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return Fp2.is0(c0) && Fp2.is0(c1) && Fp2.is0(c2);\n  }\n  isValidNot0(num) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  neg({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.neg(c0),\n      c1: Fp2.neg(c1),\n      c2: Fp2.neg(c2)\n    };\n  }\n  eql({\n    c0,\n    c1,\n    c2\n  }, {\n    c0: r0,\n    c1: r1,\n    c2: r2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return Fp2.eql(c0, r0) && Fp2.eql(c1, r1) && Fp2.eql(c2, r2);\n  }\n  sqrt(_) {\n    return notImplemented();\n  }\n  // Do we need division by bigint at all? Should be done via order:\n  div(lhs, rhs) {\n    const {\n      Fp2\n    } = this;\n    const {\n      Fp\n    } = Fp2;\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  pow(num, power) {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums) {\n    return mod.FpInvertBatch(this, nums);\n  }\n  inv({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    let t0 = Fp2.sub(Fp2.sqr(c0), Fp2.mulByNonresidue(Fp2.mul(c2, c1))); // c0² - c2 * c1 * (u + 1)\n    let t1 = Fp2.sub(Fp2.mulByNonresidue(Fp2.sqr(c2)), Fp2.mul(c0, c1)); // c2² * (u + 1) - c0 * c1\n    let t2 = Fp2.sub(Fp2.sqr(c1), Fp2.mul(c0, c2)); // c1² - c0 * c2\n    // 1/(((c2 * T1 + c1 * T2) * v) + c0 * T0)\n    let t4 = Fp2.inv(Fp2.add(Fp2.mulByNonresidue(Fp2.add(Fp2.mul(c2, t1), Fp2.mul(c1, t2))), Fp2.mul(c0, t0)));\n    return {\n      c0: Fp2.mul(t4, t0),\n      c1: Fp2.mul(t4, t1),\n      c2: Fp2.mul(t4, t2)\n    };\n  }\n  // Bytes utils\n  fromBytes(b) {\n    const {\n      Fp2\n    } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    const B2 = Fp2.BYTES;\n    return {\n      c0: Fp2.fromBytes(b.subarray(0, B2)),\n      c1: Fp2.fromBytes(b.subarray(B2, B2 * 2)),\n      c2: Fp2.fromBytes(b.subarray(2 * B2))\n    };\n  }\n  toBytes({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return concatBytes(Fp2.toBytes(c0), Fp2.toBytes(c1), Fp2.toBytes(c2));\n  }\n  cmov({\n    c0,\n    c1,\n    c2\n  }, {\n    c0: r0,\n    c1: r1,\n    c2: r2\n  }, c) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.cmov(c0, r0, c),\n      c1: Fp2.cmov(c1, r1, c),\n      c2: Fp2.cmov(c2, r2, c)\n    };\n  }\n  fromBigSix(t) {\n    const {\n      Fp2\n    } = this;\n    if (!Array.isArray(t) || t.length !== 6) throw new Error('invalid Fp6 usage');\n    return {\n      c0: Fp2.fromBigTuple(t.slice(0, 2)),\n      c1: Fp2.fromBigTuple(t.slice(2, 4)),\n      c2: Fp2.fromBigTuple(t.slice(4, 6))\n    };\n  }\n  frobeniusMap({\n    c0,\n    c1,\n    c2\n  }, power) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.frobeniusMap(c0, power),\n      c1: Fp2.mul(Fp2.frobeniusMap(c1, power), this.FROBENIUS_COEFFICIENTS_1[power % 6]),\n      c2: Fp2.mul(Fp2.frobeniusMap(c2, power), this.FROBENIUS_COEFFICIENTS_2[power % 6])\n    };\n  }\n  mulByFp2({\n    c0,\n    c1,\n    c2\n  }, rhs) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.mul(c0, rhs),\n      c1: Fp2.mul(c1, rhs),\n      c2: Fp2.mul(c2, rhs)\n    };\n  }\n  mulByNonresidue({\n    c0,\n    c1,\n    c2\n  }) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.mulByNonresidue(c2),\n      c1: c0,\n      c2: c1\n    };\n  }\n  // Sparse multiplication\n  mul1({\n    c0,\n    c1,\n    c2\n  }, b1) {\n    const {\n      Fp2\n    } = this;\n    return {\n      c0: Fp2.mulByNonresidue(Fp2.mul(c2, b1)),\n      c1: Fp2.mul(c0, b1),\n      c2: Fp2.mul(c1, b1)\n    };\n  }\n  // Sparse multiplication\n  mul01({\n    c0,\n    c1,\n    c2\n  }, b0, b1) {\n    const {\n      Fp2\n    } = this;\n    let t0 = Fp2.mul(c0, b0); // c0 * b0\n    let t1 = Fp2.mul(c1, b1); // c1 * b1\n    return {\n      // ((c1 + c2) * b1 - T1) * (u + 1) + T0\n      c0: Fp2.add(Fp2.mulByNonresidue(Fp2.sub(Fp2.mul(Fp2.add(c1, c2), b1), t1)), t0),\n      // (b0 + b1) * (c0 + c1) - T0 - T1\n      c1: Fp2.sub(Fp2.sub(Fp2.mul(Fp2.add(b0, b1), Fp2.add(c0, c1)), t0), t1),\n      // (c0 + c2) * b0 - T0 + T1\n      c2: Fp2.add(Fp2.sub(Fp2.mul(Fp2.add(c0, c2), b0), t0), t1)\n    };\n  }\n}\nclass _Field12 {\n  constructor(Fp6, opts) {\n    this.MASK = _1n;\n    const {\n      Fp2\n    } = Fp6;\n    const {\n      Fp\n    } = Fp2;\n    this.Fp6 = Fp6;\n    this.ORDER = Fp2.ORDER; // TODO: verify if it's unuesd\n    this.BITS = 2 * Fp6.BITS;\n    this.BYTES = 2 * Fp6.BYTES;\n    this.isLE = Fp6.isLE;\n    this.ZERO = {\n      c0: Fp6.ZERO,\n      c1: Fp6.ZERO\n    };\n    this.ONE = {\n      c0: Fp6.ONE,\n      c1: Fp6.ZERO\n    };\n    this.FROBENIUS_COEFFICIENTS = calcFrobeniusCoefficients(Fp2, Fp2.NONRESIDUE, Fp.ORDER, 12, 1, 6)[0];\n    this.X_LEN = opts.X_LEN;\n    this.finalExponentiate = opts.Fp12finalExponentiate;\n  }\n  create(num) {\n    return num;\n  }\n  isValid({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return Fp6.isValid(c0) && Fp6.isValid(c1);\n  }\n  is0({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return Fp6.is0(c0) && Fp6.is0(c1);\n  }\n  isValidNot0(num) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  neg({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.neg(c0),\n      c1: Fp6.neg(c1)\n    };\n  }\n  eql({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return Fp6.eql(c0, r0) && Fp6.eql(c1, r1);\n  }\n  sqrt(_) {\n    notImplemented();\n  }\n  inv({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    let t = Fp6.inv(Fp6.sub(Fp6.sqr(c0), Fp6.mulByNonresidue(Fp6.sqr(c1)))); // 1 / (c0² - c1² * v)\n    return {\n      c0: Fp6.mul(c0, t),\n      c1: Fp6.neg(Fp6.mul(c1, t))\n    }; // ((C0 * T) * T) + (-C1 * T) * w\n  }\n  div(lhs, rhs) {\n    const {\n      Fp6\n    } = this;\n    const {\n      Fp2\n    } = Fp6;\n    const {\n      Fp\n    } = Fp2;\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  pow(num, power) {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums) {\n    return mod.FpInvertBatch(this, nums);\n  }\n  // Normalized\n  add({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.add(c0, r0),\n      c1: Fp6.add(c1, r1)\n    };\n  }\n  sub({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.sub(c0, r0),\n      c1: Fp6.sub(c1, r1)\n    };\n  }\n  mul({\n    c0,\n    c1\n  }, rhs) {\n    const {\n      Fp6\n    } = this;\n    if (typeof rhs === 'bigint') return {\n      c0: Fp6.mul(c0, rhs),\n      c1: Fp6.mul(c1, rhs)\n    };\n    let {\n      c0: r0,\n      c1: r1\n    } = rhs;\n    let t1 = Fp6.mul(c0, r0); // c0 * r0\n    let t2 = Fp6.mul(c1, r1); // c1 * r1\n    return {\n      c0: Fp6.add(t1, Fp6.mulByNonresidue(t2)),\n      // T1 + T2 * v\n      // (c0 + c1) * (r0 + r1) - (T1 + T2)\n      c1: Fp6.sub(Fp6.mul(Fp6.add(c0, c1), Fp6.add(r0, r1)), Fp6.add(t1, t2))\n    };\n  }\n  sqr({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    let ab = Fp6.mul(c0, c1); // c0 * c1\n    return {\n      // (c1 * v + c0) * (c0 + c1) - AB - AB * v\n      c0: Fp6.sub(Fp6.sub(Fp6.mul(Fp6.add(Fp6.mulByNonresidue(c1), c0), Fp6.add(c0, c1)), ab), Fp6.mulByNonresidue(ab)),\n      c1: Fp6.add(ab, ab)\n    }; // AB + AB\n  }\n  // NonNormalized stuff\n  addN(a, b) {\n    return this.add(a, b);\n  }\n  subN(a, b) {\n    return this.sub(a, b);\n  }\n  mulN(a, b) {\n    return this.mul(a, b);\n  }\n  sqrN(a) {\n    return this.sqr(a);\n  }\n  // Bytes utils\n  fromBytes(b) {\n    const {\n      Fp6\n    } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    return {\n      c0: Fp6.fromBytes(b.subarray(0, Fp6.BYTES)),\n      c1: Fp6.fromBytes(b.subarray(Fp6.BYTES))\n    };\n  }\n  toBytes({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    return concatBytes(Fp6.toBytes(c0), Fp6.toBytes(c1));\n  }\n  cmov({\n    c0,\n    c1\n  }, {\n    c0: r0,\n    c1: r1\n  }, c) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.cmov(c0, r0, c),\n      c1: Fp6.cmov(c1, r1, c)\n    };\n  }\n  // Utils\n  // toString() {\n  //   return '' + 'Fp12(' + this.c0 + this.c1 + '* w');\n  // },\n  // fromTuple(c: [Fp6, Fp6]) {\n  //   return new Fp12(...c);\n  // }\n  fromBigTwelve(t) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.fromBigSix(t.slice(0, 6)),\n      c1: Fp6.fromBigSix(t.slice(6, 12))\n    };\n  }\n  // Raises to q**i -th power\n  frobeniusMap(lhs, power) {\n    const {\n      Fp6\n    } = this;\n    const {\n      Fp2\n    } = Fp6;\n    const {\n      c0,\n      c1,\n      c2\n    } = Fp6.frobeniusMap(lhs.c1, power);\n    const coeff = this.FROBENIUS_COEFFICIENTS[power % 12];\n    return {\n      c0: Fp6.frobeniusMap(lhs.c0, power),\n      c1: Fp6.create({\n        c0: Fp2.mul(c0, coeff),\n        c1: Fp2.mul(c1, coeff),\n        c2: Fp2.mul(c2, coeff)\n      })\n    };\n  }\n  mulByFp2({\n    c0,\n    c1\n  }, rhs) {\n    const {\n      Fp6\n    } = this;\n    return {\n      c0: Fp6.mulByFp2(c0, rhs),\n      c1: Fp6.mulByFp2(c1, rhs)\n    };\n  }\n  conjugate({\n    c0,\n    c1\n  }) {\n    return {\n      c0,\n      c1: this.Fp6.neg(c1)\n    };\n  }\n  // Sparse multiplication\n  mul014({\n    c0,\n    c1\n  }, o0, o1, o4) {\n    const {\n      Fp6\n    } = this;\n    const {\n      Fp2\n    } = Fp6;\n    let t0 = Fp6.mul01(c0, o0, o1);\n    let t1 = Fp6.mul1(c1, o4);\n    return {\n      c0: Fp6.add(Fp6.mulByNonresidue(t1), t0),\n      // T1 * v + T0\n      // (c1 + c0) * [o0, o1+o4] - T0 - T1\n      c1: Fp6.sub(Fp6.sub(Fp6.mul01(Fp6.add(c1, c0), o0, Fp2.add(o1, o4)), t0), t1)\n    };\n  }\n  mul034({\n    c0,\n    c1\n  }, o0, o3, o4) {\n    const {\n      Fp6\n    } = this;\n    const {\n      Fp2\n    } = Fp6;\n    const a = Fp6.create({\n      c0: Fp2.mul(c0.c0, o0),\n      c1: Fp2.mul(c0.c1, o0),\n      c2: Fp2.mul(c0.c2, o0)\n    });\n    const b = Fp6.mul01(c1, o3, o4);\n    const e = Fp6.mul01(Fp6.add(c0, c1), Fp2.add(o0, o3), o4);\n    return {\n      c0: Fp6.add(Fp6.mulByNonresidue(b), a),\n      c1: Fp6.sub(e, Fp6.add(a, b))\n    };\n  }\n  // A cyclotomic group is a subgroup of Fp^n defined by\n  //   GΦₙ(p) = {α ∈ Fpⁿ : α^Φₙ(p) = 1}\n  // The result of any pairing is in a cyclotomic subgroup\n  // https://eprint.iacr.org/2009/565.pdf\n  // https://eprint.iacr.org/2010/354.pdf\n  _cyclotomicSquare({\n    c0,\n    c1\n  }) {\n    const {\n      Fp6\n    } = this;\n    const {\n      Fp2\n    } = Fp6;\n    const {\n      c0: c0c0,\n      c1: c0c1,\n      c2: c0c2\n    } = c0;\n    const {\n      c0: c1c0,\n      c1: c1c1,\n      c2: c1c2\n    } = c1;\n    const {\n      first: t3,\n      second: t4\n    } = Fp2.Fp4Square(c0c0, c1c1);\n    const {\n      first: t5,\n      second: t6\n    } = Fp2.Fp4Square(c1c0, c0c2);\n    const {\n      first: t7,\n      second: t8\n    } = Fp2.Fp4Square(c0c1, c1c2);\n    const t9 = Fp2.mulByNonresidue(t8); // T8 * (u + 1)\n    return {\n      c0: Fp6.create({\n        c0: Fp2.add(Fp2.mul(Fp2.sub(t3, c0c0), _2n), t3),\n        // 2 * (T3 - c0c0)  + T3\n        c1: Fp2.add(Fp2.mul(Fp2.sub(t5, c0c1), _2n), t5),\n        // 2 * (T5 - c0c1)  + T5\n        c2: Fp2.add(Fp2.mul(Fp2.sub(t7, c0c2), _2n), t7)\n      }),\n      // 2 * (T7 - c0c2)  + T7\n      c1: Fp6.create({\n        c0: Fp2.add(Fp2.mul(Fp2.add(t9, c1c0), _2n), t9),\n        // 2 * (T9 + c1c0) + T9\n        c1: Fp2.add(Fp2.mul(Fp2.add(t4, c1c1), _2n), t4),\n        // 2 * (T4 + c1c1) + T4\n        c2: Fp2.add(Fp2.mul(Fp2.add(t6, c1c2), _2n), t6)\n      })\n    }; // 2 * (T6 + c1c2) + T6\n  }\n  // https://eprint.iacr.org/2009/565.pdf\n  _cyclotomicExp(num, n) {\n    let z = this.ONE;\n    for (let i = this.X_LEN - 1; i >= 0; i--) {\n      z = this._cyclotomicSquare(z);\n      if (bitGet(n, i)) z = this.mul(z, num);\n    }\n    return z;\n  }\n}\nexport function tower12(opts) {\n  const Fp = mod.Field(opts.ORDER);\n  const Fp2 = new _Field2(Fp, opts);\n  const Fp6 = new _Field6(Fp2);\n  const Fp12 = new _Field12(Fp6, opts);\n  return {\n    Fp,\n    Fp2,\n    Fp6,\n    Fp12\n  };\n}","map":{"version":3,"names":["bitGet","bitLen","concatBytes","notImplemented","mod","_0n","BigInt","_1n","_2n","_3n","calcFrobeniusCoefficients","Fp","nonResidue","modulus","degree","num","divisor","_divisor","undefined","towerModulus","res","i","a","powers","j","qPower","power","push","pow","psiFrobenius","Fp2","base","PSI_X","ORDER","PSI_Y","psi","x","y","x2","mul","frobeniusMap","y2","PSI2_X","PSI2_Y","eql","neg","ONE","Error","psi2","mapAffine","fn","c","P","affine","toAffine","p","fromAffine","G2psi","G2psi2","Fp2fromBigTuple","tuple","length","fps","map","n","create","c0","c1","_Field2","constructor","opts","MASK","FP2_ORDER","BITS","BYTES","Math","ceil","isLE","ZERO","Fp_NONRESIDUE","NONRESIDUE","Fp_div2","div","FP2_NONRESIDUE","FROBENIUS_COEFFICIENTS","mulByB","Fp2mulByB","Object","seal","fromBigTuple","isValid","isValidC","is0","isValidNot0","r0","r1","FpPow","invertBatch","nums","FpInvertBatch","add","f1","f2","sub","rhs","t1","t2","o0","o1","sqr","b","addN","subN","mulN","sqrN","lhs","inv","factor","sqrt","FpLegendre","d","legendre","a0","candidateSqrt","x1","re","re1","im","im1","reim","re2","im2","isOdd","x0","sign_0","zero_0","sign_1","fromBytes","subarray","toBytes","cmov","Fp4Square","a2","b2","first","mulByNonresidue","second","_Field6","c2","frob","FROBENIUS_COEFFICIENTS_1","FROBENIUS_COEFFICIENTS_2","r2","t0","t3","t4","_","B2","fromBigSix","t","Array","isArray","slice","mulByFp2","mul1","b1","mul01","b0","_Field12","Fp6","X_LEN","finalExponentiate","Fp12finalExponentiate","ab","fromBigTwelve","coeff","conjugate","mul014","o4","mul034","o3","e","_cyclotomicSquare","c0c0","c0c1","c0c2","c1c0","c1c1","c1c2","t5","t6","t7","t8","t9","_cyclotomicExp","z","tower12","Field","Fp12"],"sources":["/home/sumedhshete/visitor-counter/frontend/node_modules/ox/node_modules/@noble/curves/src/abstract/tower.ts"],"sourcesContent":["/**\n * Towered extension fields.\n * Rather than implementing a massive 12th-degree extension directly, it is more efficient\n * to build it up from smaller extensions: a tower of extensions.\n *\n * For BLS12-381, the Fp12 field is implemented as a quadratic (degree two) extension,\n * on top of a cubic (degree three) extension, on top of a quadratic extension of Fp.\n *\n * For more info: \"Pairings for beginners\" by Costello, section 7.3.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { bitGet, bitLen, concatBytes, notImplemented } from '../utils.ts';\nimport * as mod from './modular.ts';\nimport type { WeierstrassPoint, WeierstrassPointCons } from './weierstrass.ts';\n\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n\n// Fp₂ over complex plane\nexport type BigintTuple = [bigint, bigint];\nexport type Fp = bigint;\n// Finite extension field over irreducible polynominal.\n// Fp(u) / (u² - β) where β = -1\nexport type Fp2 = { c0: bigint; c1: bigint };\nexport type BigintSix = [bigint, bigint, bigint, bigint, bigint, bigint];\nexport type Fp6 = { c0: Fp2; c1: Fp2; c2: Fp2 };\nexport type Fp12 = { c0: Fp6; c1: Fp6 }; // Fp₁₂ = Fp₆² => Fp₂³, Fp₆(w) / (w² - γ) where γ = v\n// prettier-ignore\nexport type BigintTwelve = [\n  bigint, bigint, bigint, bigint, bigint, bigint,\n  bigint, bigint, bigint, bigint, bigint, bigint\n];\n\nexport type Fp2Bls = mod.IField<Fp2> & {\n  Fp: mod.IField<Fp>;\n  frobeniusMap(num: Fp2, power: number): Fp2;\n  fromBigTuple(num: BigintTuple): Fp2;\n  mulByB: (num: Fp2) => Fp2;\n  mulByNonresidue: (num: Fp2) => Fp2;\n  reim: (num: Fp2) => { re: Fp; im: Fp };\n  Fp4Square: (a: Fp2, b: Fp2) => { first: Fp2; second: Fp2 };\n  NONRESIDUE: Fp2;\n};\n\nexport type Fp6Bls = mod.IField<Fp6> & {\n  Fp2: Fp2Bls;\n  frobeniusMap(num: Fp6, power: number): Fp6;\n  fromBigSix: (tuple: BigintSix) => Fp6;\n  mul1(num: Fp6, b1: Fp2): Fp6;\n  mul01(num: Fp6, b0: Fp2, b1: Fp2): Fp6;\n  mulByFp2(lhs: Fp6, rhs: Fp2): Fp6;\n  mulByNonresidue: (num: Fp6) => Fp6;\n};\n\nexport type Fp12Bls = mod.IField<Fp12> & {\n  Fp6: Fp6Bls;\n  frobeniusMap(num: Fp12, power: number): Fp12;\n  fromBigTwelve: (t: BigintTwelve) => Fp12;\n  mul014(num: Fp12, o0: Fp2, o1: Fp2, o4: Fp2): Fp12;\n  mul034(num: Fp12, o0: Fp2, o3: Fp2, o4: Fp2): Fp12;\n  mulByFp2(lhs: Fp12, rhs: Fp2): Fp12;\n  conjugate(num: Fp12): Fp12;\n  finalExponentiate(num: Fp12): Fp12;\n  _cyclotomicSquare(num: Fp12): Fp12;\n  _cyclotomicExp(num: Fp12, n: bigint): Fp12;\n};\n\nfunction calcFrobeniusCoefficients<T>(\n  Fp: mod.IField<T>,\n  nonResidue: T,\n  modulus: bigint,\n  degree: number,\n  num: number = 1,\n  divisor?: number\n) {\n  const _divisor = BigInt(divisor === undefined ? degree : divisor);\n  const towerModulus: any = modulus ** BigInt(degree);\n  const res: T[][] = [];\n  for (let i = 0; i < num; i++) {\n    const a = BigInt(i + 1);\n    const powers: T[] = [];\n    for (let j = 0, qPower = _1n; j < degree; j++) {\n      const power = ((a * qPower - a) / _divisor) % towerModulus;\n      powers.push(Fp.pow(nonResidue, power));\n      qPower *= modulus;\n    }\n    res.push(powers);\n  }\n  return res;\n}\n\n// This works same at least for bls12-381, bn254 and bls12-377\nexport function psiFrobenius(\n  Fp: mod.IField<Fp>,\n  Fp2: Fp2Bls,\n  base: Fp2\n): {\n  psi: (x: Fp2, y: Fp2) => [Fp2, Fp2];\n  psi2: (x: Fp2, y: Fp2) => [Fp2, Fp2];\n  G2psi: (c: WeierstrassPointCons<Fp2>, P: WeierstrassPoint<Fp2>) => WeierstrassPoint<Fp2>;\n  G2psi2: (c: WeierstrassPointCons<Fp2>, P: WeierstrassPoint<Fp2>) => WeierstrassPoint<Fp2>;\n  PSI_X: Fp2;\n  PSI_Y: Fp2;\n  PSI2_X: Fp2;\n  PSI2_Y: Fp2;\n} {\n  // GLV endomorphism Ψ(P)\n  const PSI_X = Fp2.pow(base, (Fp.ORDER - _1n) / _3n); // u^((p-1)/3)\n  const PSI_Y = Fp2.pow(base, (Fp.ORDER - _1n) / _2n); // u^((p-1)/2)\n  function psi(x: Fp2, y: Fp2): [Fp2, Fp2] {\n    // This x10 faster than previous version in bls12-381\n    const x2 = Fp2.mul(Fp2.frobeniusMap(x, 1), PSI_X);\n    const y2 = Fp2.mul(Fp2.frobeniusMap(y, 1), PSI_Y);\n    return [x2, y2];\n  }\n  // Ψ²(P) endomorphism (psi2(x) = psi(psi(x)))\n  const PSI2_X = Fp2.pow(base, (Fp.ORDER ** _2n - _1n) / _3n); // u^((p^2 - 1)/3)\n  // This equals -1, which causes y to be Fp2.neg(y).\n  // But not sure if there are case when this is not true?\n  const PSI2_Y = Fp2.pow(base, (Fp.ORDER ** _2n - _1n) / _2n); // u^((p^2 - 1)/3)\n  if (!Fp2.eql(PSI2_Y, Fp2.neg(Fp2.ONE))) throw new Error('psiFrobenius: PSI2_Y!==-1');\n  function psi2(x: Fp2, y: Fp2): [Fp2, Fp2] {\n    return [Fp2.mul(x, PSI2_X), Fp2.neg(y)];\n  }\n  // Map points\n  const mapAffine =\n    <T>(fn: (x: T, y: T) => [T, T]) =>\n    (c: WeierstrassPointCons<T>, P: WeierstrassPoint<T>) => {\n      const affine = P.toAffine();\n      const p = fn(affine.x, affine.y);\n      return c.fromAffine({ x: p[0], y: p[1] });\n    };\n  const G2psi = mapAffine(psi);\n  const G2psi2 = mapAffine(psi2);\n  return { psi, psi2, G2psi, G2psi2, PSI_X, PSI_Y, PSI2_X, PSI2_Y };\n}\n\nexport type Tower12Opts = {\n  ORDER: bigint;\n  X_LEN: number;\n  NONRESIDUE?: Fp;\n  FP2_NONRESIDUE: BigintTuple;\n  Fp2sqrt?: (num: Fp2) => Fp2;\n  Fp2mulByB: (num: Fp2) => Fp2;\n  Fp12finalExponentiate: (num: Fp12) => Fp12;\n};\n\nconst Fp2fromBigTuple = (Fp: mod.IField<bigint>, tuple: BigintTuple | bigint[]) => {\n  if (tuple.length !== 2) throw new Error('invalid tuple');\n  const fps = tuple.map((n) => Fp.create(n)) as BigintTuple;\n  return { c0: fps[0], c1: fps[1] };\n};\n\nclass _Field2 implements mod.IField<Fp2> {\n  readonly ORDER: bigint;\n  readonly BITS: number;\n  readonly BYTES: number;\n  readonly isLE: boolean;\n  readonly MASK = _1n;\n\n  readonly ZERO: Fp2;\n  readonly ONE: Fp2;\n  readonly Fp: mod.IField<bigint>;\n\n  readonly NONRESIDUE: Fp2;\n  readonly mulByB: Tower12Opts['Fp2mulByB'];\n  readonly Fp_NONRESIDUE: bigint;\n  readonly Fp_div2: bigint;\n  readonly FROBENIUS_COEFFICIENTS: Fp[];\n\n  constructor(\n    Fp: mod.IField<bigint>,\n    opts: Partial<{\n      NONRESIDUE: bigint;\n      FP2_NONRESIDUE: BigintTuple;\n      Fp2mulByB: Tower12Opts['Fp2mulByB'];\n    }> = {}\n  ) {\n    const ORDER = Fp.ORDER;\n    const FP2_ORDER = ORDER * ORDER;\n    this.Fp = Fp;\n    this.ORDER = FP2_ORDER;\n    this.BITS = bitLen(FP2_ORDER);\n    this.BYTES = Math.ceil(bitLen(FP2_ORDER) / 8);\n    this.isLE = Fp.isLE;\n    this.ZERO = { c0: Fp.ZERO, c1: Fp.ZERO };\n    this.ONE = { c0: Fp.ONE, c1: Fp.ZERO };\n\n    this.Fp_NONRESIDUE = Fp.create(opts.NONRESIDUE || BigInt(-1));\n    this.Fp_div2 = Fp.div(Fp.ONE, _2n); // 1/2\n    this.NONRESIDUE = Fp2fromBigTuple(Fp, opts.FP2_NONRESIDUE!);\n    // const Fp2Nonresidue = Fp2fromBigTuple(opts.FP2_NONRESIDUE);\n    this.FROBENIUS_COEFFICIENTS = calcFrobeniusCoefficients(Fp, this.Fp_NONRESIDUE, Fp.ORDER, 2)[0];\n    this.mulByB = opts.Fp2mulByB!;\n    Object.seal(this);\n  }\n  fromBigTuple(tuple: BigintTuple) {\n    return Fp2fromBigTuple(this.Fp, tuple);\n  }\n  create(num: Fp2) {\n    return num;\n  }\n  isValid({ c0, c1 }: Fp2) {\n    function isValidC(num: bigint, ORDER: bigint) {\n      return typeof num === 'bigint' && _0n <= num && num < ORDER;\n    }\n    return isValidC(c0, this.ORDER) && isValidC(c1, this.ORDER);\n  }\n  is0({ c0, c1 }: Fp2) {\n    return this.Fp.is0(c0) && this.Fp.is0(c1);\n  }\n  isValidNot0(num: Fp2) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  eql({ c0, c1 }: Fp2, { c0: r0, c1: r1 }: Fp2) {\n    return this.Fp.eql(c0, r0) && this.Fp.eql(c1, r1);\n  }\n  neg({ c0, c1 }: Fp2) {\n    return { c0: this.Fp.neg(c0), c1: this.Fp.neg(c1) };\n  }\n  pow(num: Fp2, power: bigint): Fp2 {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums: Fp2[]): Fp2[] {\n    return mod.FpInvertBatch(this, nums);\n  }\n  // Normalized\n  add(f1: Fp2, f2: Fp2): Fp2 {\n    const { c0, c1 } = f1;\n    const { c0: r0, c1: r1 } = f2;\n    return {\n      c0: this.Fp.add(c0, r0),\n      c1: this.Fp.add(c1, r1),\n    };\n  }\n  sub({ c0, c1 }: Fp2, { c0: r0, c1: r1 }: Fp2) {\n    return {\n      c0: this.Fp.sub(c0, r0),\n      c1: this.Fp.sub(c1, r1),\n    };\n  }\n  mul({ c0, c1 }: Fp2, rhs: Fp2) {\n    const { Fp } = this;\n    if (typeof rhs === 'bigint') return { c0: Fp.mul(c0, rhs), c1: Fp.mul(c1, rhs) };\n    // (a+bi)(c+di) = (ac−bd) + (ad+bc)i\n    const { c0: r0, c1: r1 } = rhs;\n    let t1 = Fp.mul(c0, r0); // c0 * o0\n    let t2 = Fp.mul(c1, r1); // c1 * o1\n    // (T1 - T2) + ((c0 + c1) * (r0 + r1) - (T1 + T2))*i\n    const o0 = Fp.sub(t1, t2);\n    const o1 = Fp.sub(Fp.mul(Fp.add(c0, c1), Fp.add(r0, r1)), Fp.add(t1, t2));\n    return { c0: o0, c1: o1 };\n  }\n  sqr({ c0, c1 }: Fp2) {\n    const { Fp } = this;\n    const a = Fp.add(c0, c1);\n    const b = Fp.sub(c0, c1);\n    const c = Fp.add(c0, c0);\n    return { c0: Fp.mul(a, b), c1: Fp.mul(c, c1) };\n  }\n  // NonNormalized stuff\n  addN(a: Fp2, b: Fp2): Fp2 {\n    return this.add(a, b);\n  }\n  subN(a: Fp2, b: Fp2): Fp2 {\n    return this.sub(a, b);\n  }\n  mulN(a: Fp2, b: Fp2): Fp2 {\n    return this.mul(a, b);\n  }\n  sqrN(a: Fp2): Fp2 {\n    return this.sqr(a);\n  }\n  // Why inversion for bigint inside Fp instead of Fp2? it is even used in that context?\n  div(lhs: Fp2, rhs: Fp2): Fp2 {\n    const { Fp } = this;\n    // @ts-ignore\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  inv({ c0: a, c1: b }: Fp2): Fp2 {\n    // We wish to find the multiplicative inverse of a nonzero\n    // element a + bu in Fp2. We leverage an identity\n    //\n    // (a + bu)(a - bu) = a² + b²\n    //\n    // which holds because u² = -1. This can be rewritten as\n    //\n    // (a + bu)(a - bu)/(a² + b²) = 1\n    //\n    // because a² + b² = 0 has no nonzero solutions for (a, b).\n    // This gives that (a - bu)/(a² + b²) is the inverse\n    // of (a + bu). Importantly, this can be computing using\n    // only a single inversion in Fp.\n    const { Fp } = this;\n    const factor = Fp.inv(Fp.create(a * a + b * b));\n    return { c0: Fp.mul(factor, Fp.create(a)), c1: Fp.mul(factor, Fp.create(-b)) };\n  }\n  sqrt(num: Fp2) {\n    // This is generic for all quadratic extensions (Fp2)\n    const { Fp } = this;\n    const Fp2 = this;\n    const { c0, c1 } = num;\n    if (Fp.is0(c1)) {\n      // if c0 is quadratic residue\n      if (mod.FpLegendre(Fp, c0) === 1) return Fp2.create({ c0: Fp.sqrt(c0), c1: Fp.ZERO });\n      else return Fp2.create({ c0: Fp.ZERO, c1: Fp.sqrt(Fp.div(c0, this.Fp_NONRESIDUE)) });\n    }\n    const a = Fp.sqrt(Fp.sub(Fp.sqr(c0), Fp.mul(Fp.sqr(c1), this.Fp_NONRESIDUE)));\n    let d = Fp.mul(Fp.add(a, c0), this.Fp_div2);\n    const legendre = mod.FpLegendre(Fp, d);\n    // -1, Quadratic non residue\n    if (legendre === -1) d = Fp.sub(d, a);\n    const a0 = Fp.sqrt(d);\n    const candidateSqrt = Fp2.create({ c0: a0, c1: Fp.div(Fp.mul(c1, this.Fp_div2), a0) });\n    if (!Fp2.eql(Fp2.sqr(candidateSqrt), num)) throw new Error('Cannot find square root');\n    // Normalize root: at this point candidateSqrt ** 2 = num, but also -candidateSqrt ** 2 = num\n    const x1 = candidateSqrt;\n    const x2 = Fp2.neg(x1);\n    const { re: re1, im: im1 } = Fp2.reim(x1);\n    const { re: re2, im: im2 } = Fp2.reim(x2);\n    if (im1 > im2 || (im1 === im2 && re1 > re2)) return x1;\n    return x2;\n  }\n  // Same as sgn0_m_eq_2 in RFC 9380\n  isOdd(x: Fp2) {\n    const { re: x0, im: x1 } = this.reim(x);\n    const sign_0 = x0 % _2n;\n    const zero_0 = x0 === _0n;\n    const sign_1 = x1 % _2n;\n    return BigInt(sign_0 || (zero_0 && sign_1)) == _1n;\n  }\n  // Bytes util\n  fromBytes(b: Uint8Array): Fp2 {\n    const { Fp } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    return { c0: Fp.fromBytes(b.subarray(0, Fp.BYTES)), c1: Fp.fromBytes(b.subarray(Fp.BYTES)) };\n  }\n  toBytes({ c0, c1 }: Fp2) {\n    return concatBytes(this.Fp.toBytes(c0), this.Fp.toBytes(c1));\n  }\n  cmov({ c0, c1 }: Fp2, { c0: r0, c1: r1 }: Fp2, c: boolean) {\n    return {\n      c0: this.Fp.cmov(c0, r0, c),\n      c1: this.Fp.cmov(c1, r1, c),\n    };\n  }\n  reim({ c0, c1 }: Fp2) {\n    return { re: c0, im: c1 };\n  }\n  Fp4Square(a: Fp2, b: Fp2): { first: Fp2; second: Fp2 } {\n    const Fp2 = this;\n    const a2 = Fp2.sqr(a);\n    const b2 = Fp2.sqr(b);\n    return {\n      first: Fp2.add(Fp2.mulByNonresidue(b2), a2), // b² * Nonresidue + a²\n      second: Fp2.sub(Fp2.sub(Fp2.sqr(Fp2.add(a, b)), a2), b2), // (a + b)² - a² - b²\n    };\n  }\n  // multiply by u + 1\n  mulByNonresidue({ c0, c1 }: Fp2) {\n    return this.mul({ c0, c1 }, this.NONRESIDUE);\n  }\n  frobeniusMap({ c0, c1 }: Fp2, power: number): Fp2 {\n    return {\n      c0,\n      c1: this.Fp.mul(c1, this.FROBENIUS_COEFFICIENTS[power % 2]),\n    };\n  }\n}\n\nclass _Field6 implements Fp6Bls {\n  readonly ORDER: bigint;\n  readonly BITS: number;\n  readonly BYTES: number;\n  readonly isLE: boolean;\n  readonly MASK = _1n;\n\n  readonly ZERO: Fp6;\n  readonly ONE: Fp6;\n  readonly Fp2: Fp2Bls;\n  readonly FROBENIUS_COEFFICIENTS_1: Fp2[];\n  readonly FROBENIUS_COEFFICIENTS_2: Fp2[];\n\n  constructor(Fp2: Fp2Bls) {\n    this.Fp2 = Fp2;\n    this.ORDER = Fp2.ORDER; // TODO: unused, but need to verify\n    this.BITS = 3 * Fp2.BITS;\n    this.BYTES = 3 * Fp2.BYTES;\n    this.isLE = Fp2.isLE;\n    this.ZERO = { c0: Fp2.ZERO, c1: Fp2.ZERO, c2: Fp2.ZERO };\n    this.ONE = { c0: Fp2.ONE, c1: Fp2.ZERO, c2: Fp2.ZERO };\n    const { Fp } = Fp2;\n    const frob = calcFrobeniusCoefficients(Fp2, Fp2.NONRESIDUE, Fp.ORDER, 6, 2, 3);\n    this.FROBENIUS_COEFFICIENTS_1 = frob[0];\n    this.FROBENIUS_COEFFICIENTS_2 = frob[1];\n    Object.seal(this);\n  }\n  add({ c0, c1, c2 }: Fp6, { c0: r0, c1: r1, c2: r2 }: Fp6) {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.add(c0, r0),\n      c1: Fp2.add(c1, r1),\n      c2: Fp2.add(c2, r2),\n    };\n  }\n  sub({ c0, c1, c2 }: Fp6, { c0: r0, c1: r1, c2: r2 }: Fp6) {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.sub(c0, r0),\n      c1: Fp2.sub(c1, r1),\n      c2: Fp2.sub(c2, r2),\n    };\n  }\n  mul({ c0, c1, c2 }: Fp6, rhs: Fp6 | bigint) {\n    const { Fp2 } = this;\n    if (typeof rhs === 'bigint') {\n      return {\n        c0: Fp2.mul(c0, rhs),\n        c1: Fp2.mul(c1, rhs),\n        c2: Fp2.mul(c2, rhs),\n      };\n    }\n    const { c0: r0, c1: r1, c2: r2 } = rhs;\n    const t0 = Fp2.mul(c0, r0); // c0 * o0\n    const t1 = Fp2.mul(c1, r1); // c1 * o1\n    const t2 = Fp2.mul(c2, r2); // c2 * o2\n    return {\n      // t0 + (c1 + c2) * (r1 * r2) - (T1 + T2) * (u + 1)\n      c0: Fp2.add(\n        t0,\n        Fp2.mulByNonresidue(Fp2.sub(Fp2.mul(Fp2.add(c1, c2), Fp2.add(r1, r2)), Fp2.add(t1, t2)))\n      ),\n      // (c0 + c1) * (r0 + r1) - (T0 + T1) + T2 * (u + 1)\n      c1: Fp2.add(\n        Fp2.sub(Fp2.mul(Fp2.add(c0, c1), Fp2.add(r0, r1)), Fp2.add(t0, t1)),\n        Fp2.mulByNonresidue(t2)\n      ),\n      // T1 + (c0 + c2) * (r0 + r2) - T0 + T2\n      c2: Fp2.sub(Fp2.add(t1, Fp2.mul(Fp2.add(c0, c2), Fp2.add(r0, r2))), Fp2.add(t0, t2)),\n    };\n  }\n  sqr({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    let t0 = Fp2.sqr(c0); // c0²\n    let t1 = Fp2.mul(Fp2.mul(c0, c1), _2n); // 2 * c0 * c1\n    let t3 = Fp2.mul(Fp2.mul(c1, c2), _2n); // 2 * c1 * c2\n    let t4 = Fp2.sqr(c2); // c2²\n    return {\n      c0: Fp2.add(Fp2.mulByNonresidue(t3), t0), // T3 * (u + 1) + T0\n      c1: Fp2.add(Fp2.mulByNonresidue(t4), t1), // T4 * (u + 1) + T1\n      // T1 + (c0 - c1 + c2)² + T3 - T0 - T4\n      c2: Fp2.sub(Fp2.sub(Fp2.add(Fp2.add(t1, Fp2.sqr(Fp2.add(Fp2.sub(c0, c1), c2))), t3), t0), t4),\n    };\n  }\n  addN(a: Fp6, b: Fp6): Fp6 {\n    return this.add(a, b);\n  }\n  subN(a: Fp6, b: Fp6): Fp6 {\n    return this.sub(a, b);\n  }\n  mulN(a: Fp6, b: Fp6): Fp6 {\n    return this.mul(a, b);\n  }\n  sqrN(a: Fp6): Fp6 {\n    return this.sqr(a);\n  }\n\n  create(num: Fp6) {\n    return num;\n  }\n\n  isValid({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    return Fp2.isValid(c0) && Fp2.isValid(c1) && Fp2.isValid(c2);\n  }\n  is0({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    return Fp2.is0(c0) && Fp2.is0(c1) && Fp2.is0(c2);\n  }\n  isValidNot0(num: Fp6) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  neg({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    return { c0: Fp2.neg(c0), c1: Fp2.neg(c1), c2: Fp2.neg(c2) };\n  }\n  eql({ c0, c1, c2 }: Fp6, { c0: r0, c1: r1, c2: r2 }: Fp6) {\n    const { Fp2 } = this;\n    return Fp2.eql(c0, r0) && Fp2.eql(c1, r1) && Fp2.eql(c2, r2);\n  }\n  sqrt(_: Fp6) {\n    return notImplemented();\n  }\n  // Do we need division by bigint at all? Should be done via order:\n  div(lhs: Fp6, rhs: Fp6) {\n    const { Fp2 } = this;\n    const { Fp } = Fp2;\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  pow(num: Fp6, power: Fp): Fp6 {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums: Fp6[]): Fp6[] {\n    return mod.FpInvertBatch(this, nums);\n  }\n\n  inv({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    let t0 = Fp2.sub(Fp2.sqr(c0), Fp2.mulByNonresidue(Fp2.mul(c2, c1))); // c0² - c2 * c1 * (u + 1)\n    let t1 = Fp2.sub(Fp2.mulByNonresidue(Fp2.sqr(c2)), Fp2.mul(c0, c1)); // c2² * (u + 1) - c0 * c1\n    let t2 = Fp2.sub(Fp2.sqr(c1), Fp2.mul(c0, c2)); // c1² - c0 * c2\n    // 1/(((c2 * T1 + c1 * T2) * v) + c0 * T0)\n    let t4 = Fp2.inv(\n      Fp2.add(Fp2.mulByNonresidue(Fp2.add(Fp2.mul(c2, t1), Fp2.mul(c1, t2))), Fp2.mul(c0, t0))\n    );\n    return { c0: Fp2.mul(t4, t0), c1: Fp2.mul(t4, t1), c2: Fp2.mul(t4, t2) };\n  }\n  // Bytes utils\n  fromBytes(b: Uint8Array): Fp6 {\n    const { Fp2 } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    const B2 = Fp2.BYTES;\n    return {\n      c0: Fp2.fromBytes(b.subarray(0, B2)),\n      c1: Fp2.fromBytes(b.subarray(B2, B2 * 2)),\n      c2: Fp2.fromBytes(b.subarray(2 * B2)),\n    };\n  }\n  toBytes({ c0, c1, c2 }: Fp6): Uint8Array {\n    const { Fp2 } = this;\n    return concatBytes(Fp2.toBytes(c0), Fp2.toBytes(c1), Fp2.toBytes(c2));\n  }\n  cmov({ c0, c1, c2 }: Fp6, { c0: r0, c1: r1, c2: r2 }: Fp6, c: boolean) {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.cmov(c0, r0, c),\n      c1: Fp2.cmov(c1, r1, c),\n      c2: Fp2.cmov(c2, r2, c),\n    };\n  }\n  fromBigSix(t: BigintSix): Fp6 {\n    const { Fp2 } = this;\n    if (!Array.isArray(t) || t.length !== 6) throw new Error('invalid Fp6 usage');\n    return {\n      c0: Fp2.fromBigTuple(t.slice(0, 2) as BigintTuple),\n      c1: Fp2.fromBigTuple(t.slice(2, 4) as BigintTuple),\n      c2: Fp2.fromBigTuple(t.slice(4, 6) as BigintTuple),\n    };\n  }\n  frobeniusMap({ c0, c1, c2 }: Fp6, power: number) {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.frobeniusMap(c0, power),\n      c1: Fp2.mul(Fp2.frobeniusMap(c1, power), this.FROBENIUS_COEFFICIENTS_1[power % 6]),\n      c2: Fp2.mul(Fp2.frobeniusMap(c2, power), this.FROBENIUS_COEFFICIENTS_2[power % 6]),\n    };\n  }\n  mulByFp2({ c0, c1, c2 }: Fp6, rhs: Fp2): Fp6 {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.mul(c0, rhs),\n      c1: Fp2.mul(c1, rhs),\n      c2: Fp2.mul(c2, rhs),\n    };\n  }\n  mulByNonresidue({ c0, c1, c2 }: Fp6) {\n    const { Fp2 } = this;\n    return { c0: Fp2.mulByNonresidue(c2), c1: c0, c2: c1 };\n  }\n  // Sparse multiplication\n  mul1({ c0, c1, c2 }: Fp6, b1: Fp2): Fp6 {\n    const { Fp2 } = this;\n    return {\n      c0: Fp2.mulByNonresidue(Fp2.mul(c2, b1)),\n      c1: Fp2.mul(c0, b1),\n      c2: Fp2.mul(c1, b1),\n    };\n  }\n  // Sparse multiplication\n  mul01({ c0, c1, c2 }: Fp6, b0: Fp2, b1: Fp2): Fp6 {\n    const { Fp2 } = this;\n    let t0 = Fp2.mul(c0, b0); // c0 * b0\n    let t1 = Fp2.mul(c1, b1); // c1 * b1\n    return {\n      // ((c1 + c2) * b1 - T1) * (u + 1) + T0\n      c0: Fp2.add(Fp2.mulByNonresidue(Fp2.sub(Fp2.mul(Fp2.add(c1, c2), b1), t1)), t0),\n      // (b0 + b1) * (c0 + c1) - T0 - T1\n      c1: Fp2.sub(Fp2.sub(Fp2.mul(Fp2.add(b0, b1), Fp2.add(c0, c1)), t0), t1),\n      // (c0 + c2) * b0 - T0 + T1\n      c2: Fp2.add(Fp2.sub(Fp2.mul(Fp2.add(c0, c2), b0), t0), t1),\n    };\n  }\n}\n\nclass _Field12 implements Fp12Bls {\n  readonly ORDER: bigint;\n  readonly BITS: number;\n  readonly BYTES: number;\n  readonly isLE: boolean;\n  readonly MASK = _1n;\n\n  readonly ZERO: Fp12;\n  readonly ONE: Fp12;\n\n  readonly Fp6: Fp6Bls;\n  readonly FROBENIUS_COEFFICIENTS: Fp2[];\n  readonly X_LEN: number;\n  readonly finalExponentiate: Tower12Opts['Fp12finalExponentiate'];\n\n  constructor(Fp6: Fp6Bls, opts: Tower12Opts) {\n    const { Fp2 } = Fp6;\n    const { Fp } = Fp2;\n    this.Fp6 = Fp6;\n\n    this.ORDER = Fp2.ORDER; // TODO: verify if it's unuesd\n    this.BITS = 2 * Fp6.BITS;\n    this.BYTES = 2 * Fp6.BYTES;\n    this.isLE = Fp6.isLE;\n    this.ZERO = { c0: Fp6.ZERO, c1: Fp6.ZERO };\n    this.ONE = { c0: Fp6.ONE, c1: Fp6.ZERO };\n\n    this.FROBENIUS_COEFFICIENTS = calcFrobeniusCoefficients(\n      Fp2,\n      Fp2.NONRESIDUE,\n      Fp.ORDER,\n      12,\n      1,\n      6\n    )[0];\n    this.X_LEN = opts.X_LEN;\n    this.finalExponentiate = opts.Fp12finalExponentiate;\n  }\n  create(num: Fp12) {\n    return num;\n  }\n  isValid({ c0, c1 }: Fp12) {\n    const { Fp6 } = this;\n    return Fp6.isValid(c0) && Fp6.isValid(c1);\n  }\n  is0({ c0, c1 }: Fp12) {\n    const { Fp6 } = this;\n    return Fp6.is0(c0) && Fp6.is0(c1);\n  }\n  isValidNot0(num: Fp12) {\n    return !this.is0(num) && this.isValid(num);\n  }\n  neg({ c0, c1 }: Fp12) {\n    const { Fp6 } = this;\n    return { c0: Fp6.neg(c0), c1: Fp6.neg(c1) };\n  }\n  eql({ c0, c1 }: Fp12, { c0: r0, c1: r1 }: Fp12) {\n    const { Fp6 } = this;\n    return Fp6.eql(c0, r0) && Fp6.eql(c1, r1);\n  }\n  sqrt(_: any): any {\n    notImplemented();\n  }\n  inv({ c0, c1 }: Fp12) {\n    const { Fp6 } = this;\n    let t = Fp6.inv(Fp6.sub(Fp6.sqr(c0), Fp6.mulByNonresidue(Fp6.sqr(c1)))); // 1 / (c0² - c1² * v)\n    return { c0: Fp6.mul(c0, t), c1: Fp6.neg(Fp6.mul(c1, t)) }; // ((C0 * T) * T) + (-C1 * T) * w\n  }\n  div(lhs: Fp12, rhs: Fp12) {\n    const { Fp6 } = this;\n    const { Fp2 } = Fp6;\n    const { Fp } = Fp2;\n    return this.mul(lhs, typeof rhs === 'bigint' ? Fp.inv(Fp.create(rhs)) : this.inv(rhs));\n  }\n  pow(num: Fp12, power: bigint): Fp12 {\n    return mod.FpPow(this, num, power);\n  }\n  invertBatch(nums: Fp12[]): Fp12[] {\n    return mod.FpInvertBatch(this, nums);\n  }\n\n  // Normalized\n  add({ c0, c1 }: Fp12, { c0: r0, c1: r1 }: Fp12) {\n    const { Fp6 } = this;\n    return {\n      c0: Fp6.add(c0, r0),\n      c1: Fp6.add(c1, r1),\n    };\n  }\n  sub({ c0, c1 }: Fp12, { c0: r0, c1: r1 }: Fp12) {\n    const { Fp6 } = this;\n    return {\n      c0: Fp6.sub(c0, r0),\n      c1: Fp6.sub(c1, r1),\n    };\n  }\n  mul({ c0, c1 }: Fp12, rhs: Fp12 | bigint) {\n    const { Fp6 } = this;\n    if (typeof rhs === 'bigint') return { c0: Fp6.mul(c0, rhs), c1: Fp6.mul(c1, rhs) };\n    let { c0: r0, c1: r1 } = rhs;\n    let t1 = Fp6.mul(c0, r0); // c0 * r0\n    let t2 = Fp6.mul(c1, r1); // c1 * r1\n    return {\n      c0: Fp6.add(t1, Fp6.mulByNonresidue(t2)), // T1 + T2 * v\n      // (c0 + c1) * (r0 + r1) - (T1 + T2)\n      c1: Fp6.sub(Fp6.mul(Fp6.add(c0, c1), Fp6.add(r0, r1)), Fp6.add(t1, t2)),\n    };\n  }\n  sqr({ c0, c1 }: Fp12) {\n    const { Fp6 } = this;\n    let ab = Fp6.mul(c0, c1); // c0 * c1\n    return {\n      // (c1 * v + c0) * (c0 + c1) - AB - AB * v\n      c0: Fp6.sub(\n        Fp6.sub(Fp6.mul(Fp6.add(Fp6.mulByNonresidue(c1), c0), Fp6.add(c0, c1)), ab),\n        Fp6.mulByNonresidue(ab)\n      ),\n      c1: Fp6.add(ab, ab),\n    }; // AB + AB\n  }\n  // NonNormalized stuff\n  addN(a: Fp12, b: Fp12): Fp12 {\n    return this.add(a, b);\n  }\n  subN(a: Fp12, b: Fp12): Fp12 {\n    return this.sub(a, b);\n  }\n  mulN(a: Fp12, b: Fp12): Fp12 {\n    return this.mul(a, b);\n  }\n  sqrN(a: Fp12): Fp12 {\n    return this.sqr(a);\n  }\n\n  // Bytes utils\n  fromBytes(b: Uint8Array): Fp12 {\n    const { Fp6 } = this;\n    if (b.length !== this.BYTES) throw new Error('fromBytes invalid length=' + b.length);\n    return {\n      c0: Fp6.fromBytes(b.subarray(0, Fp6.BYTES)),\n      c1: Fp6.fromBytes(b.subarray(Fp6.BYTES)),\n    };\n  }\n  toBytes({ c0, c1 }: Fp12): Uint8Array {\n    const { Fp6 } = this;\n    return concatBytes(Fp6.toBytes(c0), Fp6.toBytes(c1));\n  }\n  cmov({ c0, c1 }: Fp12, { c0: r0, c1: r1 }: Fp12, c: boolean) {\n    const { Fp6 } = this;\n    return {\n      c0: Fp6.cmov(c0, r0, c),\n      c1: Fp6.cmov(c1, r1, c),\n    };\n  }\n  // Utils\n  // toString() {\n  //   return '' + 'Fp12(' + this.c0 + this.c1 + '* w');\n  // },\n  // fromTuple(c: [Fp6, Fp6]) {\n  //   return new Fp12(...c);\n  // }\n  fromBigTwelve(t: BigintTwelve): Fp12 {\n    const { Fp6 } = this;\n    return {\n      c0: Fp6.fromBigSix(t.slice(0, 6) as BigintSix),\n      c1: Fp6.fromBigSix(t.slice(6, 12) as BigintSix),\n    };\n  }\n  // Raises to q**i -th power\n  frobeniusMap(lhs: Fp12, power: number) {\n    const { Fp6 } = this;\n    const { Fp2 } = Fp6;\n    const { c0, c1, c2 } = Fp6.frobeniusMap(lhs.c1, power);\n    const coeff = this.FROBENIUS_COEFFICIENTS[power % 12];\n    return {\n      c0: Fp6.frobeniusMap(lhs.c0, power),\n      c1: Fp6.create({\n        c0: Fp2.mul(c0, coeff),\n        c1: Fp2.mul(c1, coeff),\n        c2: Fp2.mul(c2, coeff),\n      }),\n    };\n  }\n  mulByFp2({ c0, c1 }: Fp12, rhs: Fp2): Fp12 {\n    const { Fp6 } = this;\n    return {\n      c0: Fp6.mulByFp2(c0, rhs),\n      c1: Fp6.mulByFp2(c1, rhs),\n    };\n  }\n  conjugate({ c0, c1 }: Fp12): Fp12 {\n    return { c0, c1: this.Fp6.neg(c1) };\n  }\n  // Sparse multiplication\n  mul014({ c0, c1 }: Fp12, o0: Fp2, o1: Fp2, o4: Fp2) {\n    const { Fp6 } = this;\n    const { Fp2 } = Fp6;\n    let t0 = Fp6.mul01(c0, o0, o1);\n    let t1 = Fp6.mul1(c1, o4);\n    return {\n      c0: Fp6.add(Fp6.mulByNonresidue(t1), t0), // T1 * v + T0\n      // (c1 + c0) * [o0, o1+o4] - T0 - T1\n      c1: Fp6.sub(Fp6.sub(Fp6.mul01(Fp6.add(c1, c0), o0, Fp2.add(o1, o4)), t0), t1),\n    };\n  }\n  mul034({ c0, c1 }: Fp12, o0: Fp2, o3: Fp2, o4: Fp2) {\n    const { Fp6 } = this;\n    const { Fp2 } = Fp6;\n    const a = Fp6.create({\n      c0: Fp2.mul(c0.c0, o0),\n      c1: Fp2.mul(c0.c1, o0),\n      c2: Fp2.mul(c0.c2, o0),\n    });\n    const b = Fp6.mul01(c1, o3, o4);\n    const e = Fp6.mul01(Fp6.add(c0, c1), Fp2.add(o0, o3), o4);\n    return {\n      c0: Fp6.add(Fp6.mulByNonresidue(b), a),\n      c1: Fp6.sub(e, Fp6.add(a, b)),\n    };\n  }\n\n  // A cyclotomic group is a subgroup of Fp^n defined by\n  //   GΦₙ(p) = {α ∈ Fpⁿ : α^Φₙ(p) = 1}\n  // The result of any pairing is in a cyclotomic subgroup\n  // https://eprint.iacr.org/2009/565.pdf\n  // https://eprint.iacr.org/2010/354.pdf\n  _cyclotomicSquare({ c0, c1 }: Fp12): Fp12 {\n    const { Fp6 } = this;\n    const { Fp2 } = Fp6;\n    const { c0: c0c0, c1: c0c1, c2: c0c2 } = c0;\n    const { c0: c1c0, c1: c1c1, c2: c1c2 } = c1;\n    const { first: t3, second: t4 } = Fp2.Fp4Square(c0c0, c1c1);\n    const { first: t5, second: t6 } = Fp2.Fp4Square(c1c0, c0c2);\n    const { first: t7, second: t8 } = Fp2.Fp4Square(c0c1, c1c2);\n    const t9 = Fp2.mulByNonresidue(t8); // T8 * (u + 1)\n    return {\n      c0: Fp6.create({\n        c0: Fp2.add(Fp2.mul(Fp2.sub(t3, c0c0), _2n), t3), // 2 * (T3 - c0c0)  + T3\n        c1: Fp2.add(Fp2.mul(Fp2.sub(t5, c0c1), _2n), t5), // 2 * (T5 - c0c1)  + T5\n        c2: Fp2.add(Fp2.mul(Fp2.sub(t7, c0c2), _2n), t7),\n      }), // 2 * (T7 - c0c2)  + T7\n      c1: Fp6.create({\n        c0: Fp2.add(Fp2.mul(Fp2.add(t9, c1c0), _2n), t9), // 2 * (T9 + c1c0) + T9\n        c1: Fp2.add(Fp2.mul(Fp2.add(t4, c1c1), _2n), t4), // 2 * (T4 + c1c1) + T4\n        c2: Fp2.add(Fp2.mul(Fp2.add(t6, c1c2), _2n), t6),\n      }),\n    }; // 2 * (T6 + c1c2) + T6\n  }\n  // https://eprint.iacr.org/2009/565.pdf\n  _cyclotomicExp(num: Fp12, n: bigint): Fp12 {\n    let z = this.ONE;\n    for (let i = this.X_LEN - 1; i >= 0; i--) {\n      z = this._cyclotomicSquare(z);\n      if (bitGet(n, i)) z = this.mul(z, num);\n    }\n    return z;\n  }\n}\n\nexport function tower12(opts: Tower12Opts): {\n  Fp: Readonly<mod.IField<bigint> & Required<Pick<mod.IField<bigint>, 'isOdd'>>>;\n  Fp2: Fp2Bls;\n  Fp6: Fp6Bls;\n  Fp12: Fp12Bls;\n} {\n  const Fp = mod.Field(opts.ORDER);\n  const Fp2 = new _Field2(Fp, opts);\n  const Fp6 = new _Field6(Fp2);\n  const Fp12 = new _Field12(Fp6, opts);\n  return { Fp, Fp2, Fp6, Fp12 };\n}\n"],"mappings":"AAAA;;;;;;;;;;;AAWA;AACA,SAASA,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAEC,cAAc,QAAQ,aAAa;AACzE,OAAO,KAAKC,GAAG,MAAM,cAAc;AAGnC;AACA;AACA,MAAMC,GAAG,GAAGC,MAAM,CAAC,CAAC,CAAC;EAAEC,GAAG,GAAGD,MAAM,CAAC,CAAC,CAAC;EAAEE,GAAG,GAAGF,MAAM,CAAC,CAAC,CAAC;EAAEG,GAAG,GAAGH,MAAM,CAAC,CAAC,CAAC;AAmDxE,SAASI,yBAAyBA,CAChCC,EAAiB,EACjBC,UAAa,EACbC,OAAe,EACfC,MAAc,EACdC,GAAA,GAAc,CAAC,EACfC,OAAgB;EAEhB,MAAMC,QAAQ,GAAGX,MAAM,CAACU,OAAO,KAAKE,SAAS,GAAGJ,MAAM,GAAGE,OAAO,CAAC;EACjE,MAAMG,YAAY,GAAQN,OAAO,IAAIP,MAAM,CAACQ,MAAM,CAAC;EACnD,MAAMM,GAAG,GAAU,EAAE;EACrB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,GAAG,EAAEM,CAAC,EAAE,EAAE;IAC5B,MAAMC,CAAC,GAAGhB,MAAM,CAACe,CAAC,GAAG,CAAC,CAAC;IACvB,MAAME,MAAM,GAAQ,EAAE;IACtB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,MAAM,GAAGlB,GAAG,EAAEiB,CAAC,GAAGV,MAAM,EAAEU,CAAC,EAAE,EAAE;MAC7C,MAAME,KAAK,GAAI,CAACJ,CAAC,GAAGG,MAAM,GAAGH,CAAC,IAAIL,QAAQ,GAAIE,YAAY;MAC1DI,MAAM,CAACI,IAAI,CAAChB,EAAE,CAACiB,GAAG,CAAChB,UAAU,EAAEc,KAAK,CAAC,CAAC;MACtCD,MAAM,IAAIZ,OAAO;IACnB;IACAO,GAAG,CAACO,IAAI,CAACJ,MAAM,CAAC;EAClB;EACA,OAAOH,GAAG;AACZ;AAEA;AACA,OAAM,SAAUS,YAAYA,CAC1BlB,EAAkB,EAClBmB,GAAW,EACXC,IAAS;EAWT;EACA,MAAMC,KAAK,GAAGF,GAAG,CAACF,GAAG,CAACG,IAAI,EAAE,CAACpB,EAAE,CAACsB,KAAK,GAAG1B,GAAG,IAAIE,GAAG,CAAC,CAAC,CAAC;EACrD,MAAMyB,KAAK,GAAGJ,GAAG,CAACF,GAAG,CAACG,IAAI,EAAE,CAACpB,EAAE,CAACsB,KAAK,GAAG1B,GAAG,IAAIC,GAAG,CAAC,CAAC,CAAC;EACrD,SAAS2B,GAAGA,CAACC,CAAM,EAAEC,CAAM;IACzB;IACA,MAAMC,EAAE,GAAGR,GAAG,CAACS,GAAG,CAACT,GAAG,CAACU,YAAY,CAACJ,CAAC,EAAE,CAAC,CAAC,EAAEJ,KAAK,CAAC;IACjD,MAAMS,EAAE,GAAGX,GAAG,CAACS,GAAG,CAACT,GAAG,CAACU,YAAY,CAACH,CAAC,EAAE,CAAC,CAAC,EAAEH,KAAK,CAAC;IACjD,OAAO,CAACI,EAAE,EAAEG,EAAE,CAAC;EACjB;EACA;EACA,MAAMC,MAAM,GAAGZ,GAAG,CAACF,GAAG,CAACG,IAAI,EAAE,CAACpB,EAAE,CAACsB,KAAK,IAAIzB,GAAG,GAAGD,GAAG,IAAIE,GAAG,CAAC,CAAC,CAAC;EAC7D;EACA;EACA,MAAMkC,MAAM,GAAGb,GAAG,CAACF,GAAG,CAACG,IAAI,EAAE,CAACpB,EAAE,CAACsB,KAAK,IAAIzB,GAAG,GAAGD,GAAG,IAAIC,GAAG,CAAC,CAAC,CAAC;EAC7D,IAAI,CAACsB,GAAG,CAACc,GAAG,CAACD,MAAM,EAAEb,GAAG,CAACe,GAAG,CAACf,GAAG,CAACgB,GAAG,CAAC,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EACpF,SAASC,IAAIA,CAACZ,CAAM,EAAEC,CAAM;IAC1B,OAAO,CAACP,GAAG,CAACS,GAAG,CAACH,CAAC,EAAEM,MAAM,CAAC,EAAEZ,GAAG,CAACe,GAAG,CAACR,CAAC,CAAC,CAAC;EACzC;EACA;EACA,MAAMY,SAAS,GACTC,EAA0B,IAC9B,CAACC,CAA0B,EAAEC,CAAsB,KAAI;IACrD,MAAMC,MAAM,GAAGD,CAAC,CAACE,QAAQ,EAAE;IAC3B,MAAMC,CAAC,GAAGL,EAAE,CAACG,MAAM,CAACjB,CAAC,EAAEiB,MAAM,CAAChB,CAAC,CAAC;IAChC,OAAOc,CAAC,CAACK,UAAU,CAAC;MAAEpB,CAAC,EAAEmB,CAAC,CAAC,CAAC,CAAC;MAAElB,CAAC,EAAEkB,CAAC,CAAC,CAAC;IAAC,CAAE,CAAC;EAC3C,CAAC;EACH,MAAME,KAAK,GAAGR,SAAS,CAACd,GAAG,CAAC;EAC5B,MAAMuB,MAAM,GAAGT,SAAS,CAACD,IAAI,CAAC;EAC9B,OAAO;IAAEb,GAAG;IAAEa,IAAI;IAAES,KAAK;IAAEC,MAAM;IAAE1B,KAAK;IAAEE,KAAK;IAAEQ,MAAM;IAAEC;EAAM,CAAE;AACnE;AAYA,MAAMgB,eAAe,GAAGA,CAAChD,EAAsB,EAAEiD,KAA6B,KAAI;EAChF,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,MAAM,IAAId,KAAK,CAAC,eAAe,CAAC;EACxD,MAAMe,GAAG,GAAGF,KAAK,CAACG,GAAG,CAAEC,CAAC,IAAKrD,EAAE,CAACsD,MAAM,CAACD,CAAC,CAAC,CAAgB;EACzD,OAAO;IAAEE,EAAE,EAAEJ,GAAG,CAAC,CAAC,CAAC;IAAEK,EAAE,EAAEL,GAAG,CAAC,CAAC;EAAC,CAAE;AACnC,CAAC;AAED,MAAMM,OAAO;EAiBXC,YACE1D,EAAsB,EACtB2D,IAAA,GAIK,EAAE;IAlBA,KAAAC,IAAI,GAAGhE,GAAG;IAoBjB,MAAM0B,KAAK,GAAGtB,EAAE,CAACsB,KAAK;IACtB,MAAMuC,SAAS,GAAGvC,KAAK,GAAGA,KAAK;IAC/B,IAAI,CAACtB,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACsB,KAAK,GAAGuC,SAAS;IACtB,IAAI,CAACC,IAAI,GAAGxE,MAAM,CAACuE,SAAS,CAAC;IAC7B,IAAI,CAACE,KAAK,GAAGC,IAAI,CAACC,IAAI,CAAC3E,MAAM,CAACuE,SAAS,CAAC,GAAG,CAAC,CAAC;IAC7C,IAAI,CAACK,IAAI,GAAGlE,EAAE,CAACkE,IAAI;IACnB,IAAI,CAACC,IAAI,GAAG;MAAEZ,EAAE,EAAEvD,EAAE,CAACmE,IAAI;MAAEX,EAAE,EAAExD,EAAE,CAACmE;IAAI,CAAE;IACxC,IAAI,CAAChC,GAAG,GAAG;MAAEoB,EAAE,EAAEvD,EAAE,CAACmC,GAAG;MAAEqB,EAAE,EAAExD,EAAE,CAACmE;IAAI,CAAE;IAEtC,IAAI,CAACC,aAAa,GAAGpE,EAAE,CAACsD,MAAM,CAACK,IAAI,CAACU,UAAU,IAAI1E,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7D,IAAI,CAAC2E,OAAO,GAAGtE,EAAE,CAACuE,GAAG,CAACvE,EAAE,CAACmC,GAAG,EAAEtC,GAAG,CAAC,CAAC,CAAC;IACpC,IAAI,CAACwE,UAAU,GAAGrB,eAAe,CAAChD,EAAE,EAAE2D,IAAI,CAACa,cAAe,CAAC;IAC3D;IACA,IAAI,CAACC,sBAAsB,GAAG1E,yBAAyB,CAACC,EAAE,EAAE,IAAI,CAACoE,aAAa,EAAEpE,EAAE,CAACsB,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/F,IAAI,CAACoD,MAAM,GAAGf,IAAI,CAACgB,SAAU;IAC7BC,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC;EACnB;EACAC,YAAYA,CAAC7B,KAAkB;IAC7B,OAAOD,eAAe,CAAC,IAAI,CAAChD,EAAE,EAAEiD,KAAK,CAAC;EACxC;EACAK,MAAMA,CAAClD,GAAQ;IACb,OAAOA,GAAG;EACZ;EACA2E,OAAOA,CAAC;IAAExB,EAAE;IAAEC;EAAE,CAAO;IACrB,SAASwB,QAAQA,CAAC5E,GAAW,EAAEkB,KAAa;MAC1C,OAAO,OAAOlB,GAAG,KAAK,QAAQ,IAAIV,GAAG,IAAIU,GAAG,IAAIA,GAAG,GAAGkB,KAAK;IAC7D;IACA,OAAO0D,QAAQ,CAACzB,EAAE,EAAE,IAAI,CAACjC,KAAK,CAAC,IAAI0D,QAAQ,CAACxB,EAAE,EAAE,IAAI,CAAClC,KAAK,CAAC;EAC7D;EACA2D,GAAGA,CAAC;IAAE1B,EAAE;IAAEC;EAAE,CAAO;IACjB,OAAO,IAAI,CAACxD,EAAE,CAACiF,GAAG,CAAC1B,EAAE,CAAC,IAAI,IAAI,CAACvD,EAAE,CAACiF,GAAG,CAACzB,EAAE,CAAC;EAC3C;EACA0B,WAAWA,CAAC9E,GAAQ;IAClB,OAAO,CAAC,IAAI,CAAC6E,GAAG,CAAC7E,GAAG,CAAC,IAAI,IAAI,CAAC2E,OAAO,CAAC3E,GAAG,CAAC;EAC5C;EACA6B,GAAGA,CAAC;IAAEsB,EAAE;IAAEC;EAAE,CAAO,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAO;IAC1C,OAAO,IAAI,CAACpF,EAAE,CAACiC,GAAG,CAACsB,EAAE,EAAE4B,EAAE,CAAC,IAAI,IAAI,CAACnF,EAAE,CAACiC,GAAG,CAACuB,EAAE,EAAE4B,EAAE,CAAC;EACnD;EACAlD,GAAGA,CAAC;IAAEqB,EAAE;IAAEC;EAAE,CAAO;IACjB,OAAO;MAAED,EAAE,EAAE,IAAI,CAACvD,EAAE,CAACkC,GAAG,CAACqB,EAAE,CAAC;MAAEC,EAAE,EAAE,IAAI,CAACxD,EAAE,CAACkC,GAAG,CAACsB,EAAE;IAAC,CAAE;EACrD;EACAvC,GAAGA,CAACb,GAAQ,EAAEW,KAAa;IACzB,OAAOtB,GAAG,CAAC4F,KAAK,CAAC,IAAI,EAAEjF,GAAG,EAAEW,KAAK,CAAC;EACpC;EACAuE,WAAWA,CAACC,IAAW;IACrB,OAAO9F,GAAG,CAAC+F,aAAa,CAAC,IAAI,EAAED,IAAI,CAAC;EACtC;EACA;EACAE,GAAGA,CAACC,EAAO,EAAEC,EAAO;IAClB,MAAM;MAAEpC,EAAE;MAAEC;IAAE,CAAE,GAAGkC,EAAE;IACrB,MAAM;MAAEnC,EAAE,EAAE4B,EAAE;MAAE3B,EAAE,EAAE4B;IAAE,CAAE,GAAGO,EAAE;IAC7B,OAAO;MACLpC,EAAE,EAAE,IAAI,CAACvD,EAAE,CAACyF,GAAG,CAAClC,EAAE,EAAE4B,EAAE,CAAC;MACvB3B,EAAE,EAAE,IAAI,CAACxD,EAAE,CAACyF,GAAG,CAACjC,EAAE,EAAE4B,EAAE;KACvB;EACH;EACAQ,GAAGA,CAAC;IAAErC,EAAE;IAAEC;EAAE,CAAO,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAO;IAC1C,OAAO;MACL7B,EAAE,EAAE,IAAI,CAACvD,EAAE,CAAC4F,GAAG,CAACrC,EAAE,EAAE4B,EAAE,CAAC;MACvB3B,EAAE,EAAE,IAAI,CAACxD,EAAE,CAAC4F,GAAG,CAACpC,EAAE,EAAE4B,EAAE;KACvB;EACH;EACAxD,GAAGA,CAAC;IAAE2B,EAAE;IAAEC;EAAE,CAAO,EAAEqC,GAAQ;IAC3B,MAAM;MAAE7F;IAAE,CAAE,GAAG,IAAI;IACnB,IAAI,OAAO6F,GAAG,KAAK,QAAQ,EAAE,OAAO;MAAEtC,EAAE,EAAEvD,EAAE,CAAC4B,GAAG,CAAC2B,EAAE,EAAEsC,GAAG,CAAC;MAAErC,EAAE,EAAExD,EAAE,CAAC4B,GAAG,CAAC4B,EAAE,EAAEqC,GAAG;IAAC,CAAE;IAChF;IACA,MAAM;MAAEtC,EAAE,EAAE4B,EAAE;MAAE3B,EAAE,EAAE4B;IAAE,CAAE,GAAGS,GAAG;IAC9B,IAAIC,EAAE,GAAG9F,EAAE,CAAC4B,GAAG,CAAC2B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IACzB,IAAIY,EAAE,GAAG/F,EAAE,CAAC4B,GAAG,CAAC4B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IACzB;IACA,MAAMY,EAAE,GAAGhG,EAAE,CAAC4F,GAAG,CAACE,EAAE,EAAEC,EAAE,CAAC;IACzB,MAAME,EAAE,GAAGjG,EAAE,CAAC4F,GAAG,CAAC5F,EAAE,CAAC4B,GAAG,CAAC5B,EAAE,CAACyF,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,EAAExD,EAAE,CAACyF,GAAG,CAACN,EAAE,EAAEC,EAAE,CAAC,CAAC,EAAEpF,EAAE,CAACyF,GAAG,CAACK,EAAE,EAAEC,EAAE,CAAC,CAAC;IACzE,OAAO;MAAExC,EAAE,EAAEyC,EAAE;MAAExC,EAAE,EAAEyC;IAAE,CAAE;EAC3B;EACAC,GAAGA,CAAC;IAAE3C,EAAE;IAAEC;EAAE,CAAO;IACjB,MAAM;MAAExD;IAAE,CAAE,GAAG,IAAI;IACnB,MAAMW,CAAC,GAAGX,EAAE,CAACyF,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC;IACxB,MAAM2C,CAAC,GAAGnG,EAAE,CAAC4F,GAAG,CAACrC,EAAE,EAAEC,EAAE,CAAC;IACxB,MAAMhB,CAAC,GAAGxC,EAAE,CAACyF,GAAG,CAAClC,EAAE,EAAEA,EAAE,CAAC;IACxB,OAAO;MAAEA,EAAE,EAAEvD,EAAE,CAAC4B,GAAG,CAACjB,CAAC,EAAEwF,CAAC,CAAC;MAAE3C,EAAE,EAAExD,EAAE,CAAC4B,GAAG,CAACY,CAAC,EAAEgB,EAAE;IAAC,CAAE;EAChD;EACA;EACA4C,IAAIA,CAACzF,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACV,GAAG,CAAC9E,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAE,IAAIA,CAAC1F,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACP,GAAG,CAACjF,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAG,IAAIA,CAAC3F,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACvE,GAAG,CAACjB,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAI,IAAIA,CAAC5F,CAAM;IACT,OAAO,IAAI,CAACuF,GAAG,CAACvF,CAAC,CAAC;EACpB;EACA;EACA4D,GAAGA,CAACiC,GAAQ,EAAEX,GAAQ;IACpB,MAAM;MAAE7F;IAAE,CAAE,GAAG,IAAI;IACnB;IACA,OAAO,IAAI,CAAC4B,GAAG,CAAC4E,GAAG,EAAE,OAAOX,GAAG,KAAK,QAAQ,GAAG7F,EAAE,CAACyG,GAAG,CAACzG,EAAE,CAACsD,MAAM,CAACuC,GAAG,CAAC,CAAC,GAAG,IAAI,CAACY,GAAG,CAACZ,GAAG,CAAC,CAAC;EACxF;EACAY,GAAGA,CAAC;IAAElD,EAAE,EAAE5C,CAAC;IAAE6C,EAAE,EAAE2C;EAAC,CAAO;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,MAAM;MAAEnG;IAAE,CAAE,GAAG,IAAI;IACnB,MAAM0G,MAAM,GAAG1G,EAAE,CAACyG,GAAG,CAACzG,EAAE,CAACsD,MAAM,CAAC3C,CAAC,GAAGA,CAAC,GAAGwF,CAAC,GAAGA,CAAC,CAAC,CAAC;IAC/C,OAAO;MAAE5C,EAAE,EAAEvD,EAAE,CAAC4B,GAAG,CAAC8E,MAAM,EAAE1G,EAAE,CAACsD,MAAM,CAAC3C,CAAC,CAAC,CAAC;MAAE6C,EAAE,EAAExD,EAAE,CAAC4B,GAAG,CAAC8E,MAAM,EAAE1G,EAAE,CAACsD,MAAM,CAAC,CAAC6C,CAAC,CAAC;IAAC,CAAE;EAChF;EACAQ,IAAIA,CAACvG,GAAQ;IACX;IACA,MAAM;MAAEJ;IAAE,CAAE,GAAG,IAAI;IACnB,MAAMmB,GAAG,GAAG,IAAI;IAChB,MAAM;MAAEoC,EAAE;MAAEC;IAAE,CAAE,GAAGpD,GAAG;IACtB,IAAIJ,EAAE,CAACiF,GAAG,CAACzB,EAAE,CAAC,EAAE;MACd;MACA,IAAI/D,GAAG,CAACmH,UAAU,CAAC5G,EAAE,EAAEuD,EAAE,CAAC,KAAK,CAAC,EAAE,OAAOpC,GAAG,CAACmC,MAAM,CAAC;QAAEC,EAAE,EAAEvD,EAAE,CAAC2G,IAAI,CAACpD,EAAE,CAAC;QAAEC,EAAE,EAAExD,EAAE,CAACmE;MAAI,CAAE,CAAC,CAAC,KACjF,OAAOhD,GAAG,CAACmC,MAAM,CAAC;QAAEC,EAAE,EAAEvD,EAAE,CAACmE,IAAI;QAAEX,EAAE,EAAExD,EAAE,CAAC2G,IAAI,CAAC3G,EAAE,CAACuE,GAAG,CAAChB,EAAE,EAAE,IAAI,CAACa,aAAa,CAAC;MAAC,CAAE,CAAC;IACtF;IACA,MAAMzD,CAAC,GAAGX,EAAE,CAAC2G,IAAI,CAAC3G,EAAE,CAAC4F,GAAG,CAAC5F,EAAE,CAACkG,GAAG,CAAC3C,EAAE,CAAC,EAAEvD,EAAE,CAAC4B,GAAG,CAAC5B,EAAE,CAACkG,GAAG,CAAC1C,EAAE,CAAC,EAAE,IAAI,CAACY,aAAa,CAAC,CAAC,CAAC;IAC7E,IAAIyC,CAAC,GAAG7G,EAAE,CAAC4B,GAAG,CAAC5B,EAAE,CAACyF,GAAG,CAAC9E,CAAC,EAAE4C,EAAE,CAAC,EAAE,IAAI,CAACe,OAAO,CAAC;IAC3C,MAAMwC,QAAQ,GAAGrH,GAAG,CAACmH,UAAU,CAAC5G,EAAE,EAAE6G,CAAC,CAAC;IACtC;IACA,IAAIC,QAAQ,KAAK,CAAC,CAAC,EAAED,CAAC,GAAG7G,EAAE,CAAC4F,GAAG,CAACiB,CAAC,EAAElG,CAAC,CAAC;IACrC,MAAMoG,EAAE,GAAG/G,EAAE,CAAC2G,IAAI,CAACE,CAAC,CAAC;IACrB,MAAMG,aAAa,GAAG7F,GAAG,CAACmC,MAAM,CAAC;MAAEC,EAAE,EAAEwD,EAAE;MAAEvD,EAAE,EAAExD,EAAE,CAACuE,GAAG,CAACvE,EAAE,CAAC4B,GAAG,CAAC4B,EAAE,EAAE,IAAI,CAACc,OAAO,CAAC,EAAEyC,EAAE;IAAC,CAAE,CAAC;IACtF,IAAI,CAAC5F,GAAG,CAACc,GAAG,CAACd,GAAG,CAAC+E,GAAG,CAACc,aAAa,CAAC,EAAE5G,GAAG,CAAC,EAAE,MAAM,IAAIgC,KAAK,CAAC,yBAAyB,CAAC;IACrF;IACA,MAAM6E,EAAE,GAAGD,aAAa;IACxB,MAAMrF,EAAE,GAAGR,GAAG,CAACe,GAAG,CAAC+E,EAAE,CAAC;IACtB,MAAM;MAAEC,EAAE,EAAEC,GAAG;MAAEC,EAAE,EAAEC;IAAG,CAAE,GAAGlG,GAAG,CAACmG,IAAI,CAACL,EAAE,CAAC;IACzC,MAAM;MAAEC,EAAE,EAAEK,GAAG;MAAEH,EAAE,EAAEI;IAAG,CAAE,GAAGrG,GAAG,CAACmG,IAAI,CAAC3F,EAAE,CAAC;IACzC,IAAI0F,GAAG,GAAGG,GAAG,IAAKH,GAAG,KAAKG,GAAG,IAAIL,GAAG,GAAGI,GAAI,EAAE,OAAON,EAAE;IACtD,OAAOtF,EAAE;EACX;EACA;EACA8F,KAAKA,CAAChG,CAAM;IACV,MAAM;MAAEyF,EAAE,EAAEQ,EAAE;MAAEN,EAAE,EAAEH;IAAE,CAAE,GAAG,IAAI,CAACK,IAAI,CAAC7F,CAAC,CAAC;IACvC,MAAMkG,MAAM,GAAGD,EAAE,GAAG7H,GAAG;IACvB,MAAM+H,MAAM,GAAGF,EAAE,KAAKhI,GAAG;IACzB,MAAMmI,MAAM,GAAGZ,EAAE,GAAGpH,GAAG;IACvB,OAAOF,MAAM,CAACgI,MAAM,IAAKC,MAAM,IAAIC,MAAO,CAAC,IAAIjI,GAAG;EACpD;EACA;EACAkI,SAASA,CAAC3B,CAAa;IACrB,MAAM;MAAEnG;IAAE,CAAE,GAAG,IAAI;IACnB,IAAImG,CAAC,CAACjD,MAAM,KAAK,IAAI,CAACa,KAAK,EAAE,MAAM,IAAI3B,KAAK,CAAC,2BAA2B,GAAG+D,CAAC,CAACjD,MAAM,CAAC;IACpF,OAAO;MAAEK,EAAE,EAAEvD,EAAE,CAAC8H,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC,CAAC,EAAE/H,EAAE,CAAC+D,KAAK,CAAC,CAAC;MAAEP,EAAE,EAAExD,EAAE,CAAC8H,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC/H,EAAE,CAAC+D,KAAK,CAAC;IAAC,CAAE;EAC9F;EACAiE,OAAOA,CAAC;IAAEzE,EAAE;IAAEC;EAAE,CAAO;IACrB,OAAOjE,WAAW,CAAC,IAAI,CAACS,EAAE,CAACgI,OAAO,CAACzE,EAAE,CAAC,EAAE,IAAI,CAACvD,EAAE,CAACgI,OAAO,CAACxE,EAAE,CAAC,CAAC;EAC9D;EACAyE,IAAIA,CAAC;IAAE1E,EAAE;IAAEC;EAAE,CAAO,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAO,EAAE5C,CAAU;IACvD,OAAO;MACLe,EAAE,EAAE,IAAI,CAACvD,EAAE,CAACiI,IAAI,CAAC1E,EAAE,EAAE4B,EAAE,EAAE3C,CAAC,CAAC;MAC3BgB,EAAE,EAAE,IAAI,CAACxD,EAAE,CAACiI,IAAI,CAACzE,EAAE,EAAE4B,EAAE,EAAE5C,CAAC;KAC3B;EACH;EACA8E,IAAIA,CAAC;IAAE/D,EAAE;IAAEC;EAAE,CAAO;IAClB,OAAO;MAAE0D,EAAE,EAAE3D,EAAE;MAAE6D,EAAE,EAAE5D;IAAE,CAAE;EAC3B;EACA0E,SAASA,CAACvH,CAAM,EAAEwF,CAAM;IACtB,MAAMhF,GAAG,GAAG,IAAI;IAChB,MAAMgH,EAAE,GAAGhH,GAAG,CAAC+E,GAAG,CAACvF,CAAC,CAAC;IACrB,MAAMyH,EAAE,GAAGjH,GAAG,CAAC+E,GAAG,CAACC,CAAC,CAAC;IACrB,OAAO;MACLkC,KAAK,EAAElH,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACmH,eAAe,CAACF,EAAE,CAAC,EAAED,EAAE,CAAC;MAAE;MAC7CI,MAAM,EAAEpH,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAAC+E,GAAG,CAAC/E,GAAG,CAACsE,GAAG,CAAC9E,CAAC,EAAEwF,CAAC,CAAC,CAAC,EAAEgC,EAAE,CAAC,EAAEC,EAAE,CAAC,CAAE;KAC3D;EACH;EACA;EACAE,eAAeA,CAAC;IAAE/E,EAAE;IAAEC;EAAE,CAAO;IAC7B,OAAO,IAAI,CAAC5B,GAAG,CAAC;MAAE2B,EAAE;MAAEC;IAAE,CAAE,EAAE,IAAI,CAACa,UAAU,CAAC;EAC9C;EACAxC,YAAYA,CAAC;IAAE0B,EAAE;IAAEC;EAAE,CAAO,EAAEzC,KAAa;IACzC,OAAO;MACLwC,EAAE;MACFC,EAAE,EAAE,IAAI,CAACxD,EAAE,CAAC4B,GAAG,CAAC4B,EAAE,EAAE,IAAI,CAACiB,sBAAsB,CAAC1D,KAAK,GAAG,CAAC,CAAC;KAC3D;EACH;;AAGF,MAAMyH,OAAO;EAaX9E,YAAYvC,GAAW;IARd,KAAAyC,IAAI,GAAGhE,GAAG;IASjB,IAAI,CAACuB,GAAG,GAAGA,GAAG;IACd,IAAI,CAACG,KAAK,GAAGH,GAAG,CAACG,KAAK,CAAC,CAAC;IACxB,IAAI,CAACwC,IAAI,GAAG,CAAC,GAAG3C,GAAG,CAAC2C,IAAI;IACxB,IAAI,CAACC,KAAK,GAAG,CAAC,GAAG5C,GAAG,CAAC4C,KAAK;IAC1B,IAAI,CAACG,IAAI,GAAG/C,GAAG,CAAC+C,IAAI;IACpB,IAAI,CAACC,IAAI,GAAG;MAAEZ,EAAE,EAAEpC,GAAG,CAACgD,IAAI;MAAEX,EAAE,EAAErC,GAAG,CAACgD,IAAI;MAAEsE,EAAE,EAAEtH,GAAG,CAACgD;IAAI,CAAE;IACxD,IAAI,CAAChC,GAAG,GAAG;MAAEoB,EAAE,EAAEpC,GAAG,CAACgB,GAAG;MAAEqB,EAAE,EAAErC,GAAG,CAACgD,IAAI;MAAEsE,EAAE,EAAEtH,GAAG,CAACgD;IAAI,CAAE;IACtD,MAAM;MAAEnE;IAAE,CAAE,GAAGmB,GAAG;IAClB,MAAMuH,IAAI,GAAG3I,yBAAyB,CAACoB,GAAG,EAAEA,GAAG,CAACkD,UAAU,EAAErE,EAAE,CAACsB,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9E,IAAI,CAACqH,wBAAwB,GAAGD,IAAI,CAAC,CAAC,CAAC;IACvC,IAAI,CAACE,wBAAwB,GAAGF,IAAI,CAAC,CAAC,CAAC;IACvC9D,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC;EACnB;EACAY,GAAGA,CAAC;IAAElC,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE;IAAElF,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B,EAAE;IAAEqD,EAAE,EAAEI;EAAE,CAAO;IACtD,MAAM;MAAE1H;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CAAClC,EAAE,EAAE4B,EAAE,CAAC;MACnB3B,EAAE,EAAErC,GAAG,CAACsE,GAAG,CAACjC,EAAE,EAAE4B,EAAE,CAAC;MACnBqD,EAAE,EAAEtH,GAAG,CAACsE,GAAG,CAACgD,EAAE,EAAEI,EAAE;KACnB;EACH;EACAjD,GAAGA,CAAC;IAAErC,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE;IAAElF,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B,EAAE;IAAEqD,EAAE,EAAEI;EAAE,CAAO;IACtD,MAAM;MAAE1H;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAACyE,GAAG,CAACrC,EAAE,EAAE4B,EAAE,CAAC;MACnB3B,EAAE,EAAErC,GAAG,CAACyE,GAAG,CAACpC,EAAE,EAAE4B,EAAE,CAAC;MACnBqD,EAAE,EAAEtH,GAAG,CAACyE,GAAG,CAAC6C,EAAE,EAAEI,EAAE;KACnB;EACH;EACAjH,GAAGA,CAAC;IAAE2B,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE5C,GAAiB;IACxC,MAAM;MAAE1E;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI,OAAO0E,GAAG,KAAK,QAAQ,EAAE;MAC3B,OAAO;QACLtC,EAAE,EAAEpC,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEsC,GAAG,CAAC;QACpBrC,EAAE,EAAErC,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEqC,GAAG,CAAC;QACpB4C,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAE5C,GAAG;OACpB;IACH;IACA,MAAM;MAAEtC,EAAE,EAAE4B,EAAE;MAAE3B,EAAE,EAAE4B,EAAE;MAAEqD,EAAE,EAAEI;IAAE,CAAE,GAAGhD,GAAG;IACtC,MAAMiD,EAAE,GAAG3H,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IAC5B,MAAMW,EAAE,GAAG3E,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IAC5B,MAAMW,EAAE,GAAG5E,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAEI,EAAE,CAAC,CAAC,CAAC;IAC5B,OAAO;MACL;MACAtF,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CACTqD,EAAE,EACF3H,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAACjC,EAAE,EAAEiF,EAAE,CAAC,EAAEtH,GAAG,CAACsE,GAAG,CAACL,EAAE,EAAEyD,EAAE,CAAC,CAAC,EAAE1H,GAAG,CAACsE,GAAG,CAACK,EAAE,EAAEC,EAAE,CAAC,CAAC,CAAC,CACzF;MACD;MACAvC,EAAE,EAAErC,GAAG,CAACsE,GAAG,CACTtE,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,EAAErC,GAAG,CAACsE,GAAG,CAACN,EAAE,EAAEC,EAAE,CAAC,CAAC,EAAEjE,GAAG,CAACsE,GAAG,CAACqD,EAAE,EAAEhD,EAAE,CAAC,CAAC,EACnE3E,GAAG,CAACmH,eAAe,CAACvC,EAAE,CAAC,CACxB;MACD;MACA0C,EAAE,EAAEtH,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACsE,GAAG,CAACK,EAAE,EAAE3E,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAAClC,EAAE,EAAEkF,EAAE,CAAC,EAAEtH,GAAG,CAACsE,GAAG,CAACN,EAAE,EAAE0D,EAAE,CAAC,CAAC,CAAC,EAAE1H,GAAG,CAACsE,GAAG,CAACqD,EAAE,EAAE/C,EAAE,CAAC;KACpF;EACH;EACAG,GAAGA,CAAC;IAAE3C,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACrB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI2H,EAAE,GAAG3H,GAAG,CAAC+E,GAAG,CAAC3C,EAAE,CAAC,CAAC,CAAC;IACtB,IAAIuC,EAAE,GAAG3E,GAAG,CAACS,GAAG,CAACT,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEC,EAAE,CAAC,EAAE3D,GAAG,CAAC,CAAC,CAAC;IACxC,IAAIkJ,EAAE,GAAG5H,GAAG,CAACS,GAAG,CAACT,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEiF,EAAE,CAAC,EAAE5I,GAAG,CAAC,CAAC,CAAC;IACxC,IAAImJ,EAAE,GAAG7H,GAAG,CAAC+E,GAAG,CAACuC,EAAE,CAAC,CAAC,CAAC;IACtB,OAAO;MACLlF,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACmH,eAAe,CAACS,EAAE,CAAC,EAAED,EAAE,CAAC;MAAE;MAC1CtF,EAAE,EAAErC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACmH,eAAe,CAACU,EAAE,CAAC,EAAElD,EAAE,CAAC;MAAE;MAC1C;MACA2C,EAAE,EAAEtH,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACsE,GAAG,CAACK,EAAE,EAAE3E,GAAG,CAAC+E,GAAG,CAAC/E,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACyE,GAAG,CAACrC,EAAE,EAAEC,EAAE,CAAC,EAAEiF,EAAE,CAAC,CAAC,CAAC,EAAEM,EAAE,CAAC,EAAED,EAAE,CAAC,EAAEE,EAAE;KAC7F;EACH;EACA5C,IAAIA,CAACzF,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACV,GAAG,CAAC9E,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAE,IAAIA,CAAC1F,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACP,GAAG,CAACjF,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAG,IAAIA,CAAC3F,CAAM,EAAEwF,CAAM;IACjB,OAAO,IAAI,CAACvE,GAAG,CAACjB,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAI,IAAIA,CAAC5F,CAAM;IACT,OAAO,IAAI,CAACuF,GAAG,CAACvF,CAAC,CAAC;EACpB;EAEA2C,MAAMA,CAAClD,GAAQ;IACb,OAAOA,GAAG;EACZ;EAEA2E,OAAOA,CAAC;IAAExB,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACzB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAAC4D,OAAO,CAACxB,EAAE,CAAC,IAAIpC,GAAG,CAAC4D,OAAO,CAACvB,EAAE,CAAC,IAAIrC,GAAG,CAAC4D,OAAO,CAAC0D,EAAE,CAAC;EAC9D;EACAxD,GAAGA,CAAC;IAAE1B,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACrB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAAC8D,GAAG,CAAC1B,EAAE,CAAC,IAAIpC,GAAG,CAAC8D,GAAG,CAACzB,EAAE,CAAC,IAAIrC,GAAG,CAAC8D,GAAG,CAACwD,EAAE,CAAC;EAClD;EACAvD,WAAWA,CAAC9E,GAAQ;IAClB,OAAO,CAAC,IAAI,CAAC6E,GAAG,CAAC7E,GAAG,CAAC,IAAI,IAAI,CAAC2E,OAAO,CAAC3E,GAAG,CAAC;EAC5C;EACA8B,GAAGA,CAAC;IAAEqB,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACrB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MAAEoC,EAAE,EAAEpC,GAAG,CAACe,GAAG,CAACqB,EAAE,CAAC;MAAEC,EAAE,EAAErC,GAAG,CAACe,GAAG,CAACsB,EAAE,CAAC;MAAEiF,EAAE,EAAEtH,GAAG,CAACe,GAAG,CAACuG,EAAE;IAAC,CAAE;EAC9D;EACAxG,GAAGA,CAAC;IAAEsB,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE;IAAElF,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B,EAAE;IAAEqD,EAAE,EAAEI;EAAE,CAAO;IACtD,MAAM;MAAE1H;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAACc,GAAG,CAACsB,EAAE,EAAE4B,EAAE,CAAC,IAAIhE,GAAG,CAACc,GAAG,CAACuB,EAAE,EAAE4B,EAAE,CAAC,IAAIjE,GAAG,CAACc,GAAG,CAACwG,EAAE,EAAEI,EAAE,CAAC;EAC9D;EACAlC,IAAIA,CAACsC,CAAM;IACT,OAAOzJ,cAAc,EAAE;EACzB;EACA;EACA+E,GAAGA,CAACiC,GAAQ,EAAEX,GAAQ;IACpB,MAAM;MAAE1E;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAEnB;IAAE,CAAE,GAAGmB,GAAG;IAClB,OAAO,IAAI,CAACS,GAAG,CAAC4E,GAAG,EAAE,OAAOX,GAAG,KAAK,QAAQ,GAAG7F,EAAE,CAACyG,GAAG,CAACzG,EAAE,CAACsD,MAAM,CAACuC,GAAG,CAAC,CAAC,GAAG,IAAI,CAACY,GAAG,CAACZ,GAAG,CAAC,CAAC;EACxF;EACA5E,GAAGA,CAACb,GAAQ,EAAEW,KAAS;IACrB,OAAOtB,GAAG,CAAC4F,KAAK,CAAC,IAAI,EAAEjF,GAAG,EAAEW,KAAK,CAAC;EACpC;EACAuE,WAAWA,CAACC,IAAW;IACrB,OAAO9F,GAAG,CAAC+F,aAAa,CAAC,IAAI,EAAED,IAAI,CAAC;EACtC;EAEAkB,GAAGA,CAAC;IAAElD,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACrB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI2H,EAAE,GAAG3H,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAAC+E,GAAG,CAAC3C,EAAE,CAAC,EAAEpC,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAEjF,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACrE,IAAIsC,EAAE,GAAG3E,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAAC+E,GAAG,CAACuC,EAAE,CAAC,CAAC,EAAEtH,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEC,EAAE,CAAC,CAAC,CAAC,CAAC;IACrE,IAAIuC,EAAE,GAAG5E,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAAC+E,GAAG,CAAC1C,EAAE,CAAC,EAAErC,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEkF,EAAE,CAAC,CAAC,CAAC,CAAC;IAChD;IACA,IAAIO,EAAE,GAAG7H,GAAG,CAACsF,GAAG,CACdtF,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAE3C,EAAE,CAAC,EAAE3E,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEuC,EAAE,CAAC,CAAC,CAAC,EAAE5E,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEuF,EAAE,CAAC,CAAC,CACzF;IACD,OAAO;MAAEvF,EAAE,EAAEpC,GAAG,CAACS,GAAG,CAACoH,EAAE,EAAEF,EAAE,CAAC;MAAEtF,EAAE,EAAErC,GAAG,CAACS,GAAG,CAACoH,EAAE,EAAElD,EAAE,CAAC;MAAE2C,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAACoH,EAAE,EAAEjD,EAAE;IAAC,CAAE;EAC1E;EACA;EACA+B,SAASA,CAAC3B,CAAa;IACrB,MAAM;MAAEhF;IAAG,CAAE,GAAG,IAAI;IACpB,IAAIgF,CAAC,CAACjD,MAAM,KAAK,IAAI,CAACa,KAAK,EAAE,MAAM,IAAI3B,KAAK,CAAC,2BAA2B,GAAG+D,CAAC,CAACjD,MAAM,CAAC;IACpF,MAAMgG,EAAE,GAAG/H,GAAG,CAAC4C,KAAK;IACpB,OAAO;MACLR,EAAE,EAAEpC,GAAG,CAAC2G,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC,CAAC,EAAEmB,EAAE,CAAC,CAAC;MACpC1F,EAAE,EAAErC,GAAG,CAAC2G,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAACmB,EAAE,EAAEA,EAAE,GAAG,CAAC,CAAC,CAAC;MACzCT,EAAE,EAAEtH,GAAG,CAAC2G,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC,CAAC,GAAGmB,EAAE,CAAC;KACrC;EACH;EACAlB,OAAOA,CAAC;IAAEzE,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACzB,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO5B,WAAW,CAAC4B,GAAG,CAAC6G,OAAO,CAACzE,EAAE,CAAC,EAAEpC,GAAG,CAAC6G,OAAO,CAACxE,EAAE,CAAC,EAAErC,GAAG,CAAC6G,OAAO,CAACS,EAAE,CAAC,CAAC;EACvE;EACAR,IAAIA,CAAC;IAAE1E,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE;IAAElF,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B,EAAE;IAAEqD,EAAE,EAAEI;EAAE,CAAO,EAAErG,CAAU;IACnE,MAAM;MAAErB;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAAC8G,IAAI,CAAC1E,EAAE,EAAE4B,EAAE,EAAE3C,CAAC,CAAC;MACvBgB,EAAE,EAAErC,GAAG,CAAC8G,IAAI,CAACzE,EAAE,EAAE4B,EAAE,EAAE5C,CAAC,CAAC;MACvBiG,EAAE,EAAEtH,GAAG,CAAC8G,IAAI,CAACQ,EAAE,EAAEI,EAAE,EAAErG,CAAC;KACvB;EACH;EACA2G,UAAUA,CAACC,CAAY;IACrB,MAAM;MAAEjI;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI,CAACkI,KAAK,CAACC,OAAO,CAACF,CAAC,CAAC,IAAIA,CAAC,CAAClG,MAAM,KAAK,CAAC,EAAE,MAAM,IAAId,KAAK,CAAC,mBAAmB,CAAC;IAC7E,OAAO;MACLmB,EAAE,EAAEpC,GAAG,CAAC2D,YAAY,CAACsE,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAgB,CAAC;MAClD/F,EAAE,EAAErC,GAAG,CAAC2D,YAAY,CAACsE,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAgB,CAAC;MAClDd,EAAE,EAAEtH,GAAG,CAAC2D,YAAY,CAACsE,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAgB;KAClD;EACH;EACA1H,YAAYA,CAAC;IAAE0B,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE1H,KAAa;IAC7C,MAAM;MAAEI;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAACU,YAAY,CAAC0B,EAAE,EAAExC,KAAK,CAAC;MAC/ByC,EAAE,EAAErC,GAAG,CAACS,GAAG,CAACT,GAAG,CAACU,YAAY,CAAC2B,EAAE,EAAEzC,KAAK,CAAC,EAAE,IAAI,CAAC4H,wBAAwB,CAAC5H,KAAK,GAAG,CAAC,CAAC,CAAC;MAClF0H,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAACT,GAAG,CAACU,YAAY,CAAC4G,EAAE,EAAE1H,KAAK,CAAC,EAAE,IAAI,CAAC6H,wBAAwB,CAAC7H,KAAK,GAAG,CAAC,CAAC;KAClF;EACH;EACAyI,QAAQA,CAAC;IAAEjG,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAE5C,GAAQ;IACpC,MAAM;MAAE1E;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEsC,GAAG,CAAC;MACpBrC,EAAE,EAAErC,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEqC,GAAG,CAAC;MACpB4C,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAE5C,GAAG;KACpB;EACH;EACAyC,eAAeA,CAAC;IAAE/E,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO;IACjC,MAAM;MAAEtH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MAAEoC,EAAE,EAAEpC,GAAG,CAACmH,eAAe,CAACG,EAAE,CAAC;MAAEjF,EAAE,EAAED,EAAE;MAAEkF,EAAE,EAAEjF;IAAE,CAAE;EACxD;EACA;EACAiG,IAAIA,CAAC;IAAElG,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAEiB,EAAO;IAC/B,MAAM;MAAEvI;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLoC,EAAE,EAAEpC,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAEiB,EAAE,CAAC,CAAC;MACxClG,EAAE,EAAErC,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEmG,EAAE,CAAC;MACnBjB,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEkG,EAAE;KACnB;EACH;EACA;EACAC,KAAKA,CAAC;IAAEpG,EAAE;IAAEC,EAAE;IAAEiF;EAAE,CAAO,EAAEmB,EAAO,EAAEF,EAAO;IACzC,MAAM;MAAEvI;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI2H,EAAE,GAAG3H,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAEqG,EAAE,CAAC,CAAC,CAAC;IAC1B,IAAI9D,EAAE,GAAG3E,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAEkG,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO;MACL;MACAnG,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACmH,eAAe,CAACnH,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAACjC,EAAE,EAAEiF,EAAE,CAAC,EAAEiB,EAAE,CAAC,EAAE5D,EAAE,CAAC,CAAC,EAAEgD,EAAE,CAAC;MAC/E;MACAtF,EAAE,EAAErC,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAACmE,EAAE,EAAEF,EAAE,CAAC,EAAEvI,GAAG,CAACsE,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,CAAC,EAAEsF,EAAE,CAAC,EAAEhD,EAAE,CAAC;MACvE;MACA2C,EAAE,EAAEtH,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACyE,GAAG,CAACzE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAAClC,EAAE,EAAEkF,EAAE,CAAC,EAAEmB,EAAE,CAAC,EAAEd,EAAE,CAAC,EAAEhD,EAAE;KAC1D;EACH;;AAGF,MAAM+D,QAAQ;EAeZnG,YAAYoG,GAAW,EAAEnG,IAAiB;IAVjC,KAAAC,IAAI,GAAGhE,GAAG;IAWjB,MAAM;MAAEuB;IAAG,CAAE,GAAG2I,GAAG;IACnB,MAAM;MAAE9J;IAAE,CAAE,GAAGmB,GAAG;IAClB,IAAI,CAAC2I,GAAG,GAAGA,GAAG;IAEd,IAAI,CAACxI,KAAK,GAAGH,GAAG,CAACG,KAAK,CAAC,CAAC;IACxB,IAAI,CAACwC,IAAI,GAAG,CAAC,GAAGgG,GAAG,CAAChG,IAAI;IACxB,IAAI,CAACC,KAAK,GAAG,CAAC,GAAG+F,GAAG,CAAC/F,KAAK;IAC1B,IAAI,CAACG,IAAI,GAAG4F,GAAG,CAAC5F,IAAI;IACpB,IAAI,CAACC,IAAI,GAAG;MAAEZ,EAAE,EAAEuG,GAAG,CAAC3F,IAAI;MAAEX,EAAE,EAAEsG,GAAG,CAAC3F;IAAI,CAAE;IAC1C,IAAI,CAAChC,GAAG,GAAG;MAAEoB,EAAE,EAAEuG,GAAG,CAAC3H,GAAG;MAAEqB,EAAE,EAAEsG,GAAG,CAAC3F;IAAI,CAAE;IAExC,IAAI,CAACM,sBAAsB,GAAG1E,yBAAyB,CACrDoB,GAAG,EACHA,GAAG,CAACkD,UAAU,EACdrE,EAAE,CAACsB,KAAK,EACR,EAAE,EACF,CAAC,EACD,CAAC,CACF,CAAC,CAAC,CAAC;IACJ,IAAI,CAACyI,KAAK,GAAGpG,IAAI,CAACoG,KAAK;IACvB,IAAI,CAACC,iBAAiB,GAAGrG,IAAI,CAACsG,qBAAqB;EACrD;EACA3G,MAAMA,CAAClD,GAAS;IACd,OAAOA,GAAG;EACZ;EACA2E,OAAOA,CAAC;IAAExB,EAAE;IAAEC;EAAE,CAAQ;IACtB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAAC/E,OAAO,CAACxB,EAAE,CAAC,IAAIuG,GAAG,CAAC/E,OAAO,CAACvB,EAAE,CAAC;EAC3C;EACAyB,GAAGA,CAAC;IAAE1B,EAAE;IAAEC;EAAE,CAAQ;IAClB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAAC7E,GAAG,CAAC1B,EAAE,CAAC,IAAIuG,GAAG,CAAC7E,GAAG,CAACzB,EAAE,CAAC;EACnC;EACA0B,WAAWA,CAAC9E,GAAS;IACnB,OAAO,CAAC,IAAI,CAAC6E,GAAG,CAAC7E,GAAG,CAAC,IAAI,IAAI,CAAC2E,OAAO,CAAC3E,GAAG,CAAC;EAC5C;EACA8B,GAAGA,CAAC;IAAEqB,EAAE;IAAEC;EAAE,CAAQ;IAClB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MAAEvG,EAAE,EAAEuG,GAAG,CAAC5H,GAAG,CAACqB,EAAE,CAAC;MAAEC,EAAE,EAAEsG,GAAG,CAAC5H,GAAG,CAACsB,EAAE;IAAC,CAAE;EAC7C;EACAvB,GAAGA,CAAC;IAAEsB,EAAE;IAAEC;EAAE,CAAQ,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAQ;IAC5C,MAAM;MAAE0E;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOA,GAAG,CAAC7H,GAAG,CAACsB,EAAE,EAAE4B,EAAE,CAAC,IAAI2E,GAAG,CAAC7H,GAAG,CAACuB,EAAE,EAAE4B,EAAE,CAAC;EAC3C;EACAuB,IAAIA,CAACsC,CAAM;IACTzJ,cAAc,EAAE;EAClB;EACAiH,GAAGA,CAAC;IAAElD,EAAE;IAAEC;EAAE,CAAQ;IAClB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,IAAIV,CAAC,GAAGU,GAAG,CAACrD,GAAG,CAACqD,GAAG,CAAClE,GAAG,CAACkE,GAAG,CAAC5D,GAAG,CAAC3C,EAAE,CAAC,EAAEuG,GAAG,CAACxB,eAAe,CAACwB,GAAG,CAAC5D,GAAG,CAAC1C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzE,OAAO;MAAED,EAAE,EAAEuG,GAAG,CAAClI,GAAG,CAAC2B,EAAE,EAAE6F,CAAC,CAAC;MAAE5F,EAAE,EAAEsG,GAAG,CAAC5H,GAAG,CAAC4H,GAAG,CAAClI,GAAG,CAAC4B,EAAE,EAAE4F,CAAC,CAAC;IAAC,CAAE,CAAC,CAAC;EAC9D;EACA7E,GAAGA,CAACiC,GAAS,EAAEX,GAAS;IACtB,MAAM;MAAEiE;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAE3I;IAAG,CAAE,GAAG2I,GAAG;IACnB,MAAM;MAAE9J;IAAE,CAAE,GAAGmB,GAAG;IAClB,OAAO,IAAI,CAACS,GAAG,CAAC4E,GAAG,EAAE,OAAOX,GAAG,KAAK,QAAQ,GAAG7F,EAAE,CAACyG,GAAG,CAACzG,EAAE,CAACsD,MAAM,CAACuC,GAAG,CAAC,CAAC,GAAG,IAAI,CAACY,GAAG,CAACZ,GAAG,CAAC,CAAC;EACxF;EACA5E,GAAGA,CAACb,GAAS,EAAEW,KAAa;IAC1B,OAAOtB,GAAG,CAAC4F,KAAK,CAAC,IAAI,EAAEjF,GAAG,EAAEW,KAAK,CAAC;EACpC;EACAuE,WAAWA,CAACC,IAAY;IACtB,OAAO9F,GAAG,CAAC+F,aAAa,CAAC,IAAI,EAAED,IAAI,CAAC;EACtC;EAEA;EACAE,GAAGA,CAAC;IAAElC,EAAE;IAAEC;EAAE,CAAQ,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAQ;IAC5C,MAAM;MAAE0E;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLvG,EAAE,EAAEuG,GAAG,CAACrE,GAAG,CAAClC,EAAE,EAAE4B,EAAE,CAAC;MACnB3B,EAAE,EAAEsG,GAAG,CAACrE,GAAG,CAACjC,EAAE,EAAE4B,EAAE;KACnB;EACH;EACAQ,GAAGA,CAAC;IAAErC,EAAE;IAAEC;EAAE,CAAQ,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAQ;IAC5C,MAAM;MAAE0E;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLvG,EAAE,EAAEuG,GAAG,CAAClE,GAAG,CAACrC,EAAE,EAAE4B,EAAE,CAAC;MACnB3B,EAAE,EAAEsG,GAAG,CAAClE,GAAG,CAACpC,EAAE,EAAE4B,EAAE;KACnB;EACH;EACAxD,GAAGA,CAAC;IAAE2B,EAAE;IAAEC;EAAE,CAAQ,EAAEqC,GAAkB;IACtC,MAAM;MAAEiE;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI,OAAOjE,GAAG,KAAK,QAAQ,EAAE,OAAO;MAAEtC,EAAE,EAAEuG,GAAG,CAAClI,GAAG,CAAC2B,EAAE,EAAEsC,GAAG,CAAC;MAAErC,EAAE,EAAEsG,GAAG,CAAClI,GAAG,CAAC4B,EAAE,EAAEqC,GAAG;IAAC,CAAE;IAClF,IAAI;MAAEtC,EAAE,EAAE4B,EAAE;MAAE3B,EAAE,EAAE4B;IAAE,CAAE,GAAGS,GAAG;IAC5B,IAAIC,EAAE,GAAGgE,GAAG,CAAClI,GAAG,CAAC2B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IAC1B,IAAIY,EAAE,GAAG+D,GAAG,CAAClI,GAAG,CAAC4B,EAAE,EAAE4B,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO;MACL7B,EAAE,EAAEuG,GAAG,CAACrE,GAAG,CAACK,EAAE,EAAEgE,GAAG,CAACxB,eAAe,CAACvC,EAAE,CAAC,CAAC;MAAE;MAC1C;MACAvC,EAAE,EAAEsG,GAAG,CAAClE,GAAG,CAACkE,GAAG,CAAClI,GAAG,CAACkI,GAAG,CAACrE,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,EAAEsG,GAAG,CAACrE,GAAG,CAACN,EAAE,EAAEC,EAAE,CAAC,CAAC,EAAE0E,GAAG,CAACrE,GAAG,CAACK,EAAE,EAAEC,EAAE,CAAC;KACvE;EACH;EACAG,GAAGA,CAAC;IAAE3C,EAAE;IAAEC;EAAE,CAAQ;IAClB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,IAAII,EAAE,GAAGJ,GAAG,CAAClI,GAAG,CAAC2B,EAAE,EAAEC,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO;MACL;MACAD,EAAE,EAAEuG,GAAG,CAAClE,GAAG,CACTkE,GAAG,CAAClE,GAAG,CAACkE,GAAG,CAAClI,GAAG,CAACkI,GAAG,CAACrE,GAAG,CAACqE,GAAG,CAACxB,eAAe,CAAC9E,EAAE,CAAC,EAAED,EAAE,CAAC,EAAEuG,GAAG,CAACrE,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,CAAC,EAAE0G,EAAE,CAAC,EAC3EJ,GAAG,CAACxB,eAAe,CAAC4B,EAAE,CAAC,CACxB;MACD1G,EAAE,EAAEsG,GAAG,CAACrE,GAAG,CAACyE,EAAE,EAAEA,EAAE;KACnB,CAAC,CAAC;EACL;EACA;EACA9D,IAAIA,CAACzF,CAAO,EAAEwF,CAAO;IACnB,OAAO,IAAI,CAACV,GAAG,CAAC9E,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAE,IAAIA,CAAC1F,CAAO,EAAEwF,CAAO;IACnB,OAAO,IAAI,CAACP,GAAG,CAACjF,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAG,IAAIA,CAAC3F,CAAO,EAAEwF,CAAO;IACnB,OAAO,IAAI,CAACvE,GAAG,CAACjB,CAAC,EAAEwF,CAAC,CAAC;EACvB;EACAI,IAAIA,CAAC5F,CAAO;IACV,OAAO,IAAI,CAACuF,GAAG,CAACvF,CAAC,CAAC;EACpB;EAEA;EACAmH,SAASA,CAAC3B,CAAa;IACrB,MAAM;MAAE2D;IAAG,CAAE,GAAG,IAAI;IACpB,IAAI3D,CAAC,CAACjD,MAAM,KAAK,IAAI,CAACa,KAAK,EAAE,MAAM,IAAI3B,KAAK,CAAC,2BAA2B,GAAG+D,CAAC,CAACjD,MAAM,CAAC;IACpF,OAAO;MACLK,EAAE,EAAEuG,GAAG,CAAChC,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC,CAAC,EAAE+B,GAAG,CAAC/F,KAAK,CAAC,CAAC;MAC3CP,EAAE,EAAEsG,GAAG,CAAChC,SAAS,CAAC3B,CAAC,CAAC4B,QAAQ,CAAC+B,GAAG,CAAC/F,KAAK,CAAC;KACxC;EACH;EACAiE,OAAOA,CAAC;IAAEzE,EAAE;IAAEC;EAAE,CAAQ;IACtB,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,OAAOvK,WAAW,CAACuK,GAAG,CAAC9B,OAAO,CAACzE,EAAE,CAAC,EAAEuG,GAAG,CAAC9B,OAAO,CAACxE,EAAE,CAAC,CAAC;EACtD;EACAyE,IAAIA,CAAC;IAAE1E,EAAE;IAAEC;EAAE,CAAQ,EAAE;IAAED,EAAE,EAAE4B,EAAE;IAAE3B,EAAE,EAAE4B;EAAE,CAAQ,EAAE5C,CAAU;IACzD,MAAM;MAAEsH;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLvG,EAAE,EAAEuG,GAAG,CAAC7B,IAAI,CAAC1E,EAAE,EAAE4B,EAAE,EAAE3C,CAAC,CAAC;MACvBgB,EAAE,EAAEsG,GAAG,CAAC7B,IAAI,CAACzE,EAAE,EAAE4B,EAAE,EAAE5C,CAAC;KACvB;EACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA2H,aAAaA,CAACf,CAAe;IAC3B,MAAM;MAAEU;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLvG,EAAE,EAAEuG,GAAG,CAACX,UAAU,CAACC,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAc,CAAC;MAC9C/F,EAAE,EAAEsG,GAAG,CAACX,UAAU,CAACC,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,EAAE,CAAc;KAC/C;EACH;EACA;EACA1H,YAAYA,CAAC2E,GAAS,EAAEzF,KAAa;IACnC,MAAM;MAAE+I;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAE3I;IAAG,CAAE,GAAG2I,GAAG;IACnB,MAAM;MAAEvG,EAAE;MAAEC,EAAE;MAAEiF;IAAE,CAAE,GAAGqB,GAAG,CAACjI,YAAY,CAAC2E,GAAG,CAAChD,EAAE,EAAEzC,KAAK,CAAC;IACtD,MAAMqJ,KAAK,GAAG,IAAI,CAAC3F,sBAAsB,CAAC1D,KAAK,GAAG,EAAE,CAAC;IACrD,OAAO;MACLwC,EAAE,EAAEuG,GAAG,CAACjI,YAAY,CAAC2E,GAAG,CAACjD,EAAE,EAAExC,KAAK,CAAC;MACnCyC,EAAE,EAAEsG,GAAG,CAACxG,MAAM,CAAC;QACbC,EAAE,EAAEpC,GAAG,CAACS,GAAG,CAAC2B,EAAE,EAAE6G,KAAK,CAAC;QACtB5G,EAAE,EAAErC,GAAG,CAACS,GAAG,CAAC4B,EAAE,EAAE4G,KAAK,CAAC;QACtB3B,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAAC6G,EAAE,EAAE2B,KAAK;OACtB;KACF;EACH;EACAZ,QAAQA,CAAC;IAAEjG,EAAE;IAAEC;EAAE,CAAQ,EAAEqC,GAAQ;IACjC,MAAM;MAAEiE;IAAG,CAAE,GAAG,IAAI;IACpB,OAAO;MACLvG,EAAE,EAAEuG,GAAG,CAACN,QAAQ,CAACjG,EAAE,EAAEsC,GAAG,CAAC;MACzBrC,EAAE,EAAEsG,GAAG,CAACN,QAAQ,CAAChG,EAAE,EAAEqC,GAAG;KACzB;EACH;EACAwE,SAASA,CAAC;IAAE9G,EAAE;IAAEC;EAAE,CAAQ;IACxB,OAAO;MAAED,EAAE;MAAEC,EAAE,EAAE,IAAI,CAACsG,GAAG,CAAC5H,GAAG,CAACsB,EAAE;IAAC,CAAE;EACrC;EACA;EACA8G,MAAMA,CAAC;IAAE/G,EAAE;IAAEC;EAAE,CAAQ,EAAEwC,EAAO,EAAEC,EAAO,EAAEsE,EAAO;IAChD,MAAM;MAAET;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAE3I;IAAG,CAAE,GAAG2I,GAAG;IACnB,IAAIhB,EAAE,GAAGgB,GAAG,CAACH,KAAK,CAACpG,EAAE,EAAEyC,EAAE,EAAEC,EAAE,CAAC;IAC9B,IAAIH,EAAE,GAAGgE,GAAG,CAACL,IAAI,CAACjG,EAAE,EAAE+G,EAAE,CAAC;IACzB,OAAO;MACLhH,EAAE,EAAEuG,GAAG,CAACrE,GAAG,CAACqE,GAAG,CAACxB,eAAe,CAACxC,EAAE,CAAC,EAAEgD,EAAE,CAAC;MAAE;MAC1C;MACAtF,EAAE,EAAEsG,GAAG,CAAClE,GAAG,CAACkE,GAAG,CAAClE,GAAG,CAACkE,GAAG,CAACH,KAAK,CAACG,GAAG,CAACrE,GAAG,CAACjC,EAAE,EAAED,EAAE,CAAC,EAAEyC,EAAE,EAAE7E,GAAG,CAACsE,GAAG,CAACQ,EAAE,EAAEsE,EAAE,CAAC,CAAC,EAAEzB,EAAE,CAAC,EAAEhD,EAAE;KAC7E;EACH;EACA0E,MAAMA,CAAC;IAAEjH,EAAE;IAAEC;EAAE,CAAQ,EAAEwC,EAAO,EAAEyE,EAAO,EAAEF,EAAO;IAChD,MAAM;MAAET;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAE3I;IAAG,CAAE,GAAG2I,GAAG;IACnB,MAAMnJ,CAAC,GAAGmJ,GAAG,CAACxG,MAAM,CAAC;MACnBC,EAAE,EAAEpC,GAAG,CAACS,GAAG,CAAC2B,EAAE,CAACA,EAAE,EAAEyC,EAAE,CAAC;MACtBxC,EAAE,EAAErC,GAAG,CAACS,GAAG,CAAC2B,EAAE,CAACC,EAAE,EAAEwC,EAAE,CAAC;MACtByC,EAAE,EAAEtH,GAAG,CAACS,GAAG,CAAC2B,EAAE,CAACkF,EAAE,EAAEzC,EAAE;KACtB,CAAC;IACF,MAAMG,CAAC,GAAG2D,GAAG,CAACH,KAAK,CAACnG,EAAE,EAAEiH,EAAE,EAAEF,EAAE,CAAC;IAC/B,MAAMG,CAAC,GAAGZ,GAAG,CAACH,KAAK,CAACG,GAAG,CAACrE,GAAG,CAAClC,EAAE,EAAEC,EAAE,CAAC,EAAErC,GAAG,CAACsE,GAAG,CAACO,EAAE,EAAEyE,EAAE,CAAC,EAAEF,EAAE,CAAC;IACzD,OAAO;MACLhH,EAAE,EAAEuG,GAAG,CAACrE,GAAG,CAACqE,GAAG,CAACxB,eAAe,CAACnC,CAAC,CAAC,EAAExF,CAAC,CAAC;MACtC6C,EAAE,EAAEsG,GAAG,CAAClE,GAAG,CAAC8E,CAAC,EAAEZ,GAAG,CAACrE,GAAG,CAAC9E,CAAC,EAAEwF,CAAC,CAAC;KAC7B;EACH;EAEA;EACA;EACA;EACA;EACA;EACAwE,iBAAiBA,CAAC;IAAEpH,EAAE;IAAEC;EAAE,CAAQ;IAChC,MAAM;MAAEsG;IAAG,CAAE,GAAG,IAAI;IACpB,MAAM;MAAE3I;IAAG,CAAE,GAAG2I,GAAG;IACnB,MAAM;MAAEvG,EAAE,EAAEqH,IAAI;MAAEpH,EAAE,EAAEqH,IAAI;MAAEpC,EAAE,EAAEqC;IAAI,CAAE,GAAGvH,EAAE;IAC3C,MAAM;MAAEA,EAAE,EAAEwH,IAAI;MAAEvH,EAAE,EAAEwH,IAAI;MAAEvC,EAAE,EAAEwC;IAAI,CAAE,GAAGzH,EAAE;IAC3C,MAAM;MAAE6E,KAAK,EAAEU,EAAE;MAAER,MAAM,EAAES;IAAE,CAAE,GAAG7H,GAAG,CAAC+G,SAAS,CAAC0C,IAAI,EAAEI,IAAI,CAAC;IAC3D,MAAM;MAAE3C,KAAK,EAAE6C,EAAE;MAAE3C,MAAM,EAAE4C;IAAE,CAAE,GAAGhK,GAAG,CAAC+G,SAAS,CAAC6C,IAAI,EAAED,IAAI,CAAC;IAC3D,MAAM;MAAEzC,KAAK,EAAE+C,EAAE;MAAE7C,MAAM,EAAE8C;IAAE,CAAE,GAAGlK,GAAG,CAAC+G,SAAS,CAAC2C,IAAI,EAAEI,IAAI,CAAC;IAC3D,MAAMK,EAAE,GAAGnK,GAAG,CAACmH,eAAe,CAAC+C,EAAE,CAAC,CAAC,CAAC;IACpC,OAAO;MACL9H,EAAE,EAAEuG,GAAG,CAACxG,MAAM,CAAC;QACbC,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACyE,GAAG,CAACmD,EAAE,EAAE6B,IAAI,CAAC,EAAE/K,GAAG,CAAC,EAAEkJ,EAAE,CAAC;QAAE;QAClDvF,EAAE,EAAErC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACyE,GAAG,CAACsF,EAAE,EAAEL,IAAI,CAAC,EAAEhL,GAAG,CAAC,EAAEqL,EAAE,CAAC;QAAE;QAClDzC,EAAE,EAAEtH,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACyE,GAAG,CAACwF,EAAE,EAAEN,IAAI,CAAC,EAAEjL,GAAG,CAAC,EAAEuL,EAAE;OAChD,CAAC;MAAE;MACJ5H,EAAE,EAAEsG,GAAG,CAACxG,MAAM,CAAC;QACbC,EAAE,EAAEpC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAAC6F,EAAE,EAAEP,IAAI,CAAC,EAAElL,GAAG,CAAC,EAAEyL,EAAE,CAAC;QAAE;QAClD9H,EAAE,EAAErC,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAACuD,EAAE,EAAEgC,IAAI,CAAC,EAAEnL,GAAG,CAAC,EAAEmJ,EAAE,CAAC;QAAE;QAClDP,EAAE,EAAEtH,GAAG,CAACsE,GAAG,CAACtE,GAAG,CAACS,GAAG,CAACT,GAAG,CAACsE,GAAG,CAAC0F,EAAE,EAAEF,IAAI,CAAC,EAAEpL,GAAG,CAAC,EAAEsL,EAAE;OAChD;KACF,CAAC,CAAC;EACL;EACA;EACAI,cAAcA,CAACnL,GAAS,EAAEiD,CAAS;IACjC,IAAImI,CAAC,GAAG,IAAI,CAACrJ,GAAG;IAChB,KAAK,IAAIzB,CAAC,GAAG,IAAI,CAACqJ,KAAK,GAAG,CAAC,EAAErJ,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MACxC8K,CAAC,GAAG,IAAI,CAACb,iBAAiB,CAACa,CAAC,CAAC;MAC7B,IAAInM,MAAM,CAACgE,CAAC,EAAE3C,CAAC,CAAC,EAAE8K,CAAC,GAAG,IAAI,CAAC5J,GAAG,CAAC4J,CAAC,EAAEpL,GAAG,CAAC;IACxC;IACA,OAAOoL,CAAC;EACV;;AAGF,OAAM,SAAUC,OAAOA,CAAC9H,IAAiB;EAMvC,MAAM3D,EAAE,GAAGP,GAAG,CAACiM,KAAK,CAAC/H,IAAI,CAACrC,KAAK,CAAC;EAChC,MAAMH,GAAG,GAAG,IAAIsC,OAAO,CAACzD,EAAE,EAAE2D,IAAI,CAAC;EACjC,MAAMmG,GAAG,GAAG,IAAItB,OAAO,CAACrH,GAAG,CAAC;EAC5B,MAAMwK,IAAI,GAAG,IAAI9B,QAAQ,CAACC,GAAG,EAAEnG,IAAI,CAAC;EACpC,OAAO;IAAE3D,EAAE;IAAEmB,GAAG;IAAE2I,GAAG;IAAE6B;EAAI,CAAE;AAC/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}