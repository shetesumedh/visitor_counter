{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEnsAddress = getEnsAddress;\nconst abis_js_1 = require(\"../../constants/abis.js\");\nconst decodeFunctionResult_js_1 = require(\"../../utils/abi/decodeFunctionResult.js\");\nconst encodeFunctionData_js_1 = require(\"../../utils/abi/encodeFunctionData.js\");\nconst getChainContractAddress_js_1 = require(\"../../utils/chain/getChainContractAddress.js\");\nconst trim_js_1 = require(\"../../utils/data/trim.js\");\nconst toHex_js_1 = require(\"../../utils/encoding/toHex.js\");\nconst errors_js_1 = require(\"../../utils/ens/errors.js\");\nconst localBatchGatewayRequest_js_1 = require(\"../../utils/ens/localBatchGatewayRequest.js\");\nconst namehash_js_1 = require(\"../../utils/ens/namehash.js\");\nconst packetToBytes_js_1 = require(\"../../utils/ens/packetToBytes.js\");\nconst getAction_js_1 = require(\"../../utils/getAction.js\");\nconst readContract_js_1 = require(\"../public/readContract.js\");\nasync function getEnsAddress(client, parameters) {\n  const {\n    blockNumber,\n    blockTag,\n    coinType,\n    name,\n    gatewayUrls,\n    strict\n  } = parameters;\n  const {\n    chain\n  } = client;\n  const universalResolverAddress = (() => {\n    if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n    if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n    return (0, getChainContractAddress_js_1.getChainContractAddress)({\n      blockNumber,\n      chain,\n      contract: 'ensUniversalResolver'\n    });\n  })();\n  const tlds = chain?.ensTlds;\n  if (tlds && !tlds.some(tld => name.endsWith(tld))) return null;\n  try {\n    const functionData = (0, encodeFunctionData_js_1.encodeFunctionData)({\n      abi: abis_js_1.addressResolverAbi,\n      functionName: 'addr',\n      ...(coinType != null ? {\n        args: [(0, namehash_js_1.namehash)(name), BigInt(coinType)]\n      } : {\n        args: [(0, namehash_js_1.namehash)(name)]\n      })\n    });\n    const readContractParameters = {\n      address: universalResolverAddress,\n      abi: abis_js_1.universalResolverResolveAbi,\n      functionName: 'resolve',\n      args: [(0, toHex_js_1.toHex)((0, packetToBytes_js_1.packetToBytes)(name)), functionData, gatewayUrls ?? [localBatchGatewayRequest_js_1.localBatchGatewayUrl]],\n      blockNumber,\n      blockTag\n    };\n    const readContractAction = (0, getAction_js_1.getAction)(client, readContract_js_1.readContract, 'readContract');\n    const res = await readContractAction(readContractParameters);\n    if (res[0] === '0x') return null;\n    const address = (0, decodeFunctionResult_js_1.decodeFunctionResult)({\n      abi: abis_js_1.addressResolverAbi,\n      args: coinType != null ? [(0, namehash_js_1.namehash)(name), BigInt(coinType)] : undefined,\n      functionName: 'addr',\n      data: res[0]\n    });\n    if (address === '0x') return null;\n    if ((0, trim_js_1.trim)(address) === '0x00') return null;\n    return address;\n  } catch (err) {\n    if (strict) throw err;\n    if ((0, errors_js_1.isNullUniversalResolverError)(err, 'resolve')) return null;\n    throw err;\n  }\n}","map":{"version":3,"names":["exports","getEnsAddress","abis_js_1","require","decodeFunctionResult_js_1","encodeFunctionData_js_1","getChainContractAddress_js_1","trim_js_1","toHex_js_1","errors_js_1","localBatchGatewayRequest_js_1","namehash_js_1","packetToBytes_js_1","getAction_js_1","readContract_js_1","client","parameters","blockNumber","blockTag","coinType","name","gatewayUrls","strict","chain","universalResolverAddress","Error","getChainContractAddress","contract","tlds","ensTlds","some","tld","endsWith","functionData","encodeFunctionData","abi","addressResolverAbi","functionName","args","namehash","BigInt","readContractParameters","address","universalResolverResolveAbi","toHex","packetToBytes","localBatchGatewayUrl","readContractAction","getAction","readContract","res","decodeFunctionResult","undefined","data","trim","err","isNullUniversalResolverError"],"sources":["/home/sumedhshete/visitor-counter/frontend_sepolia/node_modules/viem/actions/ens/getEnsAddress.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport {\n  addressResolverAbi,\n  universalResolverResolveAbi,\n} from '../../constants/abis.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { Prettify } from '../../types/utils.js'\nimport {\n  type DecodeFunctionResultErrorType,\n  decodeFunctionResult,\n} from '../../utils/abi/decodeFunctionResult.js'\nimport {\n  type EncodeFunctionDataErrorType,\n  encodeFunctionData,\n} from '../../utils/abi/encodeFunctionData.js'\nimport {\n  type GetChainContractAddressErrorType,\n  getChainContractAddress,\n} from '../../utils/chain/getChainContractAddress.js'\nimport { type TrimErrorType, trim } from '../../utils/data/trim.js'\nimport { type ToHexErrorType, toHex } from '../../utils/encoding/toHex.js'\nimport { isNullUniversalResolverError } from '../../utils/ens/errors.js'\nimport { localBatchGatewayUrl } from '../../utils/ens/localBatchGatewayRequest.js'\nimport { type NamehashErrorType, namehash } from '../../utils/ens/namehash.js'\nimport {\n  type PacketToBytesErrorType,\n  packetToBytes,\n} from '../../utils/ens/packetToBytes.js'\nimport { getAction } from '../../utils/getAction.js'\nimport {\n  type ReadContractParameters,\n  readContract,\n} from '../public/readContract.js'\n\nexport type GetEnsAddressParameters = Prettify<\n  Pick<ReadContractParameters, 'blockNumber' | 'blockTag'> & {\n    /** ENSIP-9 compliant coinType used to resolve addresses for other chains */\n    coinType?: number | undefined\n    /** Universal Resolver gateway URLs to use for resolving CCIP-read requests. */\n    gatewayUrls?: string[] | undefined\n    /** Name to get the address for. */\n    name: string\n    /** Whether or not to throw errors propagated from the ENS Universal Resolver Contract. */\n    strict?: boolean | undefined\n    /** Address of ENS Universal Resolver Contract. */\n    universalResolverAddress?: Address | undefined\n  }\n>\n\nexport type GetEnsAddressReturnType = Address | null\n\nexport type GetEnsAddressErrorType =\n  | GetChainContractAddressErrorType\n  | EncodeFunctionDataErrorType\n  | NamehashErrorType\n  | ToHexErrorType\n  | PacketToBytesErrorType\n  | DecodeFunctionResultErrorType\n  | TrimErrorType\n  | ErrorType\n\n/**\n * Gets address for ENS name.\n *\n * - Docs: https://viem.sh/docs/ens/actions/getEnsAddress\n * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n *\n * Calls `resolve(bytes, bytes)` on ENS Universal Resolver Contract.\n *\n * Since ENS names prohibit certain forbidden characters (e.g. underscore) and have other validation rules, you likely want to [normalize ENS names](https://docs.ens.domains/contract-api-reference/name-processing#normalising-names) with [UTS-46 normalization](https://unicode.org/reports/tr46) before passing them to `getEnsAddress`. You can use the built-in [`normalize`](https://viem.sh/docs/ens/utilities/normalize) function for this.\n *\n * @param client - Client to use\n * @param parameters - {@link GetEnsAddressParameters}\n * @returns Address for ENS name or `null` if not found. {@link GetEnsAddressReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getEnsAddress, normalize } from 'viem/ens'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const ensAddress = await getEnsAddress(client, {\n *   name: normalize('wevm.eth'),\n * })\n * // '0xd2135CfB216b74109775236E36d4b433F1DF507B'\n */\nexport async function getEnsAddress<chain extends Chain | undefined>(\n  client: Client<Transport, chain>,\n  parameters: GetEnsAddressParameters,\n): Promise<GetEnsAddressReturnType> {\n  const { blockNumber, blockTag, coinType, name, gatewayUrls, strict } =\n    parameters\n  const { chain } = client\n\n  const universalResolverAddress = (() => {\n    if (parameters.universalResolverAddress)\n      return parameters.universalResolverAddress\n    if (!chain)\n      throw new Error(\n        'client chain not configured. universalResolverAddress is required.',\n      )\n    return getChainContractAddress({\n      blockNumber,\n      chain,\n      contract: 'ensUniversalResolver',\n    })\n  })()\n\n  const tlds = chain?.ensTlds\n  if (tlds && !tlds.some((tld) => name.endsWith(tld))) return null\n\n  try {\n    const functionData = encodeFunctionData({\n      abi: addressResolverAbi,\n      functionName: 'addr',\n      ...(coinType != null\n        ? { args: [namehash(name), BigInt(coinType)] }\n        : { args: [namehash(name)] }),\n    })\n\n    const readContractParameters = {\n      address: universalResolverAddress,\n      abi: universalResolverResolveAbi,\n      functionName: 'resolve',\n      args: [\n        toHex(packetToBytes(name)),\n        functionData,\n        gatewayUrls ?? [localBatchGatewayUrl],\n      ],\n      blockNumber,\n      blockTag,\n    } as const\n\n    const readContractAction = getAction(client, readContract, 'readContract')\n\n    const res = await readContractAction(readContractParameters)\n\n    if (res[0] === '0x') return null\n\n    const address = decodeFunctionResult({\n      abi: addressResolverAbi,\n      args: coinType != null ? [namehash(name), BigInt(coinType)] : undefined,\n      functionName: 'addr',\n      data: res[0],\n    })\n\n    if (address === '0x') return null\n    if (trim(address) === '0x00') return null\n    return address\n  } catch (err) {\n    if (strict) throw err\n    if (isNullUniversalResolverError(err, 'resolve')) return null\n    throw err\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}