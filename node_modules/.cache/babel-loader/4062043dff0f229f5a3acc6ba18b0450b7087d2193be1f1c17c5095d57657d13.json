{"ast":null,"code":"var _jsxFileName = \"/home/sumedhshete/visitor-counter/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { WagmiConfig, createConfig, useAccount, useConnect, useDisconnect } from \"wagmi\";\nimport { injectedConnector } from \"wagmi/connectors/injected\";\nimport { ethers } from \"ethers\";\n\n// Replace with your deployed contract address from deployment\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CONTRACT_ADDRESS = \"0xAeE47FF0114fB8A20cF93eB5CBc2b9663b5fF75a\";\n\n// Your contract ABI with only the parts you will use\nconst CONTRACT_ABI = [\"function connect() public\", \"function totalVisitors() public view returns (uint256)\"];\n\n// Prepare Wagmi config for wallet connection\nconst config = createConfig({\n  autoConnect: true,\n  connectors: [injectedConnector()]\n});\nfunction AppContent() {\n  _s();\n  const {\n    address,\n    isConnected\n  } = useAccount();\n  const {\n    connect\n  } = useConnect();\n  const {\n    disconnect\n  } = useDisconnect();\n  const [visitorCount, setVisitorCount] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [txPending, setTxPending] = useState(false);\n\n  // Contract instance helper\n  function getContract(signerOrProvider) {\n    return new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signerOrProvider);\n  }\n\n  // Fetch visitor count from contract (read-only)\n  async function fetchVisitorCount() {\n    try {\n      setLoading(true);\n      if (!window.ethereum) {\n        alert(\"Please install MetaMask or compatible wallet\");\n        return;\n      }\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const contract = getContract(provider);\n      const count = await contract.totalVisitors();\n      setVisitorCount(count.toNumber());\n    } catch (error) {\n      console.error(\"Failed to fetch visitor count\", error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Call connect() to register visit (write transaction)\n  async function registerVisit() {\n    try {\n      if (!window.ethereum) {\n        alert(\"Please install MetaMask or compatible wallet\");\n        return;\n      }\n      setTxPending(true);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const contract = getContract(signer);\n      const tx = await contract.connect();\n      await tx.wait();\n      alert(\"Visit registered successfully!\");\n      fetchVisitorCount();\n    } catch (error) {\n      console.error(error);\n      alert(\"Transaction failed or rejected.\");\n    } finally {\n      setTxPending(false);\n    }\n  }\n  useEffect(() => {\n    if (isConnected) {\n      fetchVisitorCount();\n    } else {\n      setVisitorCount(null);\n    }\n  }, [isConnected]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: \"2rem auto\",\n      padding: \"1rem\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Visitor Wallet Counter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), !isConnected ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => connect(),\n      children: \"Connect Wallet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Connected wallet:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 14\n        }, this), \" \", address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: registerVisit,\n        disabled: txPending,\n        children: txPending ? \"Registering visit...\" : \"Register Visit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => disconnect(),\n        style: {\n          marginLeft: \"1rem\"\n        },\n        children: \"Disconnect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1.5rem\"\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading visitor count...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this) : visitorCount !== null && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total unique visitors:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 39\n        }, this), \" \", visitorCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"oD6WRWoXGCrgM0FkFjdSUQh/U9U=\", false, function () {\n  return [useAccount, useConnect, useDisconnect];\n});\n_c = AppContent;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(WagmiConfig, {\n    config: config,\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useEffect","useState","WagmiConfig","createConfig","useAccount","useConnect","useDisconnect","injectedConnector","ethers","jsxDEV","_jsxDEV","Fragment","_Fragment","CONTRACT_ADDRESS","CONTRACT_ABI","config","autoConnect","connectors","AppContent","_s","address","isConnected","connect","disconnect","visitorCount","setVisitorCount","loading","setLoading","txPending","setTxPending","getContract","signerOrProvider","Contract","fetchVisitorCount","window","ethereum","alert","provider","providers","Web3Provider","contract","count","totalVisitors","toNumber","error","console","registerVisit","signer","getSigner","tx","wait","style","maxWidth","margin","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","marginLeft","marginTop","_c","App","_c2","$RefreshReg$"],"sources":["/home/sumedhshete/visitor-counter/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { WagmiConfig, createConfig, useAccount, useConnect, useDisconnect } from \"wagmi\";\nimport { injectedConnector } from \"wagmi/connectors/injected\";\nimport { ethers } from \"ethers\";\n\n// Replace with your deployed contract address from deployment\nconst CONTRACT_ADDRESS = \"0xAeE47FF0114fB8A20cF93eB5CBc2b9663b5fF75a\";\n\n// Your contract ABI with only the parts you will use\nconst CONTRACT_ABI = [\n  \"function connect() public\",\n  \"function totalVisitors() public view returns (uint256)\"\n];\n\n// Prepare Wagmi config for wallet connection\nconst config = createConfig({\n  autoConnect: true,\n  connectors: [injectedConnector()],\n});\n\nfunction AppContent() {\n  const { address, isConnected } = useAccount();\n  const { connect } = useConnect();\n  const { disconnect } = useDisconnect();\n\n  const [visitorCount, setVisitorCount] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [txPending, setTxPending] = useState(false);\n\n  // Contract instance helper\n  function getContract(signerOrProvider) {\n    return new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signerOrProvider);\n  }\n\n  // Fetch visitor count from contract (read-only)\n  async function fetchVisitorCount() {\n    try {\n      setLoading(true);\n      if (!window.ethereum) {\n        alert(\"Please install MetaMask or compatible wallet\");\n        return;\n      }\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const contract = getContract(provider);\n      const count = await contract.totalVisitors();\n      setVisitorCount(count.toNumber());\n    } catch (error) {\n      console.error(\"Failed to fetch visitor count\", error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Call connect() to register visit (write transaction)\n  async function registerVisit() {\n    try {\n      if (!window.ethereum) {\n        alert(\"Please install MetaMask or compatible wallet\");\n        return;\n      }\n      setTxPending(true);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const contract = getContract(signer);\n\n      const tx = await contract.connect();\n      await tx.wait();\n      alert(\"Visit registered successfully!\");\n      fetchVisitorCount();\n    } catch (error) {\n      console.error(error);\n      alert(\"Transaction failed or rejected.\");\n    } finally {\n      setTxPending(false);\n    }\n  }\n\n  useEffect(() => {\n    if (isConnected) {\n      fetchVisitorCount();\n    } else {\n      setVisitorCount(null);\n    }\n  }, [isConnected]);\n\n  return (\n    <div style={{ maxWidth: 600, margin: \"2rem auto\", padding: \"1rem\", fontFamily: \"Arial, sans-serif\" }}>\n      <h1>Visitor Wallet Counter</h1>\n\n      {!isConnected ? (\n        <button onClick={() => connect()}>Connect Wallet</button>\n      ) : (\n        <>\n          <p><strong>Connected wallet:</strong> {address}</p>\n          <button onClick={registerVisit} disabled={txPending}>\n            {txPending ? \"Registering visit...\" : \"Register Visit\"}\n          </button>\n          <button onClick={() => disconnect()} style={{ marginLeft: \"1rem\" }}>Disconnect</button>\n        </>\n      )}\n\n      <div style={{ marginTop: \"1.5rem\" }}>\n        {loading ? (\n          <p>Loading visitor count...</p>\n        ) : (\n          visitorCount !== null && <p><strong>Total unique visitors:</strong> {visitorCount}</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <WagmiConfig config={config}>\n      <AppContent />\n    </WagmiConfig>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}