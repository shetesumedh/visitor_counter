{"ast":null,"code":"import { proxy } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { AssetUtil } from '../utils/AssetUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { CUSTOM_DEEPLINK_WALLETS } from '../utils/MobileWallet.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AssetController } from './AssetController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { OptionsController } from './OptionsController.js';\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getApiUrl();\nexport const api = new FetchUtil({\n  baseUrl,\n  clientId: null\n});\nconst entries = 40;\nconst recommendedEntries = 4;\nconst imageCountToFetch = 20;\n// -- State --------------------------------------------- //\nconst state = proxy({\n  promises: {},\n  page: 1,\n  count: 0,\n  featured: [],\n  allFeatured: [],\n  recommended: [],\n  allRecommended: [],\n  wallets: [],\n  filteredWallets: [],\n  search: [],\n  isAnalyticsEnabled: false,\n  excludedWallets: [],\n  isFetchingRecommendedWallets: false\n});\n// -- Controller ---------------------------------------- //\nexport const ApiController = {\n  state,\n  subscribeKey(key, callback) {\n    return subKey(state, key, callback);\n  },\n  _getSdkProperties() {\n    const {\n      projectId,\n      sdkType,\n      sdkVersion\n    } = OptionsController.state;\n    return {\n      projectId,\n      st: sdkType || 'appkit',\n      sv: sdkVersion || 'html-wagmi-4.2.2'\n    };\n  },\n  _filterOutExtensions(wallets) {\n    if (OptionsController.state.isUniversalProvider) {\n      return wallets.filter(w => Boolean(w.mobile_link || w.desktop_link || w.webapp_link));\n    }\n    return wallets;\n  },\n  async _fetchWalletImage(imageId) {\n    const imageUrl = `${api.baseUrl}/getWalletImage/${imageId}`;\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setWalletImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchNetworkImage(imageId) {\n    const imageUrl = `${api.baseUrl}/public/getAssetImage/${imageId}`;\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setNetworkImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchConnectorImage(imageId) {\n    const imageUrl = `${api.baseUrl}/public/getAssetImage/${imageId}`;\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setConnectorImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchCurrencyImage(countryCode) {\n    const imageUrl = `${api.baseUrl}/public/getCurrencyImage/${countryCode}`;\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setCurrencyImage(countryCode, URL.createObjectURL(blob));\n  },\n  async _fetchTokenImage(symbol) {\n    const imageUrl = `${api.baseUrl}/public/getTokenImage/${symbol}`;\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setTokenImage(symbol, URL.createObjectURL(blob));\n  },\n  _filterWalletsByPlatform(wallets) {\n    const filteredWallets = CoreHelperUtil.isMobile() ? wallets?.filter(w => {\n      if (w.mobile_link) {\n        return true;\n      }\n      if (w.id === CUSTOM_DEEPLINK_WALLETS.COINBASE.id) {\n        return true;\n      }\n      const isSolana = ChainController.state.activeChain === 'solana';\n      return isSolana && (w.id === CUSTOM_DEEPLINK_WALLETS.SOLFLARE.id || w.id === CUSTOM_DEEPLINK_WALLETS.PHANTOM.id);\n    }) : wallets;\n    return filteredWallets;\n  },\n  async fetchProjectConfig() {\n    const response = await api.get({\n      path: '/appkit/v1/config',\n      params: ApiController._getSdkProperties()\n    });\n    return response.features;\n  },\n  async fetchAllowedOrigins() {\n    try {\n      const {\n        allowedOrigins\n      } = await api.get({\n        path: '/projects/v1/origins',\n        params: ApiController._getSdkProperties()\n      });\n      return allowedOrigins;\n    } catch (error) {\n      return [];\n    }\n  },\n  async fetchNetworkImages() {\n    const requestedCaipNetworks = ChainController.getAllRequestedCaipNetworks();\n    const ids = requestedCaipNetworks?.map(({\n      assets\n    }) => assets?.imageId).filter(Boolean).filter(imageId => !AssetUtil.getNetworkImageById(imageId));\n    if (ids) {\n      await Promise.allSettled(ids.map(id => ApiController._fetchNetworkImage(id)));\n    }\n  },\n  async fetchConnectorImages() {\n    const {\n      connectors\n    } = ConnectorController.state;\n    const ids = connectors.map(({\n      imageId\n    }) => imageId).filter(Boolean);\n    await Promise.allSettled(ids.map(id => ApiController._fetchConnectorImage(id)));\n  },\n  async fetchCurrencyImages(currencies = []) {\n    await Promise.allSettled(currencies.map(currency => ApiController._fetchCurrencyImage(currency)));\n  },\n  async fetchTokenImages(tokens = []) {\n    await Promise.allSettled(tokens.map(token => ApiController._fetchTokenImage(token)));\n  },\n  async fetchWallets(params) {\n    const exclude = params.exclude ?? [];\n    const sdkProperties = ApiController._getSdkProperties();\n    if (sdkProperties.sv.startsWith('html-core-')) {\n      exclude.push(...Object.values(CUSTOM_DEEPLINK_WALLETS).map(w => w.id));\n    }\n    const wallets = await api.get({\n      path: '/getWallets',\n      params: {\n        ...ApiController._getSdkProperties(),\n        ...params,\n        page: String(params.page),\n        entries: String(params.entries),\n        include: params.include?.join(','),\n        exclude: exclude.join(',')\n      }\n    });\n    const filteredWallets = ApiController._filterWalletsByPlatform(wallets?.data);\n    return {\n      data: filteredWallets || [],\n      // Keep original count for display on main page\n      count: wallets?.count\n    };\n  },\n  async fetchFeaturedWallets() {\n    const {\n      featuredWalletIds\n    } = OptionsController.state;\n    if (featuredWalletIds?.length) {\n      const params = {\n        ...ApiController._getSdkProperties(),\n        page: 1,\n        entries: featuredWalletIds?.length ?? recommendedEntries,\n        include: featuredWalletIds\n      };\n      const {\n        data\n      } = await ApiController.fetchWallets(params);\n      const sortedData = [...data].sort((a, b) => featuredWalletIds.indexOf(a.id) - featuredWalletIds.indexOf(b.id));\n      const images = sortedData.map(d => d.image_id).filter(Boolean);\n      await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n      state.featured = sortedData;\n      state.allFeatured = sortedData;\n    }\n  },\n  async fetchRecommendedWallets() {\n    try {\n      state.isFetchingRecommendedWallets = true;\n      const {\n        includeWalletIds,\n        excludeWalletIds,\n        featuredWalletIds\n      } = OptionsController.state;\n      const exclude = [...(excludeWalletIds ?? []), ...(featuredWalletIds ?? [])].filter(Boolean);\n      const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n      const params = {\n        page: 1,\n        entries: recommendedEntries,\n        include: includeWalletIds,\n        exclude,\n        chains\n      };\n      const {\n        data,\n        count\n      } = await ApiController.fetchWallets(params);\n      const recent = StorageUtil.getRecentWallets();\n      const recommendedImages = data.map(d => d.image_id).filter(Boolean);\n      const recentImages = recent.map(r => r.image_id).filter(Boolean);\n      await Promise.allSettled([...recommendedImages, ...recentImages].map(id => ApiController._fetchWalletImage(id)));\n      state.recommended = data;\n      state.allRecommended = data;\n      state.count = count ?? 0;\n    } catch {\n      // Catch silently\n    } finally {\n      state.isFetchingRecommendedWallets = false;\n    }\n  },\n  async fetchWalletsByPage({\n    page\n  }) {\n    const {\n      includeWalletIds,\n      excludeWalletIds,\n      featuredWalletIds\n    } = OptionsController.state;\n    const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n    const exclude = [...state.recommended.map(({\n      id\n    }) => id), ...(excludeWalletIds ?? []), ...(featuredWalletIds ?? [])].filter(Boolean);\n    const params = {\n      page,\n      entries,\n      include: includeWalletIds,\n      exclude,\n      chains\n    };\n    const {\n      data,\n      count\n    } = await ApiController.fetchWallets(params);\n    const images = data.slice(0, imageCountToFetch).map(w => w.image_id).filter(Boolean);\n    await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n    state.wallets = CoreHelperUtil.uniqueBy([...state.wallets, ...ApiController._filterOutExtensions(data)], 'id').filter(w => w.chains?.some(chain => chains.includes(chain)));\n    state.count = count > state.count ? count : state.count;\n    state.page = page;\n  },\n  async initializeExcludedWallets({\n    ids\n  }) {\n    const params = {\n      page: 1,\n      entries: ids.length,\n      include: ids\n    };\n    const {\n      data\n    } = await ApiController.fetchWallets(params);\n    if (data) {\n      data.forEach(wallet => {\n        state.excludedWallets.push({\n          rdns: wallet.rdns,\n          name: wallet.name\n        });\n      });\n    }\n  },\n  async searchWallet({\n    search,\n    badge\n  }) {\n    const {\n      includeWalletIds,\n      excludeWalletIds\n    } = OptionsController.state;\n    const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.search = [];\n    const params = {\n      page: 1,\n      entries: 100,\n      search: search?.trim(),\n      badge_type: badge,\n      include: includeWalletIds,\n      exclude: excludeWalletIds,\n      chains\n    };\n    const {\n      data\n    } = await ApiController.fetchWallets(params);\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'SEARCH_WALLET',\n      properties: {\n        badge: badge ?? '',\n        search: search ?? ''\n      }\n    });\n    const images = data.map(w => w.image_id).filter(Boolean);\n    await Promise.allSettled([...images.map(id => ApiController._fetchWalletImage(id)), CoreHelperUtil.wait(300)]);\n    state.search = ApiController._filterOutExtensions(data);\n  },\n  initPromise(key, fetchFn) {\n    const existingPromise = state.promises[key];\n    if (existingPromise) {\n      return existingPromise;\n    }\n    return state.promises[key] = fetchFn();\n  },\n  prefetch({\n    fetchConnectorImages = true,\n    fetchFeaturedWallets = true,\n    fetchRecommendedWallets = true,\n    fetchNetworkImages = true\n  } = {}) {\n    const promises = [fetchConnectorImages && ApiController.initPromise('connectorImages', ApiController.fetchConnectorImages), fetchFeaturedWallets && ApiController.initPromise('featuredWallets', ApiController.fetchFeaturedWallets), fetchRecommendedWallets && ApiController.initPromise('recommendedWallets', ApiController.fetchRecommendedWallets), fetchNetworkImages && ApiController.initPromise('networkImages', ApiController.fetchNetworkImages)].filter(Boolean);\n    return Promise.allSettled(promises);\n  },\n  prefetchAnalyticsConfig() {\n    if (OptionsController.state.features?.analytics) {\n      ApiController.fetchAnalyticsConfig();\n    }\n  },\n  async fetchAnalyticsConfig() {\n    try {\n      const {\n        isAnalyticsEnabled\n      } = await api.get({\n        path: '/getAnalyticsConfig',\n        params: ApiController._getSdkProperties()\n      });\n      OptionsController.setFeatures({\n        analytics: isAnalyticsEnabled\n      });\n    } catch (error) {\n      OptionsController.setFeatures({\n        analytics: false\n      });\n    }\n  },\n  filterByNamespaces(namespaces) {\n    if (!namespaces?.length) {\n      state.featured = state.allFeatured;\n      state.recommended = state.allRecommended;\n      return;\n    }\n    const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.featured = state.allFeatured.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n    state.recommended = state.allRecommended.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n    state.filteredWallets = state.wallets.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n  },\n  clearFilterByNamespaces() {\n    state.filteredWallets = [];\n  },\n  setFilterByNamespace(namespace) {\n    if (!namespace) {\n      state.featured = state.allFeatured;\n      state.recommended = state.allRecommended;\n      return;\n    }\n    const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.featured = state.allFeatured.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n    state.recommended = state.allRecommended.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n    state.filteredWallets = state.wallets.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n  }\n};","map":{"version":3,"names":["proxy","subscribeKey","subKey","AssetUtil","CoreHelperUtil","FetchUtil","CUSTOM_DEEPLINK_WALLETS","StorageUtil","AssetController","ChainController","ConnectorController","EventsController","OptionsController","baseUrl","getApiUrl","api","clientId","entries","recommendedEntries","imageCountToFetch","state","promises","page","count","featured","allFeatured","recommended","allRecommended","wallets","filteredWallets","search","isAnalyticsEnabled","excludedWallets","isFetchingRecommendedWallets","ApiController","key","callback","_getSdkProperties","projectId","sdkType","sdkVersion","st","sv","_filterOutExtensions","isUniversalProvider","filter","w","Boolean","mobile_link","desktop_link","webapp_link","_fetchWalletImage","imageId","imageUrl","blob","getBlob","path","params","setWalletImage","URL","createObjectURL","_fetchNetworkImage","setNetworkImage","_fetchConnectorImage","setConnectorImage","_fetchCurrencyImage","countryCode","setCurrencyImage","_fetchTokenImage","symbol","setTokenImage","_filterWalletsByPlatform","isMobile","id","COINBASE","isSolana","activeChain","SOLFLARE","PHANTOM","fetchProjectConfig","response","get","features","fetchAllowedOrigins","allowedOrigins","error","fetchNetworkImages","requestedCaipNetworks","getAllRequestedCaipNetworks","ids","map","assets","getNetworkImageById","Promise","allSettled","fetchConnectorImages","connectors","fetchCurrencyImages","currencies","currency","fetchTokenImages","tokens","token","fetchWallets","exclude","sdkProperties","startsWith","push","Object","values","String","include","join","data","fetchFeaturedWallets","featuredWalletIds","length","sortedData","sort","a","b","indexOf","images","d","image_id","fetchRecommendedWallets","includeWalletIds","excludeWalletIds","chains","getRequestedCaipNetworkIds","recent","getRecentWallets","recommendedImages","recentImages","r","fetchWalletsByPage","slice","uniqueBy","some","chain","includes","initializeExcludedWallets","forEach","wallet","rdns","name","searchWallet","badge","trim","badge_type","sendEvent","type","event","properties","wait","initPromise","fetchFn","existingPromise","prefetch","prefetchAnalyticsConfig","analytics","fetchAnalyticsConfig","setFeatures","filterByNamespaces","namespaces","caipNetworkIds","clearFilterByNamespaces","setFilterByNamespace","namespace"],"sources":["../../../../src/controllers/ApiController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}