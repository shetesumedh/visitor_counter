{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { ApiController, ConnectorController, CoreHelperUtil } from '@reown/appkit-controllers';\nimport { customElement } from '@reown/appkit-ui';\nimport '@reown/appkit-ui/wui-card-select-loader';\nimport '@reown/appkit-ui/wui-grid';\nimport { WalletUtil } from '../../utils/WalletUtil.js';\nimport '../w3m-all-wallets-list-item/index.js';\nimport styles from './styles.js';\nconst PAGINATOR_ID = 'local-paginator';\nlet W3mAllWalletsList = class W3mAllWalletsList extends LitElement {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.paginationObserver = undefined;\n    this.loading = !ApiController.state.wallets.length;\n    this.wallets = ApiController.state.wallets;\n    this.recommended = ApiController.state.recommended;\n    this.featured = ApiController.state.featured;\n    this.filteredWallets = ApiController.state.filteredWallets;\n    this.unsubscribe.push(...[ApiController.subscribeKey('wallets', val => this.wallets = val), ApiController.subscribeKey('recommended', val => this.recommended = val), ApiController.subscribeKey('featured', val => this.featured = val), ApiController.subscribeKey('filteredWallets', val => this.filteredWallets = val)]);\n  }\n  firstUpdated() {\n    this.initialFetch();\n    this.createPaginationObserver();\n  }\n  disconnectedCallback() {\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    this.paginationObserver?.disconnect();\n  }\n  render() {\n    return html`\n      <wui-grid\n        data-scroll=${!this.loading}\n        .padding=${['0', 's', 's', 's']}\n        columnGap=\"xxs\"\n        rowGap=\"l\"\n        justifyContent=\"space-between\"\n      >\n        ${this.loading ? this.shimmerTemplate(16) : this.walletsTemplate()}\n        ${this.paginationLoaderTemplate()}\n      </wui-grid>\n    `;\n  }\n  async initialFetch() {\n    this.loading = true;\n    const gridEl = this.shadowRoot?.querySelector('wui-grid');\n    if (gridEl) {\n      await ApiController.fetchWalletsByPage({\n        page: 1\n      });\n      await gridEl.animate([{\n        opacity: 1\n      }, {\n        opacity: 0\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      }).finished;\n      this.loading = false;\n      gridEl.animate([{\n        opacity: 0\n      }, {\n        opacity: 1\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      });\n    }\n  }\n  shimmerTemplate(items, id) {\n    return [...Array(items)].map(() => html`\n        <wui-card-select-loader type=\"wallet\" id=${ifDefined(id)}></wui-card-select-loader>\n      `);\n  }\n  walletsTemplate() {\n    const wallets = this.filteredWallets?.length > 0 ? CoreHelperUtil.uniqueBy([...this.featured, ...this.recommended, ...this.filteredWallets], 'id') : CoreHelperUtil.uniqueBy([...this.featured, ...this.recommended, ...this.wallets], 'id');\n    const walletsWithInstalled = WalletUtil.markWalletsAsInstalled(wallets);\n    return walletsWithInstalled.map(wallet => html`\n        <w3m-all-wallets-list-item\n          @click=${() => this.onConnectWallet(wallet)}\n          .wallet=${wallet}\n        ></w3m-all-wallets-list-item>\n      `);\n  }\n  paginationLoaderTemplate() {\n    const {\n      wallets,\n      recommended,\n      featured,\n      count\n    } = ApiController.state;\n    const columns = window.innerWidth < 352 ? 3 : 4;\n    const currentWallets = wallets.length + recommended.length;\n    const minimumRows = Math.ceil(currentWallets / columns);\n    let shimmerCount = minimumRows * columns - currentWallets + columns;\n    shimmerCount -= wallets.length ? featured.length % columns : 0;\n    if (count === 0 && featured.length > 0) {\n      return null;\n    }\n    if (count === 0 || [...featured, ...wallets, ...recommended].length < count) {\n      return this.shimmerTemplate(shimmerCount, PAGINATOR_ID);\n    }\n    return null;\n  }\n  createPaginationObserver() {\n    const loaderEl = this.shadowRoot?.querySelector(`#${PAGINATOR_ID}`);\n    if (loaderEl) {\n      this.paginationObserver = new IntersectionObserver(([element]) => {\n        if (element?.isIntersecting && !this.loading) {\n          const {\n            page,\n            count,\n            wallets\n          } = ApiController.state;\n          if (wallets.length < count) {\n            ApiController.fetchWalletsByPage({\n              page: page + 1\n            });\n          }\n        }\n      });\n      this.paginationObserver.observe(loaderEl);\n    }\n  }\n  onConnectWallet(wallet) {\n    ConnectorController.selectWalletConnector(wallet);\n  }\n};\nW3mAllWalletsList.styles = styles;\n__decorate([state()], W3mAllWalletsList.prototype, \"loading\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"wallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"recommended\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"featured\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"filteredWallets\", void 0);\nW3mAllWalletsList = __decorate([customElement('w3m-all-wallets-list')], W3mAllWalletsList);\nexport { W3mAllWalletsList };","map":{"version":3,"names":["LitElement","html","state","ifDefined","ApiController","ConnectorController","CoreHelperUtil","customElement","WalletUtil","styles","PAGINATOR_ID","W3mAllWalletsList","constructor","unsubscribe","paginationObserver","undefined","loading","wallets","length","recommended","featured","filteredWallets","push","subscribeKey","val","firstUpdated","initialFetch","createPaginationObserver","disconnectedCallback","forEach","disconnect","render","shimmerTemplate","walletsTemplate","paginationLoaderTemplate","gridEl","shadowRoot","querySelector","fetchWalletsByPage","page","animate","opacity","duration","fill","easing","finished","items","id","Array","map","uniqueBy","walletsWithInstalled","markWalletsAsInstalled","wallet","onConnectWallet","count","columns","window","innerWidth","currentWallets","minimumRows","Math","ceil","shimmerCount","loaderEl","IntersectionObserver","element","isIntersecting","observe","selectWalletConnector","__decorate"],"sources":["../../../../../src/partials/w3m-all-wallets-list/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}