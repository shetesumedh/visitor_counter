{"ast":null,"code":"import { createElement as _createElement } from \"preact\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\n// Copyright (c) 2018-2025 Coinbase, Inc. <https://www.coinbase.com/>\nimport { clsx } from 'clsx';\nimport { render } from 'preact';\nimport { getDisplayableUsername } from '../../core/username/getDisplayableUsername.js';\nimport { store } from '../../store/store.js';\nimport { BaseLogo } from '../assets/BaseLogo.js';\nimport { useEffect, useMemo, useState } from 'preact/hooks';\nimport css from './Dialog-css.js';\nconst closeIcon = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEzIDFMMSAxM20wLTEyTDEzIDEzIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+`;\n// Helper function to detect phone portrait mode\nfunction isPhonePortrait() {\n  return window.innerWidth <= 600 && window.innerHeight > window.innerWidth;\n}\n// Handle bar component for mobile bottom sheet\nconst DialogHandleBar = () => {\n  const [showHandleBar, setShowHandleBar] = useState(false);\n  useEffect(() => {\n    // Only show handle bar on phone portrait mode\n    const checkOrientation = () => {\n      setShowHandleBar(isPhonePortrait());\n    };\n    // Initial check\n    checkOrientation();\n    // Listen for orientation/resize changes\n    window.addEventListener('resize', checkOrientation);\n    window.addEventListener('orientationchange', checkOrientation);\n    return () => {\n      window.removeEventListener('resize', checkOrientation);\n      window.removeEventListener('orientationchange', checkOrientation);\n    };\n  }, []);\n  if (!showHandleBar) {\n    return null;\n  }\n  return _jsx(\"div\", {\n    class: \"-base-acc-sdk-dialog-handle-bar\"\n  });\n};\nexport class Dialog {\n  constructor() {\n    this.items = new Map();\n    this.nextItemKey = 0;\n    this.root = null;\n  }\n  attach(el) {\n    this.root = document.createElement('div');\n    this.root.className = '-base-acc-sdk-dialog-root';\n    el.appendChild(this.root);\n    this.render();\n  }\n  presentItem(itemProps) {\n    const key = this.nextItemKey++;\n    this.items.set(key, itemProps);\n    this.render();\n  }\n  clear() {\n    this.items.clear();\n    if (this.root) {\n      render(null, this.root);\n    }\n  }\n  render() {\n    if (this.root) {\n      render(_jsx(\"div\", {\n        children: _jsx(DialogContainer, {\n          children: Array.from(this.items.entries()).map(([key, itemProps]) => _createElement(DialogInstance, Object.assign({}, itemProps, {\n            key: key,\n            handleClose: () => {\n              var _a;\n              this.clear();\n              (_a = itemProps.onClose) === null || _a === void 0 ? void 0 : _a.call(itemProps);\n            }\n          })))\n        })\n      }), this.root);\n    }\n  }\n}\nexport const DialogContainer = props => {\n  const [dragY, setDragY] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startY, setStartY] = useState(0);\n  // Touch event handlers for drag-to-dismiss (entire dialog area)\n  const handleTouchStart = e => {\n    // Only enable drag on mobile portrait mode\n    if (!isPhonePortrait()) return;\n    const touch = e.touches[0];\n    setStartY(touch.clientY);\n    setIsDragging(true);\n  };\n  const handleTouchMove = e => {\n    if (!isDragging) return;\n    const touch = e.touches[0];\n    const deltaY = touch.clientY - startY;\n    // Only allow dragging down (positive deltaY)\n    if (deltaY > 0) {\n      setDragY(deltaY);\n      e.preventDefault(); // Prevent scrolling\n    }\n  };\n  const handleTouchEnd = () => {\n    if (!isDragging) return;\n    setIsDragging(false);\n    // Dismiss if dragged down more than 100px\n    if (dragY > 100) {\n      // Find the dialog instance and trigger its close handler\n      const closeButton = document.querySelector('.-base-acc-sdk-dialog-instance-header-close');\n      if (closeButton) {\n        closeButton.click();\n      }\n    } else {\n      // Animate back to original position\n      setDragY(0);\n    }\n  };\n  return _jsxs(\"div\", {\n    class: clsx('-base-acc-sdk-dialog-container'),\n    children: [_jsx(\"style\", {\n      children: css\n    }), _jsx(\"div\", {\n      class: \"-base-acc-sdk-dialog-backdrop\",\n      onTouchStart: handleTouchStart,\n      onTouchMove: handleTouchMove,\n      onTouchEnd: handleTouchEnd,\n      children: _jsxs(\"div\", {\n        class: \"-base-acc-sdk-dialog\",\n        style: {\n          transform: `translateY(${dragY}px)`,\n          transition: isDragging ? 'none' : 'transform 0.2s ease-out'\n        },\n        children: [_jsx(DialogHandleBar, {}), props.children]\n      })\n    })]\n  });\n};\nexport const DialogInstance = ({\n  title,\n  message,\n  actionItems,\n  handleClose\n}) => {\n  const [hidden, setHidden] = useState(true);\n  const [isLoadingUsername, setIsLoadingUsername] = useState(true);\n  const [username, setUsername] = useState(null);\n  useEffect(() => {\n    const timer = window.setTimeout(() => {\n      setHidden(false);\n    }, 1);\n    return () => {\n      window.clearTimeout(timer);\n    };\n  }, []);\n  useEffect(() => {\n    const fetchEnsName = async () => {\n      var _a;\n      const address = (_a = store.account.get().accounts) === null || _a === void 0 ? void 0 : _a[0];\n      if (address) {\n        const username = await getDisplayableUsername(address);\n        setUsername(username);\n      }\n      setIsLoadingUsername(false);\n    };\n    fetchEnsName();\n  }, []);\n  const headerTitle = useMemo(() => {\n    return username ? `Signed in as ${username}` : 'Base Account';\n  }, [username]);\n  const shouldShowHeaderTitle = !isLoadingUsername;\n  return _jsxs(\"div\", {\n    class: clsx('-base-acc-sdk-dialog-instance', hidden && '-base-acc-sdk-dialog-instance-hidden'),\n    children: [_jsxs(\"div\", {\n      class: \"-base-acc-sdk-dialog-instance-header\",\n      children: [_jsxs(\"div\", {\n        class: \"-base-acc-sdk-dialog-instance-header-icon-and-title\",\n        children: [_jsx(BaseLogo, {\n          fill: \"blue\"\n        }), shouldShowHeaderTitle && _jsx(\"div\", {\n          class: \"-base-acc-sdk-dialog-instance-header-icon-and-title-title\",\n          children: headerTitle\n        })]\n      }), _jsx(\"div\", {\n        class: \"-base-acc-sdk-dialog-instance-header-close\",\n        onClick: handleClose,\n        children: _jsx(\"img\", {\n          src: closeIcon,\n          class: \"-base-acc-sdk-dialog-instance-header-close-icon\"\n        })\n      })]\n    }), _jsxs(\"div\", {\n      class: \"-base-acc-sdk-dialog-instance-content\",\n      children: [_jsx(\"div\", {\n        class: \"-base-acc-sdk-dialog-instance-content-title\",\n        children: title\n      }), _jsx(\"div\", {\n        class: \"-base-acc-sdk-dialog-instance-content-message\",\n        children: message\n      })]\n    }), actionItems && actionItems.length > 0 && _jsx(\"div\", {\n      class: \"-base-acc-sdk-dialog-instance-actions\",\n      children: actionItems.map((action, i) => _jsx(\"button\", {\n        class: clsx('-base-acc-sdk-dialog-instance-button', action.variant === 'primary' && '-base-acc-sdk-dialog-instance-button-primary', action.variant === 'secondary' && '-base-acc-sdk-dialog-instance-button-secondary'),\n        onClick: action.onClick,\n        children: action.text\n      }, i))\n    })]\n  });\n};","map":{"version":3,"names":["clsx","render","getDisplayableUsername","store","BaseLogo","useEffect","useMemo","useState","css","closeIcon","isPhonePortrait","window","innerWidth","innerHeight","DialogHandleBar","showHandleBar","setShowHandleBar","checkOrientation","addEventListener","removeEventListener","_jsx","class","Dialog","constructor","items","Map","nextItemKey","root","attach","el","document","createElement","className","appendChild","presentItem","itemProps","key","set","clear","children","DialogContainer","Array","from","entries","map","_createElement","DialogInstance","Object","assign","handleClose","_a","onClose","call","props","dragY","setDragY","isDragging","setIsDragging","startY","setStartY","handleTouchStart","e","touch","touches","clientY","handleTouchMove","deltaY","preventDefault","handleTouchEnd","closeButton","querySelector","click","_jsxs","onTouchStart","onTouchMove","onTouchEnd","style","transform","transition","title","message","actionItems","hidden","setHidden","isLoadingUsername","setIsLoadingUsername","username","setUsername","timer","setTimeout","clearTimeout","fetchEnsName","address","account","get","accounts","headerTitle","shouldShowHeaderTitle","fill","onClick","src","length","action","i","variant","text"],"sources":["../../../src/ui/Dialog/Dialog.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}