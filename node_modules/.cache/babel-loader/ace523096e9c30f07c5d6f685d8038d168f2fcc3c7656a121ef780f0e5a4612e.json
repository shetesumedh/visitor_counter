{"ast":null,"code":"// TODO: error should not depend on walletlink. revisit this.\nimport { VERSION } from '../../sdk-info.js';\nimport { isErrorResponse } from '../../sign/walletlink/relay/type/Web3Response.js';\nimport { standardErrorCodes } from './constants.js';\nimport { serialize } from './utils.js';\n/**\n * Serializes an error to a format that is compatible with the Ethereum JSON RPC error format.\n * See https://docs.cloud.coinbase.com/wallet-sdk/docs/errors\n * for more information.\n */\nexport function serializeError(error) {\n  const serialized = serialize(getErrorObject(error), {\n    shouldIncludeStack: true\n  });\n  const docUrl = new URL('https://docs.cloud.coinbase.com/wallet-sdk/docs/errors');\n  docUrl.searchParams.set('version', VERSION);\n  docUrl.searchParams.set('code', serialized.code.toString());\n  docUrl.searchParams.set('message', serialized.message);\n  return Object.assign(Object.assign({}, serialized), {\n    docUrl: docUrl.href\n  });\n}\n/**\n * Converts an error to a serializable object.\n */\nfunction getErrorObject(error) {\n  var _a;\n  if (typeof error === 'string') {\n    return {\n      message: error,\n      code: standardErrorCodes.rpc.internal\n    };\n  }\n  if (isErrorResponse(error)) {\n    const message = error.errorMessage;\n    const code = (_a = error.errorCode) !== null && _a !== void 0 ? _a : message.match(/(denied|rejected)/i) ? standardErrorCodes.provider.userRejectedRequest : undefined;\n    return Object.assign(Object.assign({}, error), {\n      message,\n      code,\n      data: {\n        method: error.method\n      }\n    });\n  }\n  return error;\n}","map":{"version":3,"names":["VERSION","isErrorResponse","standardErrorCodes","serialize","serializeError","error","serialized","getErrorObject","shouldIncludeStack","docUrl","URL","searchParams","set","code","toString","message","Object","assign","href","rpc","internal","errorMessage","_a","errorCode","match","provider","userRejectedRequest","undefined","data","method"],"sources":["../../../src/core/error/serialize.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA,SAASA,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,eAAe,QAAsB,kDAAkD;AAChG,SAASC,kBAAkB,QAAQ,gBAAgB;AACnD,SAASC,SAAS,QAAQ,YAAY;AAEtC;;;;;AAKA,OAAM,SAAUC,cAAcA,CAACC,KAAc;EAC3C,MAAMC,UAAU,GAAGH,SAAS,CAACI,cAAc,CAACF,KAAK,CAAC,EAAE;IAClDG,kBAAkB,EAAE;GACrB,CAAC;EAEF,MAAMC,MAAM,GAAG,IAAIC,GAAG,CAAC,wDAAwD,CAAC;EAChFD,MAAM,CAACE,YAAY,CAACC,GAAG,CAAC,SAAS,EAAEZ,OAAO,CAAC;EAC3CS,MAAM,CAACE,YAAY,CAACC,GAAG,CAAC,MAAM,EAAEN,UAAU,CAACO,IAAI,CAACC,QAAQ,EAAE,CAAC;EAC3DL,MAAM,CAACE,YAAY,CAACC,GAAG,CAAC,SAAS,EAAEN,UAAU,CAACS,OAAO,CAAC;EAEtD,OAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACKX,UAAU;IACbG,MAAM,EAAEA,MAAM,CAACS;EAAI;AAEvB;AAEA;;;AAGA,SAASX,cAAcA,CAACF,KAAsC;;EAC5D,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAO;MACLU,OAAO,EAAEV,KAAK;MACdQ,IAAI,EAAEX,kBAAkB,CAACiB,GAAG,CAACC;KAC9B;EACH;EACA,IAAInB,eAAe,CAACI,KAAK,CAAC,EAAE;IAC1B,MAAMU,OAAO,GAAGV,KAAK,CAACgB,YAAY;IAClC,MAAMR,IAAI,GACR,CAAAS,EAAA,GAAAjB,KAAK,CAACkB,SAAS,cAAAD,EAAA,cAAAA,EAAA,GACdP,OAAO,CAACS,KAAK,CAAC,oBAAoB,CAAC,GAChCtB,kBAAkB,CAACuB,QAAQ,CAACC,mBAAmB,GAC/CC,SAAU;IAEhB,OAAAX,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACKZ,KAAK;MACRU,OAAO;MACPF,IAAI;MACJe,IAAI,EAAE;QAAEC,MAAM,EAAExB,KAAK,CAACwB;MAAM;IAAE;EAElC;EACA,OAAOxB,KAAK;AACd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}