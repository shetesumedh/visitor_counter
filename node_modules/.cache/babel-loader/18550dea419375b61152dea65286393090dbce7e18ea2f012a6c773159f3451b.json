{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletLinkHTTP = void 0;\nclass WalletLinkHTTP {\n  constructor(linkAPIUrl, sessionId, sessionKey) {\n    this.linkAPIUrl = linkAPIUrl;\n    this.sessionId = sessionId;\n    const credentials = `${sessionId}:${sessionKey}`;\n    this.auth = `Basic ${btoa(credentials)}`;\n  }\n  // mark unseen events as seen\n  async markUnseenEventsAsSeen(events) {\n    return Promise.all(events.map(e => fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`, {\n      method: 'POST',\n      headers: {\n        Authorization: this.auth\n      }\n    }))).catch(error => console.error('Unabled to mark event as failed:', error));\n  }\n  async fetchUnseenEvents() {\n    var _a;\n    const response = await fetch(`${this.linkAPIUrl}/events?unseen=true`, {\n      headers: {\n        Authorization: this.auth\n      }\n    });\n    if (response.ok) {\n      const {\n        events,\n        error\n      } = await response.json();\n      if (error) {\n        throw new Error(`Check unseen events failed: ${error}`);\n      }\n      const responseEvents = (_a = events === null || events === void 0 ? void 0 : events.filter(e => e.event === 'Web3Response').map(e => ({\n        type: 'Event',\n        sessionId: this.sessionId,\n        eventId: e.id,\n        event: e.event,\n        data: e.data\n      }))) !== null && _a !== void 0 ? _a : [];\n      this.markUnseenEventsAsSeen(responseEvents);\n      return responseEvents;\n    }\n    throw new Error(`Check unseen events failed: ${response.status}`);\n  }\n}\nexports.WalletLinkHTTP = WalletLinkHTTP;","map":{"version":3,"names":["Object","defineProperty","exports","value","WalletLinkHTTP","constructor","linkAPIUrl","sessionId","sessionKey","credentials","auth","btoa","markUnseenEventsAsSeen","events","Promise","all","map","e","fetch","eventId","method","headers","Authorization","catch","error","console","fetchUnseenEvents","_a","response","ok","json","Error","responseEvents","filter","event","type","id","data","status"],"sources":["/home/sumedhshete/visitor-counter/frontend/node_modules/cbw-sdk/dist/relay/walletlink/connection/WalletLinkHTTP.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkHTTP = void 0;\nclass WalletLinkHTTP {\n    constructor(linkAPIUrl, sessionId, sessionKey) {\n        this.linkAPIUrl = linkAPIUrl;\n        this.sessionId = sessionId;\n        const credentials = `${sessionId}:${sessionKey}`;\n        this.auth = `Basic ${btoa(credentials)}`;\n    }\n    // mark unseen events as seen\n    async markUnseenEventsAsSeen(events) {\n        return Promise.all(events.map((e) => fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`, {\n            method: 'POST',\n            headers: {\n                Authorization: this.auth,\n            },\n        }))).catch((error) => console.error('Unabled to mark event as failed:', error));\n    }\n    async fetchUnseenEvents() {\n        var _a;\n        const response = await fetch(`${this.linkAPIUrl}/events?unseen=true`, {\n            headers: {\n                Authorization: this.auth,\n            },\n        });\n        if (response.ok) {\n            const { events, error } = (await response.json());\n            if (error) {\n                throw new Error(`Check unseen events failed: ${error}`);\n            }\n            const responseEvents = (_a = events === null || events === void 0 ? void 0 : events.filter((e) => e.event === 'Web3Response').map((e) => ({\n                type: 'Event',\n                sessionId: this.sessionId,\n                eventId: e.id,\n                event: e.event,\n                data: e.data,\n            }))) !== null && _a !== void 0 ? _a : [];\n            this.markUnseenEventsAsSeen(responseEvents);\n            return responseEvents;\n        }\n        throw new Error(`Check unseen events failed: ${response.status}`);\n    }\n}\nexports.WalletLinkHTTP = WalletLinkHTTP;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,cAAc,GAAG,KAAK,CAAC;AAC/B,MAAMA,cAAc,CAAC;EACjBC,WAAWA,CAACC,UAAU,EAAEC,SAAS,EAAEC,UAAU,EAAE;IAC3C,IAAI,CAACF,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,MAAME,WAAW,GAAG,GAAGF,SAAS,IAAIC,UAAU,EAAE;IAChD,IAAI,CAACE,IAAI,GAAG,SAASC,IAAI,CAACF,WAAW,CAAC,EAAE;EAC5C;EACA;EACA,MAAMG,sBAAsBA,CAACC,MAAM,EAAE;IACjC,OAAOC,OAAO,CAACC,GAAG,CAACF,MAAM,CAACG,GAAG,CAAEC,CAAC,IAAKC,KAAK,CAAC,GAAG,IAAI,CAACZ,UAAU,WAAWW,CAAC,CAACE,OAAO,OAAO,EAAE;MACtFC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACLC,aAAa,EAAE,IAAI,CAACZ;MACxB;IACJ,CAAC,CAAC,CAAC,CAAC,CAACa,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC,CAAC;EACnF;EACA,MAAME,iBAAiBA,CAAA,EAAG;IACtB,IAAIC,EAAE;IACN,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAAC,GAAG,IAAI,CAACZ,UAAU,qBAAqB,EAAE;MAClEe,OAAO,EAAE;QACLC,aAAa,EAAE,IAAI,CAACZ;MACxB;IACJ,CAAC,CAAC;IACF,IAAIkB,QAAQ,CAACC,EAAE,EAAE;MACb,MAAM;QAAEhB,MAAM;QAAEW;MAAM,CAAC,GAAI,MAAMI,QAAQ,CAACE,IAAI,CAAC,CAAE;MACjD,IAAIN,KAAK,EAAE;QACP,MAAM,IAAIO,KAAK,CAAC,+BAA+BP,KAAK,EAAE,CAAC;MAC3D;MACA,MAAMQ,cAAc,GAAG,CAACL,EAAE,GAAGd,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACoB,MAAM,CAAEhB,CAAC,IAAKA,CAAC,CAACiB,KAAK,KAAK,cAAc,CAAC,CAAClB,GAAG,CAAEC,CAAC,KAAM;QACtIkB,IAAI,EAAE,OAAO;QACb5B,SAAS,EAAE,IAAI,CAACA,SAAS;QACzBY,OAAO,EAAEF,CAAC,CAACmB,EAAE;QACbF,KAAK,EAAEjB,CAAC,CAACiB,KAAK;QACdG,IAAI,EAAEpB,CAAC,CAACoB;MACZ,CAAC,CAAC,CAAC,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,EAAE;MACxC,IAAI,CAACf,sBAAsB,CAACoB,cAAc,CAAC;MAC3C,OAAOA,cAAc;IACzB;IACA,MAAM,IAAID,KAAK,CAAC,+BAA+BH,QAAQ,CAACU,MAAM,EAAE,CAAC;EACrE;AACJ;AACApC,OAAO,CAACE,cAAc,GAAGA,cAAc","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}